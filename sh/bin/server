#!/usr/bin/env node

(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"/home/vadzim/v/work/nerojs/node_modules/colors/lib/colors.js":[function(require,module,exports){
function build(e){var r=function o(){return applyStyle.apply(o,arguments)};return r._styles=e,r.__proto__=proto,r}function applyStyle(){var e=arguments,r=e.length,o=0!==r&&String(arguments[0]);if(r>1)for(var s=1;r>s;s++)o+=" "+e[s];if(!colors.enabled||!o)return o;for(var t=this._styles,n=t.length;n--;){var l=ansiStyles[t[n]];o=l.open+o.replace(l.closeRe,l.open)+l.close}return o}function applyTheme(e){for(var r in e)!function(r){colors[r]=function(o){return colors[e[r]](o)}}(r)}function init(){var e={};return Object.keys(styles).forEach(function(r){e[r]={get:function(){return build([r])}}}),e}var colors={};module.exports=colors,colors.themes={};var ansiStyles=colors.styles=require("./styles"),defineProps=Object.defineProperties;colors.supportsColor=require("./system/supports-colors"),"undefined"==typeof colors.enabled&&(colors.enabled=colors.supportsColor),colors.stripColors=colors.strip=function(e){return(""+e).replace(/\x1B\[\d+m/g,"")};var stylize=colors.stylize=function(e,r){return ansiStyles[r].open+e+ansiStyles[r].close},matchOperatorsRe=/[|\\{}()[\]^$+*?.]/g,escapeStringRegexp=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(matchOperatorsRe,"\\$&")},styles=function(){var e={};return ansiStyles.grey=ansiStyles.gray,Object.keys(ansiStyles).forEach(function(r){ansiStyles[r].closeRe=new RegExp(escapeStringRegexp(ansiStyles[r].close),"g"),e[r]={get:function(){return build(this._styles.concat(r))}}}),e}(),proto=defineProps(function(){},styles);colors.setTheme=function(e){if("string"==typeof e)try{return colors.themes[e]=require(e),applyTheme(colors.themes[e]),colors.themes[e]}catch(r){return console.log(r),r}else applyTheme(e)};var sequencer=function(e,r){var o=r.split("");return o=o.map(e),o.join("")};colors.trap=require("./custom/trap"),colors.zalgo=require("./custom/zalgo"),colors.maps={},colors.maps.america=require("./maps/america"),colors.maps.zebra=require("./maps/zebra"),colors.maps.rainbow=require("./maps/rainbow"),colors.maps.random=require("./maps/random");for(var map in colors.maps)!function(e){colors[e]=function(r){return sequencer(colors.maps[e],r)}}(map);defineProps(colors,init());
},{"./custom/trap":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/custom/trap.js","./custom/zalgo":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/custom/zalgo.js","./maps/america":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/maps/america.js","./maps/rainbow":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/maps/rainbow.js","./maps/random":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/maps/random.js","./maps/zebra":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/maps/zebra.js","./styles":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/styles.js","./system/supports-colors":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/system/supports-colors.js"}],"/home/vadzim/v/work/nerojs/node_modules/colors/lib/custom/trap.js":[function(require,module,exports){
module.exports=function(t){var o="";t=t||"Run the trap, drop the bass",t=t.split("");var r={a:["@","ƒÑ","»∫","…Ö","Œî","Œõ","–î"],b:["√ü","∆Å","…É","…Æ","Œ≤","‡∏ø"],c:["¬©","»ª","œæ"],d:["√ê","∆ä","‘Ä","‘Å","‘Ç","‘É"],e:["√ã","ƒï","∆é","…ò","Œ£","Œæ","“º","‡©¨"],f:["”∫"],g:["…¢"],h:["ƒ¶","∆ï","“¢","“∫","”á","‘ä"],i:["‡ºè"],j:["ƒ¥"],k:["ƒ∏","“†","”É","‘û"],l:["ƒπ"],m:[" ç","”ç","”é","‘†","‘°","‡µ©"],n:["√ë","≈ã","∆ù","Õ∂","Œ†","“ä"],o:["√ò","√µ","√∏","«æ"," ò","—∫","◊ù","€ù","‡πè"],p:["«∑","“é"],q:["‡ßç"],r:["¬Æ","∆¶","»ê","…å"," Ä","–Ø"],s:["¬ß","œû","œü","œ®"],t:["≈Å","≈¶","Õ≥"],u:["∆±","’ç"],v:["◊ò"],w:["–®","—†","—º","‡µ∞"],x:["“≤","”æ","”º","”Ω"],y:["¬•","“∞","”ã"],z:["∆µ","…Ä"]};return t.forEach(function(t){t=t.toLowerCase();var e=r[t]||[" "],a=Math.floor(Math.random()*e.length);o+="undefined"!=typeof r[t]?r[t][a]:t}),o};
},{}],"/home/vadzim/v/work/nerojs/node_modules/colors/lib/custom/zalgo.js":[function(require,module,exports){
module.exports=function(n){function i(n){var i=Math.floor(Math.random()*n);return i}function r(n){var i=!1;return d.filter(function(r){i=r===n}),i}function o(n,o){var d,e,a="";o=o||{},o.up=o.up||!0,o.mid=o.mid||!0,o.down=o.down||!0,o.size=o.size||"maxi",n=n.split("");for(e in n)if(!r(e)){switch(a+=n[e],d={up:0,down:0,mid:0},o.size){case"mini":d.up=i(8),d.min=i(2),d.down=i(8);break;case"maxi":d.up=i(16)+3,d.min=i(4)+1,d.down=i(64)+3;break;default:d.up=i(8)+1,d.mid=i(6)/2,d.down=i(8)+1}var t=["up","mid","down"];for(var m in t)for(var f=t[m],p=0;p<=d[f];p++)o[f]&&(a+=u[f][i(u[f].length)])}return a}n=n||"   he is here   ";var u={up:["Ãç","Ãé","ÃÑ","ÃÖ","Ãø","Ãë","ÃÜ","Ãê","Õí","Õó","Õë","Ãá","Ãà","Ãä","ÕÇ","Ãì","Ãà","Õä","Õã","Õå","ÃÉ","ÃÇ","Ãå","Õê","ÃÄ","ÃÅ","Ãã","Ãè","Ãí","Ãì","Ãî","ÃΩ","Ãâ","Õ£","Õ§","Õ•","Õ¶","Õß","Õ®","Õ©","Õ™","Õ´","Õ¨","Õ≠","ÕÆ","ÕØ","Ãæ","Õõ","ÕÜ","Ãö"],down:["Ãñ","Ãó","Ãò","Ãô","Ãú","Ãù","Ãû","Ãü","Ã†","Ã§","Ã•","Ã¶","Ã©","Ã™","Ã´","Ã¨","Ã≠","ÃÆ","ÃØ","Ã∞","Ã±","Ã≤","Ã≥","Ãπ","Ã∫","Ãª","Ãº","ÕÖ","Õá","Õà","Õâ","Õç","Õé","Õì","Õî","Õï","Õñ","Õô","Õö","Ã£"],mid:["Ãï","Ãõ","ÃÄ","ÃÅ","Õò","Ã°","Ã¢","Ãß","Ã®","Ã¥","Ãµ","Ã∂","Õú","Õù","Õû","Õü","Õ†","Õ¢","Ã∏","Ã∑","Õ°"," “â"]},d=[].concat(u.up,u.down,u.mid);return o(n)};
},{}],"/home/vadzim/v/work/nerojs/node_modules/colors/lib/extendStringPrototype.js":[function(require,module,exports){
var colors=require("./colors"),styles=require("./styles");module.exports=function(){function r(r){var o=["__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","charAt","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf","charCodeAt","indexOf","lastIndexof","length","localeCompare","match","replace","search","slice","split","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight"];Object.keys(r).forEach(function(e){-1!==o.indexOf(e)?console.log("warn: ".red+("String.prototype"+e).magenta+" is probably something you don't want to override. Ignoring style name"):"string"==typeof r[e]?(colors[e]=colors[r[e]],t(e,function(){return colors[r[e]](this)})):t(e,function(){for(var t=this,o=0;o<r[e].length;o++)t=exports[r[e][o]](t);return t})})}var t=function(r,t){String.prototype.__defineGetter__(r,t)},o=function(r,t){return styles[t].open+r+styles[t].close};t("strip",function(){return colors.strip(this)}),t("stripColors",function(){return colors.strip(this)}),t("trap",function(){return colors.trap(this)}),t("zalgo",function(){return colors.zalgo(this)}),t("zebra",function(){return colors.zebra(this)}),t("rainbow",function(){return colors.rainbow(this)}),t("random",function(){return colors.random(this)}),t("america",function(){return colors.america(this)});var e=Object.keys(colors.styles);e.forEach(function(r){t(r,function(){return o(this,r)})}),colors.setTheme=function(t){if("string"==typeof t)try{return colors.themes[t]=require(t),r(colors.themes[t]),colors.themes[t]}catch(o){return console.log(o),o}else r(t)}};
},{"./colors":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/colors.js","./styles":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/styles.js"}],"/home/vadzim/v/work/nerojs/node_modules/colors/lib/index.js":[function(require,module,exports){
var colors=require("./colors");module.exports=colors;var extendStringPrototype=require("./extendStringPrototype")();
},{"./colors":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/colors.js","./extendStringPrototype":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/extendStringPrototype.js"}],"/home/vadzim/v/work/nerojs/node_modules/colors/lib/maps/america.js":[function(require,module,exports){
var colors=require("../colors");module.exports=function(){return function(r,e){if(" "===r)return r;switch(e%3){case 0:return colors.red(r);case 1:return colors.white(r);case 2:return colors.blue(r)}}}();
},{"../colors":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/colors.js"}],"/home/vadzim/v/work/nerojs/node_modules/colors/lib/maps/rainbow.js":[function(require,module,exports){
var colors=require("../colors");module.exports=function(){var r=["red","yellow","green","blue","magenta"];return function(e,o){return" "===e?e:colors[r[o++%r.length]](e)}}();
},{"../colors":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/colors.js"}],"/home/vadzim/v/work/nerojs/node_modules/colors/lib/maps/random.js":[function(require,module,exports){
var colors=require("../colors");module.exports=function(){var e=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta"];return function(r){return" "===r?r:colors[e[Math.round(Math.random()*(e.length-1))]](r)}}();
},{"../colors":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/colors.js"}],"/home/vadzim/v/work/nerojs/node_modules/colors/lib/maps/zebra.js":[function(require,module,exports){
var colors=require("../colors");module.exports=function(r,o){return o%2===0?r:colors.inverse(r)};
},{"../colors":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/colors.js"}],"/home/vadzim/v/work/nerojs/node_modules/colors/lib/styles.js":[function(require,module,exports){
var styles={};module.exports=styles;var codes={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(codes).forEach(function(e){var l=codes[e],a=styles[e]=[];a.open="["+l[0]+"m",a.close="["+l[1]+"m"});
},{}],"/home/vadzim/v/work/nerojs/node_modules/colors/lib/system/supports-colors.js":[function(require,module,exports){
var argv=process.argv;module.exports=function(){return-1!==argv.indexOf("--no-color")||-1!==argv.indexOf("--color=false")?!1:-1!==argv.indexOf("--color")||-1!==argv.indexOf("--color=true")||-1!==argv.indexOf("--color=always")?!0:process.stdout&&!process.stdout.isTTY?!1:"win32"===process.platform?!0:"COLORTERM"in process.env?!0:"dumb"===process.env.TERM?!1:/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(process.env.TERM)?!0:!1}();
},{}],"/home/vadzim/v/work/nerojs/node_modules/cookie-parser/index.js":[function(require,module,exports){
var cookie=require("cookie"),parse=require("./lib/parse");exports=module.exports=function(e,o){return function(s,i,r){if(s.cookies)return r();var k=s.headers.cookie;return s.secret=e,s.cookies=Object.create(null),s.signedCookies=Object.create(null),k?(s.cookies=cookie.parse(k,o),e&&(s.signedCookies=parse.signedCookies(s.cookies,e),s.signedCookies=parse.JSONCookies(s.signedCookies)),s.cookies=parse.JSONCookies(s.cookies),void r()):r()}},exports.JSONCookie=parse.JSONCookie,exports.JSONCookies=parse.JSONCookies,exports.signedCookie=parse.signedCookie,exports.signedCookies=parse.signedCookies;
},{"./lib/parse":"/home/vadzim/v/work/nerojs/node_modules/cookie-parser/lib/parse.js","cookie":"/home/vadzim/v/work/nerojs/node_modules/cookie-parser/node_modules/cookie/index.js"}],"/home/vadzim/v/work/nerojs/node_modules/cookie-parser/lib/parse.js":[function(require,module,exports){
var signature=require("cookie-signature");exports.signedCookies=function(e,r){for(var t,o,s,n=Object.keys(e),i=Object.create(null),u=0;u<n.length;u++)o=n[u],s=e[o],t=exports.signedCookie(s,r),s!==t&&(i[o]=t,delete e[o]);return i},exports.signedCookie=function(e,r){return"s:"===e.substr(0,2)?signature.unsign(e.slice(2),r):e},exports.JSONCookies=function(e){for(var r,t,o=Object.keys(e),s=0;s<o.length;s++)r=o[s],t=exports.JSONCookie(e[r]),t&&(e[r]=t);return e},exports.JSONCookie=function(e){if(e&&"j:"===e.substr(0,2))try{return JSON.parse(e.slice(2))}catch(r){}};
},{"cookie-signature":"/home/vadzim/v/work/nerojs/node_modules/cookie-parser/node_modules/cookie-signature/index.js"}],"/home/vadzim/v/work/nerojs/node_modules/cookie-parser/node_modules/cookie-signature/index.js":[function(require,module,exports){
function sha1(r){return crypto.createHash("sha1").update(r).digest("hex")}var crypto=require("crypto");exports.sign=function(r,e){if("string"!=typeof r)throw new TypeError("cookie required");if("string"!=typeof e)throw new TypeError("secret required");return r+"."+crypto.createHmac("sha256",e).update(r).digest("base64").replace(/\=+$/,"")},exports.unsign=function(r,e){if("string"!=typeof r)throw new TypeError("cookie required");if("string"!=typeof e)throw new TypeError("secret required");var t=r.slice(0,r.lastIndexOf(".")),o=exports.sign(t,e);return sha1(o)==sha1(r)?t:!1};
},{"crypto":false}],"/home/vadzim/v/work/nerojs/node_modules/cookie-parser/node_modules/cookie/index.js":[function(require,module,exports){
var serialize=function(e,r,o){o=o||{};var i=o.encode||encode,n=[e+"="+i(r)];if(null!=o.maxAge){var t=o.maxAge-0;if(isNaN(t))throw new Error("maxAge should be a Number");n.push("Max-Age="+t)}return o.domain&&n.push("Domain="+o.domain),o.path&&n.push("Path="+o.path),o.expires&&n.push("Expires="+o.expires.toUTCString()),o.httpOnly&&n.push("HttpOnly"),o.secure&&n.push("Secure"),n.join("; ")},parse=function(e,r){r=r||{};var o={},i=e.split(/; */),n=r.decode||decode;return i.forEach(function(e){var r=e.indexOf("=");if(!(0>r)){var i=e.substr(0,r).trim(),t=e.substr(++r,e.length).trim();if('"'==t[0]&&(t=t.slice(1,-1)),void 0==o[i])try{o[i]=n(t)}catch(a){o[i]=t}}}),o},encode=encodeURIComponent,decode=decodeURIComponent;module.exports.serialize=serialize,module.exports.parse=parse;
},{}],"/home/vadzim/v/work/nerojs/node_modules/csv/lib/index.js":[function(require,module,exports){
var generate,parse,stringify,transform;generate=require("csv-generate"),parse=require("csv-parse"),transform=require("stream-transform"),stringify=require("csv-stringify"),module.exports.generate=generate,module.exports.parse=parse,module.exports.transform=transform,module.exports.stringify=stringify;
},{"csv-generate":"/home/vadzim/v/work/nerojs/node_modules/csv/node_modules/csv-generate/lib/index.js","csv-parse":"/home/vadzim/v/work/nerojs/node_modules/csv/node_modules/csv-parse/lib/index.js","csv-stringify":"/home/vadzim/v/work/nerojs/node_modules/csv/node_modules/csv-stringify/lib/index.js","stream-transform":"/home/vadzim/v/work/nerojs/node_modules/csv/node_modules/stream-transform/lib/index.js"}],"/home/vadzim/v/work/nerojs/node_modules/csv/node_modules/csv-generate/lib/index.js":[function(require,module,exports){
var Generator,stream,util;stream=require("stream"),util=require("util"),Generator=function(t){var n,e,o,i,s,r,u,h,l,a,p,d,f,c;for(this.options=null!=t?t:{},stream.Readable.call(this,this.options),this.options.count=0,null==(o=this.options).duration&&(o.duration=24e4),null==(i=this.options).columns&&(i.columns=8),null==(s=this.options).max_word_length&&(s.max_word_length=16),null==(r=this.options).fixed_size&&(r.fixed_size=!1),null==this.fixed_size_buffer&&(this.fixed_size_buffer=""),null==(u=this.options).start&&(u.start=Date.now()),null==(h=this.options).end&&(h.end=null),null==(l=this.options).seed&&(l.seed=!1),null==(a=this.options).length&&(a.length=-1),null==(p=this.options).delimiter&&(p.delimiter=","),this.count_written=0,this.count_created=0,"number"==typeof this.options.columns&&(this.options.columns=new Array(this.options.columns)),c=this.options.columns,n=d=0,f=c.length;f>d;n=++d)e=c[n],null==e&&(e="ascii"),"string"==typeof e&&(this.options.columns[n]=Generator[e]);return this},util.inherits(Generator,stream.Readable),Generator.prototype.random=function(){return this.options.seed?this.options.seed=this.options.seed*Math.PI*100%100/100:Math.random()},Generator.prototype.end=function(){return this.push(null)},Generator.prototype._read=function(t){var n,e,o,i,s,r,u,h,l,a,p,d,f,c,m;for(e=[],i=this.fixed_size_buffer.length,i&&e.push(this.fixed_size_buffer);;){if(this.count_created===this.options.length||this.options.end&&Date.now()>this.options.end){if(e.length)if(this.options.objectMode)for(u=0,p=e.length;p>u;u++)s=e[u],this.count_written++,this.push(s);else this.count_written++,this.push(e.join(""));return this.push(null)}for(s=[],m=this.options.columns,h=0,d=m.length;d>h;h++)o=m[h],s.push(""+o(this));if(this.options.objectMode)for(r=0,l=0,f=s.length;f>l;l++)n=s[l],r+=n.length;else s=""+(0===this.count_created?"":"\n")+s.join(this.options.delimiter),r=s.length;if(this.count_created++,i+r>t){if(this.options.objectMode)for(e.push(s),a=0,c=e.length;c>a;a++)s=e[a],this.count_written++,this.push(s);else this.options.fixed_size?(this.fixed_size_buffer=s.substr(t-i),e.push(s.substr(0,t-i))):e.push(s),this.count_written++,this.push(e.join(""));break}i+=r,e.push(s)}},Generator.ascii=function(t){var n,e,o,i,s;for(e=[],o=i=0,s=Math.ceil(t.random()*t.options.max_word_length);s>=0?s>i:i>s;o=s>=0?++i:--i)n=Math.floor(32*t.random()),e.push(String.fromCharCode(n+(16>n?65:81)));return e.join("")},Generator.int=function(t){return Math.floor(t.random()*Math.pow(2,52))},Generator.bool=function(t){return Math.floor(2*t.random())},module.exports=function(){var t,n,e,o;return 2===arguments.length?(o=arguments[0],t=arguments[1]):1===arguments.length?"function"==typeof arguments[0]?(o={},t=arguments[0]):o=arguments[0]:0===arguments.length&&(o={}),e=new Generator(o),t&&(n=[],e.on("readable",function(){var t,i;for(i=[];t=e.read();)i.push(n.push(o.objectMode?t:t.toString()));return i}),e.on("error",t),e.on("end",function(){return t(null,o.objectMode?n:n.join(""))})),e},module.exports.Generator=Generator;
},{"stream":false,"util":false}],"/home/vadzim/v/work/nerojs/node_modules/csv/node_modules/csv-parse/lib/index.js":[function(require,module,exports){
var Parser,stream,util;stream=require("stream"),util=require("util"),module.exports=function(){var t,i,s,e,n,o;return 3===arguments.length?(e=arguments[0],n=arguments[1],t=arguments[2]):2===arguments.length?("string"==typeof arguments[0]?e=arguments[0]:n=arguments[0],"function"==typeof arguments[1]?t=arguments[1]:n=arguments[1]):1===arguments.length&&("function"==typeof arguments[0]?t=arguments[0]:n=arguments[0]),null==n&&(n={}),o=new Parser(n),e&&process.nextTick(function(){return o.write(e),o.end()}),t&&(i=!1,s=n.objname?{}:[],o.on("readable",function(){var t,i;for(i=[];t=o.read();)i.push(n.objname?s[t[0]]=t[1]:s.push(t));return i}),o.on("error",function(s){return i=!0,t(s)}),o.on("end",function(){return i?void 0:t(null,s)})),o},Parser=function(t){var i,s,e,n,o,r,h,l,u,a,m,p;return null==t&&(t={}),t.objectMode=!0,stream.Transform.call(this,t),this.options=t,null==(i=this.options).rowDelimiter&&(i.rowDelimiter=null),null==(s=this.options).delimiter&&(s.delimiter=","),null==(o=this.options).quote&&(o.quote='"'),null==(r=this.options).escape&&(r.escape='"'),null==(h=this.options).columns&&(h.columns=null),null==(l=this.options).comment&&(l.comment=""),null==(u=this.options).objname&&(u.objname=!1),null==(a=this.options).trim&&(a.trim=!1),null==(m=this.options).ltrim&&(m.ltrim=!1),null==(p=this.options).rtrim&&(p.rtrim=!1),null==(e=this.options).auto_parse&&(e.auto_parse=!1),null==(n=this.options).skip_empty_lines&&(n.skip_empty_lines=!1),this.lines=0,this.buf="",this.quoting=!1,this.commenting=!1,this.field="",this.lastC="",this.nextChar=null,this.closingQuote=0,this.line=[],this.chunks=[],this.floatRegexp=/^(\-|\+)?([0-9]+(\.[0-9]+)?|Infinity)$/,this},util.inherits(Parser,stream.Transform),module.exports.Parser=Parser,Parser.prototype._transform=function(t,i,s){var e;t instanceof Buffer&&(t=t.toString());try{return this.__write(t,!1),s()}catch(n){return e=n,this.emit("error",e)}},Parser.prototype._flush=function(t){var i;try{return this.__write("",!0),this.quoting?void this.emit("error",new Error("Quoted field not terminated at line "+(this.lines+1))):((this.field||this.lastC===this.options.delimiter||this.lastC===this.options.quote)&&((this.options.trim||this.options.rtrim)&&(this.field=this.field.trimRight()),this.line.push(this.field),this.field=""),this.line.length>0&&this.__push(this.line),t())}catch(s){return i=s,this.emit("error",i)}},Parser.prototype.__push=function(t){var i,s,e,n,o;if(this.options.columns===!0)return void(this.options.columns=t);if("function"==typeof this.options.columns)return void(this.options.columns=this.options.columns(t));if(null!=this.options.columns){for(e={},s=n=0,o=t.length;o>n;s=++n)i=t[s],e[this.options.columns[s]]=i;return this.push(this.options.objname?[e[this.options.objname],e]:e)}return this.push(t)},Parser.prototype.__write=function(t,i){var s,e,n,o,r,h,l,u,a,m,p,f,c,g,d,w;for(p=this.options.trim||this.options.ltrim,g=this.options.trim||this.options.rtrim,t=this.buf+t,m=t.length,n=this.options.rowDelimiter?this.options.rowDelimiter.length:0,r=0,0===this.lines&&65279===t.charCodeAt(0)&&r++;!(!(m>r)||r+n>=m&&t.substr(r,this.options.rowDelimiter.length)!==this.options.rowDelimiter&&!i||r+this.options.escape.length>=m&&t.substr(r,this.options.escape.length)===this.options.escape&&!i);)if(e=this.nextChar?this.nextChar:t.charAt(r),this.lastC=e,this.nextChar=t.charAt(r+1),null==this.options.rowDelimiter&&(""!==this.field||"\n"!==e&&"\r"!==e?("\n"===this.nextChar||"\r"===this.nextChar)&&(c=this.nextChar,f=r+2):(c=e,f=r+1),c&&("\r"===c&&"\n"===t.charAt(f)&&(c+="\n"),this.options.rowDelimiter=c,n=this.options.rowDelimiter.length)),e!==this.options.escape||(o=this.options.escape===this.options.quote,l=this.nextChar===this.options.escape,u=this.nextChar===this.options.quote,o&&!this.field&&!this.quoting||!l&&!u)){if(e===this.options.quote){if(this.quoting){if(s=this.options.rowDelimiter&&t.substr(r+1,this.options.rowDelimiter.length)===this.options.rowDelimiter,!this.options.relax&&this.nextChar&&!s&&this.nextChar!==this.options.delimiter&&this.nextChar!==this.options.comment)throw new Error("Invalid closing quote at line "+(this.lines+1)+"; found "+JSON.stringify(this.nextChar)+" instead of delimiter "+JSON.stringify(this.options.delimiter));this.quoting=!1,this.closingQuote=r,r++;continue}if(!this.field){this.quoting=!0,r++;continue}if(this.field&&!this.options.relax)throw new Error("Invalid opening quote at line "+(this.lines+1))}if(h=e===this.options.delimiter,a=this.options.rowDelimiter&&t.substr(r,this.options.rowDelimiter.length)===this.options.rowDelimiter,this.commenting||this.quoting||e!==this.options.comment?this.commenting&&a&&(d=!0,this.commenting=!1):this.commenting=!0,this.commenting||this.quoting||!h&&!a)this.commenting||this.quoting||" "!==e&&"	"!==e?this.commenting||(this.field+=e):(!p||this.field)&&(this.field+=e);else{if(a&&0===this.line.length&&""===this.field&&(d||this.options.skip_empty_lines)){r+=this.options.rowDelimiter.length,this.nextChar=t.charAt(r);continue}if(g&&(this.field=this.closingQuote?this.field.substr(0,this.closingQuote):this.field.trimRight()),this.line.push(this.options.auto_parse&&this.floatRegexp.test(this.field)?parseFloat(this.field):this.field),this.closingQuote=0,this.field="",a){this.__push(this.line),this.lines++,this.line=[],r+=this.options.rowDelimiter.length,this.nextChar=t.charAt(r);continue}}r++}else r++,e=this.nextChar,this.nextChar=t.charAt(r+1),this.field+=e,r++;for(this.buf="",w=[];m>r;)this.buf+=t.charAt(r),w.push(r++);return w};
},{"stream":false,"util":false}],"/home/vadzim/v/work/nerojs/node_modules/csv/node_modules/csv-stringify/lib/index.js":[function(require,module,exports){
var Stringifier,stream,util;stream=require("stream"),util=require("util"),module.exports=function(){var t,i,e,r,n;return 3===arguments.length?(e=arguments[0],r=arguments[1],t=arguments[2]):2===arguments.length?(Array.isArray(arguments[0])?e=arguments[0]:r=arguments[0],"function"==typeof arguments[1]?t=arguments[1]:r=arguments[1]):1===arguments.length&&("function"==typeof arguments[0]?t=arguments[0]:Array.isArray(arguments[0])?e=arguments[0]:r=arguments[0]),null==r&&(r={}),n=new Stringifier(r),e&&process.nextTick(function(){var t,i,r;for(i=0,r=e.length;r>i;i++)t=e[i],n.write(t);return n.end()}),t&&(i=[],n.on("readable",function(){var t,e;for(e=[];t=n.read();)e.push(i.push(t));return e}),n.on("error",function(i){return t(i)}),n.on("finish",function(){return t(null,i.join(""))})),n},Stringifier=function(t){var i,e,r,n,o,s,u,l,a,h;switch(null==t&&(t={}),stream.Transform.call(this,t),this.options=t,null==(i=this.options).delimiter&&(i.delimiter=","),null==(e=this.options).quote&&(e.quote='"'),null==(r=this.options).quoted&&(r.quoted=!1),null==(n=this.options).quotedString&&(n.quotedString=!1),null==(o=this.options).eof&&(o.eof=!0),null==(s=this.options).escape&&(s.escape='"'),null==(u=this.options).columns&&(u.columns=null),null==(l=this.options).header&&(l.header=!1),null==(a=this.options).lineBreaks&&(a.lineBreaks=null),null==(h=this.options).rowDelimiter&&(h.rowDelimiter="\n"),null==this.countWriten&&(this.countWriten=0),this.options.rowDelimiter){case"auto":this.options.rowDelimiter=null;break;case"unix":this.options.rowDelimiter="\n";break;case"mac":this.options.rowDelimiter="\r";break;case"windows":this.options.rowDelimiter="\r\n";break;case"unicode":this.options.rowDelimiter="\u2028"}return this},util.inherits(Stringifier,stream.Transform),module.exports.Stringifier=Stringifier,Stringifier.prototype.headers=function(){var t,i,e;if(this.options.header&&this.options.columns)return e=this.options.columns,"object"==typeof e&&(e=function(){var r;r=[];for(t in e)i=e[t],r.push(i);return r}()),e=this.options.eof?this.stringify(e)+this.options.rowDelimiter:this.stringify(e),stream.Transform.prototype.write.call(this,e)},Stringifier.prototype.end=function(){return 0===this.countWriten&&this.headers(),stream.Transform.prototype.end.apply(this,arguments)},Stringifier.prototype.write=function(t,i,e){var r,n,o;if(null!=t){if(n="object"!=typeof t,!n){0!==this.countWriten||Array.isArray(t)||null==(o=this.options).columns&&(o.columns=Object.keys(t));try{this.emit("record",t,this.countWriten)}catch(s){return r=s,this.emit("error",r)}this.options.eof?t=this.stringify(t)+this.options.rowDelimiter:(t=this.stringify(t),(this.options.header||this.countWriten)&&(t=this.options.rowDelimiter+t))}return"number"==typeof t&&(t=""+t),0===this.countWriten&&this.headers(),n||this.countWriten++,stream.Transform.prototype.write.call(this,t,i,e)}},Stringifier.prototype._transform=function(t,i,e){return this.push(t),e()},Stringifier.prototype.stringify=function(t){var i,e,r,n,o,s,u,l,a,h,p,f,m,c,g,y,d;if("object"!=typeof t)return t;if(e=this.options.columns,"object"!=typeof e||null===e||Array.isArray(e)||(e=Object.keys(e)),s=this.options.delimiter,p=this.options.quote,u=this.options.escape,Array.isArray(t))e&&t.splice(e.length);else{if(g=[],e)for(a=m=0,y=e.length;y>=0?y>m:m>y;a=y>=0?++m:--m)i=e[a],g[a]="undefined"==typeof t[i]||null===t[i]?"":t[i];else for(i in t)g.push(t[i]);t=g,g=null}if(Array.isArray(t)){for(h="",a=c=0,d=t.length;d>=0?d>c:c>d;a=d>=0?++c:--c)l=t[a],"string"==typeof l||("number"==typeof l?l=""+l:"boolean"==typeof l?l=l?"1":"":l instanceof Date&&(l=""+l.getTime())),l?(o=l.indexOf(s)>=0,n=l.indexOf(p)>=0,r=l.indexOf("\r")>=0||l.indexOf("\n")>=0,n&&(f=new RegExp(p,"g"),l=l.replace(f,u+p)),(n||o||r||this.options.quoted||this.options.quotedString&&"string"==typeof t[a])&&(l=p+l+p),h+=l):(this.options.quotedEmpty||null==this.options.quotedEmpty&&""===t[a]&&this.options.quotedString)&&(h+=p+p),a!==t.length-1&&(h+=s);t=h}return t};
},{"stream":false,"util":false}],"/home/vadzim/v/work/nerojs/node_modules/csv/node_modules/stream-transform/lib/index.js":[function(require,module,exports){
var Transformer,stream,util,__slice=[].slice;stream=require("stream"),util=require("util"),module.exports=function(){var r,n,t,e,i,s,o,u,l,a,f,h,m,c;for(o={},i=m=0,c=arguments.length;c>m;i=++m)if(r=arguments[i],a=typeof r,null===r?a="null":"object"===a&&Array.isArray(r)&&(a="array"),0!==i){if("object"===a)for(s in r)h=r[s],o[s]=h;else if("function"===a)i===arguments.length-1?n=r:f=r;else if("null"!==a)throw new Error("Invalid arguments")}else"function"===a?f=r:null!==a&&(t=r);return l=new Transformer(o,f),e=!1,t&&process.nextTick(function(){var r,n,i;for(n=0,i=t.length;i>n&&(r=t[n],!e);n++)l.write(r);return l.end()}),n&&(u=[],l.on("readable",function(){var r,n;for(n=[];r=l.read();)n.push(u.push(r));return n}),l.on("error",function(r){return e=!0,n(r)}),l.on("end",function(){return e?void 0:n(null,u)})),l},Transformer=function(r,n){var t;return this.options=null!=r?r:{},this.transform=n,this.options.objectMode=!0,null==(t=this.options).parallel&&(t.parallel=100),stream.Transform.call(this,this.options),this.running=0,this.started=0,this.finished=0,this},util.inherits(Transformer,stream.Transform),module.exports.Transformer=Transformer,Transformer.prototype._transform=function(r,n,t){var e;this.started++,this.running++,this.running<this.options.parallel&&(t(),t=null);try{return 2===this.transform.length?this.transform.call(null,r,function(r){return function(){var n,e;return e=arguments[0],n=2<=arguments.length?__slice.call(arguments,1):[],r._done(e,n,t)}}(this)):this._done(null,[this.transform.call(null,r)],t)}catch(i){return e=i,this._done(e)}},Transformer.prototype._flush=function(r){return this._ending=function(){return 0===this.running?r():void 0},this._ending()},Transformer.prototype._done=function(r,n,t){var e,i,s;if(this.running--,r)return this.emit("error",r);for(this.finished++,i=0,s=n.length;s>i;i++)e=n[i],"number"==typeof e&&(e=""+e),null!=e&&this.push(e);return t&&t(),this._ending?this._ending():void 0};
},{"stream":false,"util":false}],"/home/vadzim/v/work/nerojs/node_modules/glob/common.js":[function(require,module,exports){
function ownProp(t,r){return Object.prototype.hasOwnProperty.call(t,r)}function absWin(t){if(absUnix(t))return!0;var r=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,o=r.exec(t),a=o[1]||"",e=a&&":"!==a.charAt(1),n=!!o[2]||e;return n}function absUnix(t){return"/"===t.charAt(0)||""===t}function alphasorti(t,r){return t.toLowerCase().localeCompare(r.toLowerCase())}function alphasort(t,r){return t.localeCompare(r)}function setopts(t,r,o){if(o||(o={}),o.matchBase&&-1===r.indexOf("/")){if(o.noglobstar)throw new Error("base matching requires globstar");r="**/"+r}t.pattern=r,t.strict=o.strict!==!1,t.dot=!!o.dot,t.mark=!!o.mark,t.nodir=!!o.nodir,t.nodir&&(t.mark=!0),t.sync=!!o.sync,t.nounique=!!o.nounique,t.nonull=!!o.nonull,t.nosort=!!o.nosort,t.nocase=!!o.nocase,t.stat=!!o.stat,t.noprocess=!!o.noprocess,t.maxLength=o.maxLength||1/0,t.cache=o.cache||Object.create(null),t.statCache=o.statCache||Object.create(null),t.symlinks=o.symlinks||Object.create(null),t.changedCwd=!1;var a=process.cwd();ownProp(o,"cwd")?(t.cwd=o.cwd,t.changedCwd=path.resolve(o.cwd)!==a):t.cwd=a,t.root=o.root||path.resolve(t.cwd,"/"),t.root=path.resolve(t.root),"win32"===process.platform&&(t.root=t.root.replace(/\\/g,"/")),t.nomount=!!o.nomount,t.minimatch=new Minimatch(r,o),t.options=t.minimatch.options}function finish(t){for(var r=t.nounique,o=r?[]:Object.create(null),a=0,e=t.matches.length;e>a;a++){var n=t.matches[a];if(n){var s=Object.keys(n);r?o.push.apply(o,s):s.forEach(function(t){o[t]=!0})}else if(t.nonull){var c=t.minimatch.globSet[a];r?o.push(c):o[c]=!0}}if(r||(o=Object.keys(o)),t.nosort||(o=o.sort(t.nocase?alphasorti:alphasort)),t.mark){for(var a=0;a<o.length;a++)o[a]=t._mark(o[a]);t.nodir&&(o=o.filter(function(t){return!/\/$/.test(t)}))}t.found=o}function mark(t,r){var o=t.cache[r],a=r;if(o){var e="DIR"===o||Array.isArray(o),n="/"===r.slice(-1);e&&!n?a+="/":!e&&n&&(a=a.slice(0,-1)),a!==r&&(t.statCache[a]=t.statCache[r],t.cache[a]=t.cache[r])}return a}function makeAbs(t,r){var o=r;return"/"===r.charAt(0)?o=path.join(t.root,r):exports.isAbsolute(r)?o=r:t.changedCwd&&(o=path.resolve(t.cwd,r)),o}exports.alphasort=alphasort,exports.alphasorti=alphasorti,exports.isAbsolute="win32"===process.platform?absWin:absUnix,exports.setopts=setopts,exports.ownProp=ownProp,exports.makeAbs=makeAbs,exports.finish=finish,exports.mark=mark;var path=require("path"),minimatch=require("minimatch"),Minimatch=minimatch.Minimatch;
},{"minimatch":"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/minimatch/minimatch.js","path":false}],"/home/vadzim/v/work/nerojs/node_modules/glob/glob.js":[function(require,module,exports){
function glob(t,i,r){if("function"==typeof i&&(r=i,i={}),i||(i={}),i.sync){if(r)throw new TypeError("callback provided to sync glob");return globSync(t,i)}return new Glob(t,i,r)}function Glob(t,i,r){function e(){--o._processing,o._processing<=0&&o._finish()}if("function"==typeof i&&(r=i,i=null),i&&i.sync){if(r)throw new TypeError("callback provided to sync glob");return new GlobSync(t,i)}if(!(this instanceof Glob))return new Glob(t,i,r);setopts(this,t,i);var s=this.minimatch.set.length;this.matches=new Array(s),"function"==typeof r&&(r=once(r),this.on("error",r),this.on("end",function(t){r(null,t)}));var o=this,s=this.minimatch.set.length;if(this._processing=0,this.matches=new Array(s),this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===s)return e();for(var n=0;s>n;n++)this._process(this.minimatch.set[n],n,!1,e)}function readdirCb(t,i,r){return function(e,s){e?t._readdirError(i,e,r):t._readdirEntries(i,s.sort(alphasort),r)}}module.exports=glob;var fs=require("fs"),minimatch=require("minimatch"),Minimatch=minimatch.Minimatch,inherits=require("inherits"),EE=require("events").EventEmitter,path=require("path"),assert=require("assert"),globSync=require("./sync.js"),common=require("./common.js"),alphasort=common.alphasort,isAbsolute=common.isAbsolute,setopts=common.setopts,ownProp=common.ownProp,inflight=require("inflight"),util=require("util"),once=require("once");glob.sync=globSync;var GlobSync=glob.GlobSync=globSync.GlobSync;glob.glob=glob,glob.hasMagic=function(t,i){var r=util._extend({},i);r.noprocess=!0;var e=new Glob(t,r),s=e.minimatch.set;if(s.length>1)return!0;for(var o=0;o<s[0].length;o++)if("string"!=typeof s[0][o])return!0;return!1},glob.Glob=Glob,inherits(Glob,EE),Glob.prototype._finish=function(){assert(this instanceof Glob),this.aborted||(common.finish(this),this.emit("end",this.found))},Glob.prototype._mark=function(t){return common.mark(this,t)},Glob.prototype._makeAbs=function(t){return common.makeAbs(this,t)},Glob.prototype.abort=function(){this.aborted=!0,this.emit("abort")},Glob.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},Glob.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var t=this._emitQueue.slice(0);this._emitQueue.length=0;for(var i=0;i<t.length;i++){var r=t[i];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var e=this._processQueue.slice(0);this._processQueue.length=0;for(var i=0;i<e.length;i++){var s=e[i];this._processing--,this._process(s[0],s[1],s[2],s[3])}}}},Glob.prototype._process=function(t,i,r,e){if(assert(this instanceof Glob),assert("function"==typeof e),!this.aborted){if(this._processing++,this.paused)return void this._processQueue.push([t,i,r,e]);for(var s=0;"string"==typeof t[s];)s++;var o;switch(s){case t.length:return void this._processSimple(t.join("/"),i,e);case 0:o=null;break;default:o=t.slice(0,s).join("/")}var n,a=t.slice(s);null===o?n=".":isAbsolute(o)||isAbsolute(t.join("/"))?(o&&isAbsolute(o)||(o="/"+o),n=o):n=o;var h=this._makeAbs(n),c=a[0]===minimatch.GLOBSTAR;c?this._processGlobStar(o,n,h,a,i,r,e):this._processReaddir(o,n,h,a,i,r,e)}},Glob.prototype._processReaddir=function(t,i,r,e,s,o,n){var a=this;this._readdir(r,o,function(h,c){return a._processReaddir2(t,i,r,e,s,o,c,n)})},Glob.prototype._processReaddir2=function(t,i,r,e,s,o,n,a){if(!n)return a();for(var h=e[0],c=!!this.minimatch.negate,l=h._glob,u=this.dot||"."===l.charAt(0),p=[],f=0;f<n.length;f++){var m=n[f];if("."!==m.charAt(0)||u){var b;b=c&&!t?!m.match(h):m.match(h),b&&p.push(m)}}var d=p.length;if(0===d)return a();if(1===e.length&&!this.mark&&!this.stat){this.matches[s]||(this.matches[s]=Object.create(null));for(var f=0;d>f;f++){var m=p[f];t&&(m="/"!==t?t+"/"+m:t+m),"/"!==m.charAt(0)||this.nomount||(m=path.join(this.root,m)),this._emitMatch(s,m)}return a()}e.shift();for(var f=0;d>f;f++){var m=p[f];t&&(m="/"!==t?t+"/"+m:t+m),this._process([m].concat(e),s,o,a)}a()},Glob.prototype._emitMatch=function(t,i){if(!this.aborted&&!this.matches[t][i]){if(this.paused)return void this._emitQueue.push([t,i]);if(this.nodir){var r=this.cache[this._makeAbs(i)];if("DIR"===r||Array.isArray(r))return}if(this.matches[t][i]=!0,!this.stat&&!this.mark)return this.emit("match",i);var e=this;this._stat(this._makeAbs(i),function(t,r,s){e.emit("stat",i,s),e.emit("match",i)})}},Glob.prototype._readdirInGlobStar=function(t,i){function r(r,e){if(r)return i();var o=e.isSymbolicLink();s.symlinks[t]=o,o||e.isDirectory()?s._readdir(t,!1,i):(s.cache[t]="FILE",i())}if(!this.aborted){var e="lstat\x00"+t,s=this,o=inflight(e,r);o&&fs.lstat(t,o)}},Glob.prototype._readdir=function(t,i,r){if(!this.aborted&&(r=inflight("readdir\x00"+t+"\x00"+i,r))){if(i&&!ownProp(this.symlinks,t))return this._readdirInGlobStar(t,r);if(ownProp(this.cache,t)){var e=this.cache[t];if(!e||"FILE"===e)return r();if(Array.isArray(e))return r(null,e)}fs.readdir(t,readdirCb(this,t,r))}},Glob.prototype._readdirEntries=function(t,i,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var e=0;e<i.length;e++){var s=i[e];s="/"===t?t+s:t+"/"+s,this.cache[s]=!0}return this.cache[t]=i,r(null,i)}},Glob.prototype._readdirError=function(t,i,r){if(!this.aborted){switch(i.code){case"ENOTDIR":this.cache[t]="FILE";break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[t]=!1;break;default:if(this.cache[t]=!1,this.strict)return this.emit("error",i);this.silent||console.error("glob error",i)}return r()}},Glob.prototype._processGlobStar=function(t,i,r,e,s,o,n){var a=this;this._readdir(r,o,function(h,c){a._processGlobStar2(t,i,r,e,s,o,c,n)})},Glob.prototype._processGlobStar2=function(t,i,r,e,s,o,n,a){if(!n)return a();var h=e.slice(1),c=t?[t]:[],l=c.concat(h);this._process(l,s,!1,a);var u=this.symlinks[r],p=n.length;if(u&&o)return a();for(var f=0;p>f;f++){var m=n[f];if("."!==m.charAt(0)||this.dot){var b=c.concat(n[f],h);this._process(b,s,!0,a);var d=c.concat(n[f],e);this._process(d,s,!0,a)}}a()},Glob.prototype._processSimple=function(t,i,r){var e=this;this._stat(t,function(s,o){e._processSimple2(t,i,s,o,r)})},Glob.prototype._processSimple2=function(t,i,r,e,s){return this.matches[i]||(this.matches[i]=Object.create(null)),e?(t&&isAbsolute(t)&&!this.nomount&&(t="/"===t.charAt(0)?path.join(this.root,t):path.resolve(this.root,t)),"win32"===process.platform&&(t=t.replace(/\\/g,"/")),this._emitMatch(i,t),void s()):s()},Glob.prototype._stat=function(t,i){function r(r,s){n._stat2(t,e,r,s,i)}var e=t;if("/"===t.charAt(0)?e=path.join(this.root,t):this.changedCwd&&(e=path.resolve(this.cwd,t)),t.length>this.maxLength)return i();if(!this.stat&&ownProp(this.cache,t)){var s=this.cache[t];return Array.isArray(s)&&(s="DIR"),"/"===e.slice(-1)&&"DIR"!==s?i():i(null,s)}var o=this.statCache[e];if(void 0!==o)return o===!1?i(null,o):i(null,o.isDirectory()?"DIR":"FILE",o);var n=this,a=inflight("stat\x00"+e,r);a&&fs.stat(e,a)},Glob.prototype._stat2=function(t,i,r,e,s){if(r)return this.statCache[i]=!1,s();if(this.statCache[i]=e,"/"===i.slice(-1)&&!e.isDirectory())return s(null,!1,e);var o=e.isDirectory()?"DIR":"FILE";return this.cache[t]=this.cache[t]||o,s(null,o,e)};
},{"./common.js":"/home/vadzim/v/work/nerojs/node_modules/glob/common.js","./sync.js":"/home/vadzim/v/work/nerojs/node_modules/glob/sync.js","assert":false,"events":false,"fs":false,"inflight":"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/inflight/inflight.js","inherits":"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/inherits/inherits_browser.js","minimatch":"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/minimatch/minimatch.js","once":"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/once/once.js","path":false,"util":false}],"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/inflight/inflight.js":[function(require,module,exports){
function inflight(e,r){return reqs[e]?(reqs[e].push(r),null):(reqs[e]=[r],makeres(e))}function makeres(e){return once(function r(){for(var n=reqs[e],l=n.length,t=slice(arguments),u=0;l>u;u++)n[u].apply(null,t);n.length>l?(n.splice(0,l),process.nextTick(function(){r.apply(null,t)})):delete reqs[e]})}function slice(e){for(var r=e.length,n=[],l=0;r>l;l++)n[l]=e[l];return n}var wrappy=require("wrappy"),reqs=Object.create(null),once=require("once");module.exports=wrappy(inflight);
},{"once":"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/once/once.js","wrappy":"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/inflight/node_modules/wrappy/wrappy.js"}],"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/inflight/node_modules/wrappy/wrappy.js":[function(require,module,exports){
function wrappy(n,r){function e(){for(var r=new Array(arguments.length),e=0;e<r.length;e++)r[e]=arguments[e];var t=n.apply(this,r),o=r[r.length-1];return"function"==typeof t&&t!==o&&Object.keys(o).forEach(function(n){t[n]=o[n]}),t}if(n&&r)return wrappy(n)(r);if("function"!=typeof n)throw new TypeError("need wrapper function");return Object.keys(n).forEach(function(r){e[r]=n[r]}),e}module.exports=wrappy;
},{}],"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/inherits/inherits_browser.js":[function(require,module,exports){
module.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/minimatch/minimatch.js":[function(require,module,exports){
function charSet(t){return t.split("").reduce(function(t,e){return t[e]=!0,t},{})}function filter(t,e){return e=e||{},function(i){return minimatch(i,t,e)}}function ext(t,e){t=t||{},e=e||{};var i={};return Object.keys(e).forEach(function(t){i[t]=e[t]}),Object.keys(t).forEach(function(e){i[e]=t[e]}),i}function minimatch(t,e,i){if("string"!=typeof e)throw new TypeError("glob pattern string required");return i||(i={}),i.nocomment||"#"!==e.charAt(0)?""===e.trim()?""===t:new Minimatch(e,i).match(t):!1}function Minimatch(t,e){if(!(this instanceof Minimatch))return new Minimatch(t,e);if("string"!=typeof t)throw new TypeError("glob pattern string required");e||(e={}),t=t.trim(),isWindows&&(t=t.split("\\").join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function make(){if(!this._made){var t=this.pattern,e=this.options;if(!e.nocomment&&"#"===t.charAt(0))return void(this.comment=!0);if(!t)return void(this.empty=!0);this.parseNegate();var i=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error),this.debug(this.pattern,i),i=this.globParts=i.map(function(t){return t.split(slashSplit)}),this.debug(this.pattern,i),i=i.map(function(t){return t.map(this.parse,this)},this),this.debug(this.pattern,i),i=i.filter(function(t){return-1===t.indexOf(!1)}),this.debug(this.pattern,i),this.set=i}}function parseNegate(){var t=this.pattern,e=!1,i=this.options,n=0;if(!i.nonegate){for(var r=0,a=t.length;a>r&&"!"===t.charAt(r);r++)e=!e,n++;n&&(this.pattern=t.substr(n)),this.negate=e}}function braceExpand(t,e){if(e||(e=this instanceof Minimatch?this.options:{}),t="undefined"==typeof t?this.pattern:t,"undefined"==typeof t)throw new Error("undefined pattern");return e.nobrace||!t.match(/\{.*\}/)?[t]:expand(t)}function parse(t,e){function i(){if(a){switch(a){case"*":c+=star,h=!0;break;case"?":c+=qmark,h=!0;break;default:c+="\\"+a}l.debug("clearStateChar %j %j",a,c),a=!1}}var n=this.options;if(!n.noglobstar&&"**"===t)return GLOBSTAR;if(""===t)return"";for(var r,a,s,c="",h=!!n.nocase,o=!1,u=[],p=!1,f=-1,m=-1,g="."===t.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",l=this,d=0,b=t.length;b>d&&(s=t.charAt(d));d++)if(this.debug("%s	%s %s %j",t,d,c,s),o&&reSpecials[s])c+="\\"+s,o=!1;else switch(s){case"/":return!1;case"\\":i(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,d,c,s),p){this.debug("  in class"),"!"===s&&d===m+1&&(s="^"),c+=s;continue}l.debug("call clearStateChar %j",a),i(),a=s,n.noext&&i();continue;case"(":if(p){c+="(";continue}if(!a){c+="\\(";continue}r=a,u.push({type:r,start:d-1,reStart:c.length}),c+="!"===a?"(?:(?!":"(?:",this.debug("plType %j %j",a,c),a=!1;continue;case")":if(p||!u.length){c+="\\)";continue}switch(i(),h=!0,c+=")",r=u.pop().type){case"!":c+="[^/]*?)";break;case"?":case"+":case"*":c+=r;case"@":}continue;case"|":if(p||!u.length||o){c+="\\|",o=!1;continue}i(),c+="|";continue;case"[":if(i(),p){c+="\\"+s;continue}p=!0,m=d,f=c.length,c+=s;continue;case"]":if(d===m+1||!p){c+="\\"+s,o=!1;continue}h=!0,p=!1,c+=s;continue;default:i(),o?o=!1:!reSpecials[s]||"^"===s&&p||(c+="\\"),c+=s}if(p){var v=t.substr(m+1),w=this.parse(v,SUBPARSE);c=c.substr(0,f)+"\\["+w[0],h=h||w[1]}for(var y;y=u.pop();){var S=c.slice(y.reStart+3);S=S.replace(/((?:\\{2})*)(\\?)\|/g,function(t,e,i){return i||(i="\\"),e+e+i+"|"}),this.debug("tail=%j\n   %s",S,S);var x="*"===y.type?star:"?"===y.type?qmark:"\\"+y.type;h=!0,c=c.slice(0,y.reStart)+x+"\\("+S}i(),o&&(c+="\\\\");var M=!1;switch(c.charAt(0)){case".":case"[":case"(":M=!0}if(""!==c&&h&&(c="(?=.)"+c),M&&(c=g+c),e===SUBPARSE)return[c,h];if(!h)return globUnescape(t);var k=n.nocase?"i":"",E=new RegExp("^"+c+"$",k);return E._glob=t,E._src=c,E}function makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1;var e=this.options,i=e.noglobstar?star:e.dot?twoStarDot:twoStarNoDot,n=e.nocase?"i":"",r=t.map(function(t){return t.map(function(t){return t===GLOBSTAR?i:"string"==typeof t?regExpEscape(t):t._src}).join("\\/")}).join("|");r="^(?:"+r+")$",this.negate&&(r="^(?!"+r+").*$");try{return this.regexp=new RegExp(r,n)}catch(a){return this.regexp=!1}}function match(t,e){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return""===t;if("/"===t&&e)return!0;var i=this.options;isWindows&&(t=t.split("\\").join("/")),t=t.split(slashSplit),this.debug(this.pattern,"split",t);var n=this.set;this.debug(this.pattern,"set",n);for(var r,a=t.length-1;a>=0&&!(r=t[a]);a--);for(var a=0,s=n.length;s>a;a++){var c=n[a],h=t;i.matchBase&&1===c.length&&(h=[r]);var o=this.matchOne(h,c,e);if(o)return i.flipNegate?!0:!this.negate}return i.flipNegate?!1:this.negate}function globUnescape(t){return t.replace(/\\(.)/g,"$1")}function regExpEscape(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}module.exports=minimatch,minimatch.Minimatch=Minimatch;var isWindows=!1;"undefined"!=typeof process&&"win32"===process.platform&&(isWindows=!0);var GLOBSTAR=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={},expand=require("brace-expansion"),qmark="[^/]",star=qmark+"*?",twoStarDot="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",twoStarNoDot="(?:(?!(?:\\/|^)\\.).)*?",reSpecials=charSet("().*{}+?[]^$\\!"),slashSplit=/\/+/;minimatch.filter=filter,minimatch.defaults=function(t){if(!t||!Object.keys(t).length)return minimatch;var e=minimatch,i=function(i,n,r){return e.minimatch(i,n,ext(t,r))};return i.Minimatch=function(i,n){return new e.Minimatch(i,ext(t,n))},i},Minimatch.defaults=function(t){return t&&Object.keys(t).length?minimatch.defaults(t).Minimatch:Minimatch},Minimatch.prototype.debug=function(){},Minimatch.prototype.make=make,Minimatch.prototype.parseNegate=parseNegate,minimatch.braceExpand=function(t,e){return braceExpand(t,e)},Minimatch.prototype.braceExpand=braceExpand,Minimatch.prototype.parse=parse;var SUBPARSE={};minimatch.makeRe=function(t,e){return new Minimatch(t,e||{}).makeRe()},Minimatch.prototype.makeRe=makeRe,minimatch.match=function(t,e,i){i=i||{};var n=new Minimatch(e,i);return t=t.filter(function(t){return n.match(t)}),n.options.nonull&&!t.length&&t.push(e),t},Minimatch.prototype.match=match,Minimatch.prototype.matchOne=function(t,e,i){var n=this.options;this.debug("matchOne",{"this":this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var r=0,a=0,s=t.length,c=e.length;s>r&&c>a;r++,a++){this.debug("matchOne loop");var h=e[a],o=t[r];if(this.debug(e,h,o),h===!1)return!1;if(h===GLOBSTAR){this.debug("GLOBSTAR",[e,h,o]);var u=r,p=a+1;if(p===c){for(this.debug("** at the end");s>r;r++)if("."===t[r]||".."===t[r]||!n.dot&&"."===t[r].charAt(0))return!1;return!0}t:for(;s>u;){var f=t[u];if(this.debug("\nglobstar while",t,u,e,p,f),this.matchOne(t.slice(u),e.slice(p),i))return this.debug("globstar found match!",u,s,f),!0;if("."===f||".."===f||!n.dot&&"."===f.charAt(0)){this.debug("dot detected!",t,u,e,p);break t}this.debug("globstar swallow a segment, and continue"),u++}return i&&(this.debug("\n>>> no match, partial?",t,u,e,p),u===s)?!0:!1}var m;if("string"==typeof h?(m=n.nocase?o.toLowerCase()===h.toLowerCase():o===h,this.debug("string match",h,o,m)):(m=o.match(h),this.debug("pattern match",h,o,m)),!m)return!1}if(r===s&&a===c)return!0;if(r===s)return i;if(a===c){var g=r===s-1&&""===t[r];return g}throw new Error("wtf?")};
},{"brace-expansion":"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/minimatch/node_modules/brace-expansion/index.js"}],"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/minimatch/node_modules/brace-expansion/index.js":[function(require,module,exports){
function numeric(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function escapeBraces(e){return e.split("\\\\").join(escSlash).split("\\{").join(escOpen).split("\\}").join(escClose).split("\\,").join(escComma).split("\\.").join(escPeriod)}function unescapeBraces(e){return e.split(escSlash).join("\\").split(escOpen).join("{").split(escClose).join("}").split(escComma).join(",").split(escPeriod).join(".")}function parseCommaParts(e){if(!e)return[""];var n=[],t=balanced("{","}",e);if(!t)return e.split(",");var r=t.pre,a=t.body,s=t.post,o=r.split(",");o[o.length-1]+="{"+a+"}";var i=parseCommaParts(s);return s.length&&(o[o.length-1]+=i.shift(),o.push.apply(o,i)),n.push.apply(n,o),n}function expandTop(e){return e?expand(escapeBraces(e),!0).map(unescapeBraces):[]}function identity(e){return e}function embrace(e){return"{"+e+"}"}function isPadded(e){return/^-?0\d/.test(e)}function lte(e,n){return n>=e}function gte(e,n){return e>=n}function expand(e,n){var t=[],r=balanced("{","}",e);if(!r||/\$$/.test(r.pre))return[e];var a=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),o=a||s,i=/^(.*,)+(.+)?$/.test(r.body);if(!o&&!i)return r.post.match(/,.*}/)?(e=r.pre+"{"+r.body+escClose+r.post,expand(e)):[e];var p;if(o)p=r.body.split(/\.\./);else if(p=parseCommaParts(r.body),1===p.length&&(p=expand(p[0],!1).map(embrace),1===p.length)){var c=r.post.length?expand(r.post,!1):[""];return c.map(function(e){return r.pre+p[0]+e})}var l,u=r.pre,c=r.post.length?expand(r.post,!1):[""];if(o){var d=numeric(p[0]),m=numeric(p[1]),h=Math.max(p[0].length,p[1].length),f=3==p.length?Math.abs(numeric(p[2])):1,x=lte,v=d>m;v&&(f*=-1,x=gte);var g=p.some(isPadded);l=[];for(var C=d;x(C,m);C+=f){var b;if(s)b=String.fromCharCode(C),"\\"===b&&(b="");else if(b=String(C),g){var j=h-b.length;if(j>0){var y=new Array(j+1).join("0");b=0>C?"-"+y+b.slice(1):y+b}}l.push(b)}}else l=concatMap(p,function(e){return expand(e,!1)});for(var M=0;M<l.length;M++)for(var P=0;P<c.length;P++){var S=u+l[M]+c[P];(!n||o||S)&&t.push(S)}return t}var concatMap=require("concat-map"),balanced=require("balanced-match");module.exports=expandTop;var escSlash="\x00SLASH"+Math.random()+"\x00",escOpen="\x00OPEN"+Math.random()+"\x00",escClose="\x00CLOSE"+Math.random()+"\x00",escComma="\x00COMMA"+Math.random()+"\x00",escPeriod="\x00PERIOD"+Math.random()+"\x00";
},{"balanced-match":"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/minimatch/node_modules/brace-expansion/node_modules/balanced-match/index.js","concat-map":"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/minimatch/node_modules/brace-expansion/node_modules/concat-map/index.js"}],"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/minimatch/node_modules/brace-expansion/node_modules/balanced-match/index.js":[function(require,module,exports){
function balanced(t,e,r){for(var s=0,n={},a=!1,l=0;l<r.length;l++)if(t==r.substr(l,t.length))"start"in n||(n.start=l),s++;else if(e==r.substr(l,e.length)&&"start"in n&&(a=!0,s--,!s))return n.end=l,n.pre=r.substr(0,n.start),n.body=n.end-n.start>1?r.substring(n.start+t.length,n.end):"",n.post=r.slice(n.end+e.length),n;if(s&&a){var d=n.start+t.length;return n=balanced(t,e,r.substr(d)),n&&(n.start+=d,n.end+=d,n.pre=r.slice(0,d)+n.pre),n}}module.exports=balanced;
},{}],"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/minimatch/node_modules/brace-expansion/node_modules/concat-map/index.js":[function(require,module,exports){
module.exports=function(r,t){for(var a=[],o=0;o<r.length;o++){var e=t(r[o],o);isArray(e)?a.push.apply(a,e):a.push(e)}return a};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};
},{}],"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/once/node_modules/wrappy/wrappy.js":[function(require,module,exports){
module.exports=require("/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/inflight/node_modules/wrappy/wrappy.js")
},{"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/inflight/node_modules/wrappy/wrappy.js":"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/inflight/node_modules/wrappy/wrappy.js"}],"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/once/once.js":[function(require,module,exports){
function once(e){var n=function(){return n.called?n.value:(n.called=!0,n.value=e.apply(this,arguments))};return n.called=!1,n}var wrappy=require("wrappy");module.exports=wrappy(once),once.proto=once(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:!0})});
},{"wrappy":"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/once/node_modules/wrappy/wrappy.js"}],"/home/vadzim/v/work/nerojs/node_modules/glob/sync.js":[function(require,module,exports){
function globSync(t,r){if("function"==typeof r||3===arguments.length)throw new TypeError("callback provided to sync glob");return new GlobSync(t,r).found}function GlobSync(t,r){if(!t)throw new Error("must provide pattern");if("function"==typeof r||3===arguments.length)throw new TypeError("callback provided to sync glob");if(!(this instanceof GlobSync))return new GlobSync(t,r);if(setopts(this,t,r),this.noprocess)return this;var s=this.minimatch.set.length;this.matches=new Array(s);for(var i=0;s>i;i++)this._process(this.minimatch.set[i],i,!1);this._finish()}module.exports=globSync,globSync.GlobSync=GlobSync;var fs=require("fs"),minimatch=require("minimatch"),Minimatch=minimatch.Minimatch,Glob=require("./glob.js").Glob,util=require("util"),path=require("path"),assert=require("assert"),common=require("./common.js"),alphasort=common.alphasort,isAbsolute=common.isAbsolute,setopts=common.setopts,ownProp=common.ownProp;GlobSync.prototype._finish=function(){assert(this instanceof GlobSync),common.finish(this)},GlobSync.prototype._process=function(t,r,s){assert(this instanceof GlobSync);for(var i=0;"string"==typeof t[i];)i++;var o;switch(i){case t.length:return void this._processSimple(t.join("/"),r);case 0:o=null;break;default:o=t.slice(0,i).join("/")}var e,a=t.slice(i);null===o?e=".":isAbsolute(o)||isAbsolute(t.join("/"))?(o&&isAbsolute(o)||(o="/"+o),e=o):e=o;var c=this._makeAbs(e),n=a[0]===minimatch.GLOBSTAR;n?this._processGlobStar(o,e,c,a,r,s):this._processReaddir(o,e,c,a,r,s)},GlobSync.prototype._processReaddir=function(t,r,s,i,o,e){var a=this._readdir(s,e);if(a){for(var c=i[0],n=!!this.minimatch.negate,h=c._glob,l=this.dot||"."===h.charAt(0),p=[],m=0;m<a.length;m++){var u=a[m];if("."!==u.charAt(0)||l){var f;f=n&&!t?!u.match(c):u.match(c),f&&p.push(u)}}var y=p.length;if(0!==y)if(1!==i.length||this.mark||this.stat){i.shift();for(var m=0;y>m;m++){var b,u=p[m];b=t?[t,u]:[u],this._process(b.concat(i),o,e)}}else{this.matches[o]||(this.matches[o]=Object.create(null));for(var m=0;y>m;m++){var u=p[m];t&&(u="/"!==t.slice(-1)?t+"/"+u:t+u),"/"!==u.charAt(0)||this.nomount||(u=path.join(this.root,u)),this.matches[o][u]=!0}}}},GlobSync.prototype._emitMatch=function(t,r){if(!this.matches[t][r]){if(this.nodir){var s=this.cache[this._makeAbs(r)];if("DIR"===s||Array.isArray(s))return}this.matches[t][r]=!0,(this.stat||this.mark)&&this._stat(this._makeAbs(r))}},GlobSync.prototype._readdirInGlobStar=function(t){var r,s;try{s=fs.lstatSync(t)}catch(i){return null}var o=s.isSymbolicLink();return this.symlinks[t]=o,o||s.isDirectory()?r=this._readdir(t,!1):this.cache[t]="FILE",r},GlobSync.prototype._readdir=function(t,r){if(r&&!ownProp(this.symlinks,t))return this._readdirInGlobStar(t);if(ownProp(this.cache,t)){var s=this.cache[t];if(!s||"FILE"===s)return null;if(Array.isArray(s))return s}try{return this._readdirEntries(t,fs.readdirSync(t).sort(alphasort))}catch(i){return this._readdirError(t,i),null}},GlobSync.prototype._readdirEntries=function(t,r){if(!this.mark&&!this.stat)for(var s=0;s<r.length;s++){var i=r[s];i="/"===t?t+i:t+"/"+i,this.cache[i]=!0}return this.cache[t]=r,r},GlobSync.prototype._readdirError=function(t,r){switch(r.code){case"ENOTDIR":this.cache[t]="FILE";break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[t]=!1;break;default:if(this.cache[t]=!1,this.strict)throw r;this.silent||console.error("glob error",r)}},GlobSync.prototype._processGlobStar=function(t,r,s,i,o,e){var a=this._readdir(s,e);if(a){var c=i.slice(1),n=t?[t]:[],h=n.concat(c);this._process(h,o,!1);var l=a.length,p=this.symlinks[s];if(!p||!e)for(var m=0;l>m;m++){var u=a[m];if("."!==u.charAt(0)||this.dot){var f=n.concat(a[m],c);this._process(f,o,!0);var y=n.concat(a[m],i);this._process(y,o,!0)}}}},GlobSync.prototype._processSimple=function(t,r){var s=this._stat(t);this.matches[r]||(this.matches[r]=Object.create(null)),s&&(t&&isAbsolute(t)&&!this.nomount&&(t="/"===t.charAt(0)?path.join(this.root,t):path.resolve(this.root,t)),"win32"===process.platform&&(t=t.replace(/\\/g,"/")),this.matches[r][t]=!0)},GlobSync.prototype._stat=function(t){var r=t;if("/"===t.charAt(0)?r=path.join(this.root,t):this.changedCwd&&(r=path.resolve(this.cwd,t)),t.length>this.maxLength)return!1;if(!this.stat&&ownProp(this.cache,t)){var s=this.cache[t];return Array.isArray(s)&&(s="DIR"),"/"===r.slice(-1)&&"DIR"!==s?!1:s}var i=this.statCache[r];if(!i)try{i=fs.statSync(r)}catch(o){return!1}if(this.statCache[r]=i,"/"===r.slice(-1)&&!i.isDirectory())return!1;var s=i.isDirectory()?"DIR":"FILE";return this.cache[t]=this.cache[t]||s,s},GlobSync.prototype._mark=function(t){return common.mark(this,t)},GlobSync.prototype._makeAbs=function(t){return common.makeAbs(this,t)};
},{"./common.js":"/home/vadzim/v/work/nerojs/node_modules/glob/common.js","./glob.js":"/home/vadzim/v/work/nerojs/node_modules/glob/glob.js","assert":false,"fs":false,"minimatch":"/home/vadzim/v/work/nerojs/node_modules/glob/node_modules/minimatch/minimatch.js","path":false,"util":false}],"/home/vadzim/v/work/nerojs/node_modules/http-status/lib/index.js":[function(require,module,exports){
module.exports={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",429:"Too Many Requests",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version not Supported",CONTINUE:100,SWITCHING_PROTOCOLS:101,OK:200,CREATED:201,ACCEPTED:202,NON_AUTHORITATIVE_INFORMATION:203,NO_CONTENT:204,RESET_CONTENT:205,PARTIAL_CONTENT:206,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,USE_PROXY:305,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,REQUEST_ENTITY_TOO_LARGE:413,REQUEST_URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,REQUESTED_RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,UNPROCESSABLE_ENTITY:422,TOO_MANY_REQUESTS:429,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505};
},{}],"/home/vadzim/v/work/nerojs/node_modules/immutable/dist/immutable.js":[function(require,module,exports){
function universalModule(){function t(t,e,r,n){var i;if(n){var u=n.prototype;i=Re.create(u)}else i=t.prototype;return Re.keys(e).forEach(function(t){i[t]=e[t]}),Re.keys(r).forEach(function(e){t[e]=r[e]}),i.constructor=t,t.prototype=i,t}function e(t,e,r,n){return Re.getPrototypeOf(e)[r].apply(t,n)}function r(t,r,n){e(t,r,"constructor",n)}function n(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t?e!==e:t&&"function"==typeof t.equals?t.equals(e):!1}function i(t){return t.value=!1,t}function u(t){t&&(t.value=!0)}function a(){}function s(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),i=0;r>i;i++)n[i]=t[i+e];return n}function o(t,e){if(!t)throw new Error(e)}function h(t){if(!t)return 0;if(t===!0)return 1;var e=typeof t;if("number"===e){if((0|t)===t)return t&Ne;t=""+t,e="string"}return"string"===e?t.length>Ge?c(t):f(t):t.hashCode?h("function"==typeof t.hashCode?t.hashCode():t.hashCode):_(t)}function c(t){var e=Xe[t];return null==e&&(e=f(t),Qe===He&&(Qe=0,Xe={}),Qe++,Xe[t]=e),e}function f(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)&Ne;return e}function _(t){var e=Le&&Le.get(t);if(e)return e;if(e=t[Fe])return e;if(!Ve){if(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Fe])return e;if(e=l(t))return e}if(Object.isExtensible&&!Object.isExtensible(t))throw new Error("Non-extensible objects are not allowed as keys.");if(e=++Te&Ne,Le)Le.set(t,e);else if(Ve)Object.defineProperty(t,Fe,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Fe]=e;else{if(!t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Fe]=e}return e}function l(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function v(t,e,r,n){var i=0===t?e:1===t?r:[e,r];return n?n.value=i:n={value:i,done:!1},n}function g(){return{value:void 0,done:!0}}function p(t){return!!d(t)}function m(t){return t&&"function"==typeof t.next}function y(t){var e=d(t);return e&&e.call(t)}function d(t){var e=t&&(er&&t[er]||t[tr]);return"function"==typeof e?e:void 0}function w(t){return null==t.length&&t.cacheResult(),o(t.length<1/0,"Cannot reverse infinite range."),t.length}function S(t,e,r){return(0===t||null!=r&&-r>=t)&&(null==e||null!=r&&e>=r)}function I(t,e){return b(t,e,0)}function q(t,e){return b(t,e,e)}function b(t,e,r){return null==t?r:0>t?Math.max(0,e+t):null==e?t:Math.min(e,t)}function k(t){return t}function x(t,e){return[e,t]}function M(){return!0}function D(t){return function(){return!t.apply(this,arguments)}}function O(t){return"string"==typeof t?JSON.stringify(t):t}function C(t,e){return t>e?1:e>t?-1:0}function A(t,e){return 0>e?(null==t.length&&t.cacheResult(),t.length+e):e}function E(t){o(1/0!==t,"Cannot perform this action with an infinite sequence.")}function R(t,e,r,n){var i=t._cache;if(i){for(var u=i.length-1,a=0;u>=a;a++){var s=i[r?u-a:a];if(e(s[1],n?s[0]:a,t)===!1)return a+1}return a}return t.__iterateUncached(e,r)}function j(t,e,r,n){var i=t._cache;if(i){var u=i.length-1,a=0;return new nr(function(){var t=i[r?u-a:a];return a++>u?g():v(e,n?t[0]:a-1,t[1])})}return t.__iteratorUncached(e,r)}function U(t){var e=t.__makeSequence();return e.length=t.length,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.contains(e)},e.contains=function(e){return t.has(e)},e.__iterateUncached=function(e,r){var n=this;return t.__iterate(function(t,r){return e(r,t,n)!==!1},r)},e.__iteratorUncached=function(e,r){if(e===$e){var n=t.__iterator(e,r);return new nr(function(){var t=n.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===Ze?Ye:Ze,r)},e}function W(t,e,r){var n=t.__makeSequence();return n.length=t.length,n.has=function(e){return t.has(e)},n.get=function(n,i){var u=t.get(n,Je);return u===Je?i:e.call(r,u,n,t)},n.__iterateUncached=function(n,i){var u=this;return t.__iterate(function(t,i,a){return n(e.call(r,t,i,a),i,u)!==!1},i)},n.__iteratorUncached=function(n,i){var u=t.__iterator($e,i);return new nr(function(){var i=u.next();if(i.done)return i;var a=i.value,s=a[0];return v(n,s,e.call(r,a[1],s,t),i)})},n}function P(t,e){var r=t.__makeSequence();return r.length=t.length,r.reverse=function(){return t},r.flip=function(){var e=t.flip.apply(this);return e.reverse=function(){return t.flip()},e},r.get=function(r,n){return t.get(e?r:-1-r,n)},r.has=function(r){return t.has(e?r:-1-r)},r.contains=function(e){return t.contains(e)},r.cacheResult=function(){return t.cacheResult(),this.length=t.length,this},r.__iterate=function(e,r){var n=this;return t.__iterate(function(t,r){return e(t,r,n)},!r)},r.__iterator=function(e,r){return t.__iterator(e,!r)},r}function K(t,e,r,n){var i=t.__makeSequence();return n&&(i.has=function(n){var i=t.get(n,Je);return i!==Je&&!!e.call(r,i,n,t)},i.get=function(n,i){var u=t.get(n,Je);return u!==Je&&e.call(r,u,n,t)?u:i}),i.__iterateUncached=function(i,u){var a=this,s=0;return t.__iterate(function(t,u,o){return e.call(r,t,u,o)?(s++,i(t,n?u:s-1,a)):void 0},u),s},i.__iteratorUncached=function(i,u){var a=t.__iterator($e,u),s=0;return new nr(function(){for(;;){var u=a.next();if(u.done)return u;var o=u.value,h=o[0],c=o[1];if(e.call(r,c,h,t))return v(i,n?h:s++,c,u)}})},i}function J(t,e,r,n){var i={},u=[];return t.__iterate(function(a,s){var o=e.call(r,a,s,t),c=h(o),f=n?[s,a]:a;i.hasOwnProperty(c)?u[i[c]][1].push(f):(i[c]=u.length,u.push([o,[f]]))}),ur(u).fromEntrySeq().map(n?function(t){return ur(t).fromEntrySeq()}:function(t){return ur(t)})}function z(t,e){if(e>t.length)return t;0>e&&(e=0);var r=t.__makeSequence();return r.length=t.length&&Math.min(t.length,e),r.__iterateUncached=function(r,n){var i=this;if(0===e)return 0;if(n)return this.cacheResult().__iterate(r,n);var u=0;return t.__iterate(function(t,n){return++u&&r(t,n,i)!==!1&&e>u}),u},r.__iteratorUncached=function(r,n){if(n)return this.cacheResult().__iterator(r,n);var i=e&&t.__iterator(r,n),u=0;return new nr(function(){return u++>e?g():i.next()})},r}function B(t,e,r){var n=t.__makeSequence();return n.__iterateUncached=function(n,i){var u=this;if(i)return this.cacheResult().__iterate(n,i);var a=0;return t.__iterate(function(t,i,s){return e.call(r,t,i,s)&&++a&&n(t,i,u)}),a},n.__iteratorUncached=function(n,i){var u=this;if(i)return this.cacheResult().__iterator(n,i);var a=t.__iterator($e,i),s=!0;return new nr(function(){if(!s)return g();var t=a.next();if(t.done)return t;var i=t.value,o=i[0],h=i[1];return e.call(r,h,o,u)?n===$e?t:v(n,o,h,t):(s=!1,g())})},n}function V(t,e,r){if(0>=e)return t;var n=t.__makeSequence();return n.length=t.length&&Math.max(0,t.length-e),n.__iterateUncached=function(n,i){var u=this;if(i)return this.cacheResult().__iterate(n,i);var a=0,s=!0,o=0;return t.__iterate(function(t,i){return s&&(s=a++<e)?void 0:(o++,n(t,r?i:o-1,u))}),o},n.__iteratorUncached=function(n,i){if(i)return this.cacheResult().__iterator(n,i);var u=e&&t.__iterator(n,i),a=0,s=0;return new nr(function(){for(;e>a;)a++,u.next();var t=u.next();return r||n===Ze?t:n===Ye?v(n,s++,null,t):v(n,s++,t.value[1],t)})},n}function L(t,e,r,n){var i=t.__makeSequence();return i.__iterateUncached=function(i,u){var a=this;if(u)return this.cacheResult().__iterate(i,u);var s=!0,o=0;return t.__iterate(function(t,u,h){return s&&(s=e.call(r,t,u,h))?void 0:(o++,i(t,n?u:o-1,a))}),o},i.__iteratorUncached=function(i,u){var a=this;if(u)return this.cacheResult().__iterator(i,u);var s=t.__iterator($e,u),o=!0,h=0;return new nr(function(){var t,u,c;do{if(t=s.next(),t.done)return n||i===Ze?t:i===Ye?v(i,h++,null,t):v(i,h++,t.value[1],t);var f=t.value;u=f[0],c=f[1],o&&(o=e.call(r,c,u,a))}while(o);return i===$e?t:v(i,u,c,t)})},i}function N(t,e,r){var n=[t].concat(e),i=ur(n);return r&&(i=i.toKeyedSeq()),i=i.flatMap(k),i.length=n.reduce(function(t,e){if(void 0!==t){var r=ur(e).length;if(null!=r)return t+r}},0),i}function T(t,e,r){var n=t.__makeSequence();return n.__iterateUncached=function(n,i){function u(t,o){var h=this;t.__iterate(function(t,i){return(!e||e>o)&&F(t)?u(t,o+1):n(t,r?i:a++,h)===!1&&(s=!0),!s},i)}var a=0,s=!1;return u(t,0),a},n.__iteratorUncached=function(n,i){var u=t.__iterator(n,i),a=[],s=0;return new nr(function(){for(;u;){var t=u.next();if(t.done===!1){var o=t.value;if(n===$e&&(o=o[1]),e&&!(a.length<e)||!F(o))return r?t:v(n,s++,o,t);a.push(u),u=o.__iterator(n,i)}else u=a.pop()}return g()})},n}function F(t){return t&&"function"==typeof t.flatten&&"function"==typeof t.__iterate&&"function"==typeof t.__iterator}function G(t,e){var r=t.__makeSequence();return r.length=t.length&&2*t.length-1,r.__iterateUncached=function(r,n){var i=this,u=0;return t.__iterate(function(t){return(!u||r(e,u++,i)!==!1)&&r(t,u++,i)!==!1},n),u},r.__iteratorUncached=function(r,n){var i,u=t.__iterator(Ze,n),a=0;return new nr(function(){return(!i||a%2)&&(i=u.next(),i.done)?i:a%2?v(r,a++,e):v(r,a++,i.value,i)})},r}function H(t,e){return v(t,e[0],e[1])}function Q(t,e){return{node:t,index:0,__prev:e}}function X(t,e,r,n){var i=Object.create(wr);return i.length=t,i._root=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Y(t,e,r){var n=i(ze),u=i(Be),a=Z(t._root,t.__ownerID,0,h(e),e,r,n,u);if(!u.value)return t;var s=t.length+(n.value?r===Je?-1:1:0);return t.__ownerID?(t.length=s,t._root=a,t.__hash=void 0,t.__altered=!0,t):a?X(s,a):yr.empty()}function Z(t,e,r,n,i,a,s,o){return t?t.update(e,r,n,i,a,s,o):a===Je?t:(u(o),u(s),new Mr(e,n,[i,a]))}function $(t){return t.constructor===Mr||t.constructor===kr}function te(t,e,r,n,i){if(t.hash===n)return new kr(e,n,[t.entry,i]);var u,a=(0===r?t.hash:t.hash>>>r)&Ke,s=(0===r?n:n>>>r)&Ke,o=a===s?[te(t,e,r+We,n,i)]:(u=new Mr(e,n,i),s>a?[t,u]:[u,t]);return new Sr(e,1<<a|1<<s,o)}function ee(t,e,r,n){for(var i=0,u=0,a=new Array(r),s=0,o=1,h=e.length;h>s;s++,o<<=1){var c=e[s];null!=c&&s!==n&&(i|=o,a[u++]=c)}return new Sr(t,i,a)}function re(t,e,r,n,i){for(var u=0,a=new Array(Pe),s=0;0!==r;s++,r>>>=1)a[s]=1&r?e[u++]:null;return a[n]=i,new qr(t,u+1,a)}function ne(t,e,r){for(var n=[],i=0;i<r.length;i++){var u=r[i];u instanceof ur||(u=ur(u),u instanceof or&&(u=u.fromEntrySeq())),u&&n.push(u)}return ue(t,e,n)}function ie(t){return function(e,r){return e&&e.mergeDeepWith?e.mergeDeepWith(t,r):t?t(e,r):r}}function ue(t,e,r){return 0===r.length?t:t.withMutations(function(t){for(var n=e?function(r,n){var i=t.get(n,Je);t.set(n,i===Je?r:e(i,r))}:function(e,r){t.set(r,e)},i=0;i<r.length;i++)r[i].forEach(n)})}function ae(t,e,r,n,i){o(!t||t.set,"updateIn with invalid keyPath");var u=e[i],a=t?t.get(u,Je):Je,s=a===Je?void 0:a,h=i===e.length-1?n(a===Je?r:a):ae(s,e,r,n,i+1);return h===s?t:h===Je?t&&t.remove(u):(t||yr.empty()).set(u,h)}function se(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,127&t}function oe(t,e,r,n){var i=n?t:s(t);return i[e]=r,i}function he(t,e,r,n){var i=t.length+1;if(n&&e+1===i)return t[e]=r,t;for(var u=new Array(i),a=0,s=0;i>s;s++)s===e?(u[s]=r,a=-1):u[s]=t[s+a];return u}function ce(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var i=new Array(n),u=0,a=0;n>a;a++)a===e&&(u=1),i[a]=t[a+u];return i}function fe(t,e,r,n,i,u){var a,s=t&&t.array;if(0===e){var o=0>r?-r:0,h=n-r;for(h>Pe&&(h=Pe),a=o;h>a;a++)if(i(s&&s[u?o+h-1-a:a])===!1)return!1}else{var c=1<<e,f=e-We;for(a=0;Ke>=a;a++){var _=u?Ke-a:a,l=r+(_<<e);if(n>l&&l+c>0){var v=s&&s[_];if(!fe(v,f,l,n,i,u))return!1}}}return!0}function _e(t,e,r,n,i){return{array:t,level:e,offset:r,max:n,rawMax:n-r>>e,index:0,__prev:i}}function le(t,e,r,n,i,u,a){var s=Object.create(Ur);return s.length=e-t,s._origin=t,s._size=e,s._level=r,s._root=n,s._tail=i,s.__ownerID=u,s.__hash=a,s.__altered=!1,s}function ve(t,e,r){if(e=A(t,e),e>=t.length||0>e)return r===Je?t:t.withMutations(function(t){0>e?ye(t,e).set(0,r):ye(t,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,u=t._root,a=i(Be);return e>=we(t._size)?n=ge(n,t.__ownerID,0,e,r,a):u=ge(u,t.__ownerID,t._level,e,r,a),a.value?t.__ownerID?(t._root=u,t._tail=n,t.__hash=void 0,t.__altered=!0,t):le(t._origin,t._size,t._level,u,n):t}function ge(t,e,r,n,i,a){var s,o=i===Je,h=n>>>r&Ke,c=t&&h<t.array.length;if(o&&!c)return t;if(r>0){var f=t&&t.array[h],_=ge(f,e,r-We,n,i,a);return _===f?t:(s=pe(t,e),s.array[h]=_,s)}return!o&&c&&t.array[h]===i?t:(u(a),s=pe(t,e),o&&h===s.array.length-1?s.array.pop():s.array[h]=o?void 0:i,s)}function pe(t,e){return e&&t&&e===t.ownerID?t:new Wr(t?t.array.slice():[],e)}function me(t,e){if(e>=we(t._size))return t._tail;if(e<1<<t._level+We){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&Ke],n-=We;return r}}function ye(t,e,r){var n=t.__ownerID||new a,i=t._origin,u=t._size,s=i+e,o=null==r?u:0>r?u+r:i+r;if(s===i&&o===u)return t;if(s>=o)return t.clear();for(var h=t._level,c=t._root,f=0;0>s+f;)c=new Wr(c&&c.array.length?[null,c]:[],n),h+=We,f+=1<<h;f&&(s+=f,i+=f,o+=f,u+=f);for(var _=we(u),l=we(o);l>=1<<h+We;)c=new Wr(c&&c.array.length?[c]:[],n),h+=We;var v=t._tail,g=_>l?me(t,o-1):l>_?new Wr([],n):v;if(v&&l>_&&u>s&&v.array.length){c=pe(c,n);for(var p=c,m=h;m>We;m-=We){var y=_>>>m&Ke;p=p.array[y]=pe(p.array[y],n)}p.array[_>>>We&Ke]=v}if(u>o&&(g=g&&g.removeAfter(n,0,o)),s>=l)s-=l,o-=l,h=We,c=null,g=g&&g.removeBefore(n,0,s);else if(s>i||_>l){for(f=0;c;){var d=s>>>h&Ke;if(d!==l>>>h&Ke)break;d&&(f+=(1<<h)*d),h-=We,c=c.array[d]}c&&s>i&&(c=c.removeBefore(n,h,s-f)),c&&_>l&&(c=c.removeAfter(n,h,l-f)),f&&(s-=f,o-=f)}return t.__ownerID?(t.length=o-s,t._origin=s,t._size=o,t._level=h,t._root=c,t._tail=g,t.__hash=void 0,t.__altered=!0,t):le(s,o,h,c,g)}function de(t,e,r){for(var n=[],i=0;i<r.length;i++){var u=r[i];u&&n.push(ur(u))}var a=Math.max.apply(null,n.map(function(t){return t.length||0}));return a>t.length&&(t=t.setLength(a)),ue(t,e,n)}function we(t){return Pe>t?0:t-1>>>We<<We}function Se(t,e,r,n){var i=Object.create(Vr);return i.length=t,i._head=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Ie(t,e){var r=Object.create(Fr);return r.length=t?t.length:0,r._map=t,r.__ownerID=e,r}function qe(t,e,r,n){var i=Object.create(Hr.prototype);return i.length=t?t.length:0,i._map=t,i._vector=e,i.__ownerID=r,i.__hash=n,i}function be(t,e,r){var n=t._map,i=t._vector,u=n.get(e),a=void 0!==u,s=r===Je;if(!a&&s||a&&r===i.get(u)[1])return t;a||(u=i.length);var o=s?n.remove(e):a?n:n.set(e,u),h=s?i.remove(u):i.set(u,[e,r]);return t.__ownerID?(t.length=o.length,t._map=o,t._vector=h,t.__hash=void 0,t):qe(o,h)}function ke(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._map=e,n.__ownerID=r,n}function xe(t,e){return e?Me(e,t,"",{"":t}):De(t)}function Me(t,e,r,n){return e&&(Array.isArray(e)||e.constructor===Object)?t.call(n,r,ur(e).map(function(r,n){return Me(t,r,n,e)})):e}function De(t){if(t){if(Array.isArray(t))return ur(t).map(De).toVector();if(t.constructor===Object)return ur(t).map(De).toMap()}return t}function Oe(t,e,r,n){arguments.length<4&&(n=t.getIn(e));var i=n instanceof ur?n.length:null,u=n instanceof or?cn:on;return new u(t,e,r,i)}function Ce(t,e,r){return r instanceof ur?Ae(t,e,r):r}function Ae(t,e,r){return Oe(t._rootData,t._keyPath.concat(e),t._onChange,r)}function Ee(t,e,r){var n=t._rootData.updateIn(t._keyPath,r?yr.empty():void 0,e),i=t._keyPath||[];return t._onChange&&t._onChange.call(void 0,n,t._rootData,r?i.concat(r):i),Oe(n,t._keyPath,t._onChange)}var Re=Object,je={};je.createClass=t,je.superCall=e,je.defaultSuperCall=r;var Ue="delete",We=5,Pe=1<<We,Ke=Pe-1,Je={},ze={value:!1},Be={value:!1},Ve=function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}(),Le="function"==typeof WeakMap&&new WeakMap,Ne=2147483647,Te=0,Fe="__immutablehash__";"function"==typeof Symbol&&(Fe=Symbol(Fe));var Ge=16,He=255,Qe=0,Xe={},Ye=0,Ze=1,$e=2,tr="@@iterator",er="function"==typeof Symbol&&Symbol.iterator,rr=er||tr,nr=function(t){this.next=t};je.createClass(nr,{toString:function(){return"[Iterator]"}},{});var ir=nr.prototype;ir.inspect=ir.toSource=function(){return this.toString()},ir[rr]=function(){return this};var ur=function(t){return ar.from(1===arguments.length?t:Array.prototype.slice.call(arguments))},ar=ur;je.createClass(ur,{toArray:function(){E(this.length);var t=new Array(this.length||0);return this.valueSeq().__iterate(function(e,r){t[r]=e}),t},toJS:function(){return this.map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toMap:function(){return E(this.length),yr.from(this)},toObject:function(){E(this.length);var t={};return this.__iterate(function(e,r){t[r]=e}),t},toOrderedMap:function(){return E(this.length),Hr.from(this)},toSet:function(){return E(this.length),Nr.from(this)},toStack:function(){return E(this.length),zr.from(this)},toVector:function(){return E(this.length),Rr.from(this)},toString:function(){return this.__toString("Seq {","}")},__toString:function(t,e){return 0===this.length?t+e:t+" "+this.map(this.__toStringMapper).join(", ")+" "+e},__toStringMapper:function(t,e){return e+": "+O(t)},concat:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return N(this,t,!0)},contains:function(t){return this.find(function(e){return n(e,t)},null,Je)!==Je},entries:function(){return this.__iterator($e)},every:function(t,e){var r=!0;return this.__iterate(function(n,i,u){return t.call(e,n,i,u)?void 0:(r=!1,!1)}),r},filter:function(t,e){return K(this,t,e,!0)},find:function(t,e,r){var n=r;return this.__iterate(function(r,i,u){return t.call(e,r,i,u)?(n=r,!1):void 0}),n},forEach:function(t,e){return this.__iterate(e?t.bind(e):t)},join:function(t){t=void 0!==t?""+t:",";var e="",r=!0;return this.__iterate(function(n){r?r=!1:e+=t,e+=null!=n?n:""}),e},keys:function(){return this.__iterator(Ye)},map:function(t,e){return W(this,t,e)},reduce:function(t,e,r){var n,i;return arguments.length<2?i=!0:n=e,this.__iterate(function(e,u,a){i?(i=!1,n=e):n=t.call(r,n,e,u,a)}),n},reduceRight:function(){var t=this.toKeyedSeq().reverse();return t.reduce.apply(t,arguments)},reverse:function(){return P(this,!0)},slice:function(t,e){if(S(t,e,this.length))return this;var r=I(t,this.length),n=q(e,this.length);if(r!==r||n!==n)return this.cacheResult().slice(t,e);var i=0===r?this:this.skip(r);return null==n||n===this.length?i:i.take(n-r)},some:function(t,e){return!this.every(D(t),e)},sort:function(t){return this.sortBy(k,t)},values:function(){return this.__iterator(Ze)},butLast:function(){return this.slice(0,-1)},count:function(t,e){return t?this.filter(t,e).count():(null==this.length&&(this.length=this.__iterate(M)),this.length)},countBy:function(t,e){var r=this,n={},i=[];return this.__iterate(function(u,a){var s=t.call(e,u,a,r),o=h(s);n.hasOwnProperty(o)?i[n[o]][1]++:(n[o]=i.length,i.push([s,1]))}),ar(i).fromEntrySeq()},equals:function(t){if(this===t)return!0;if(!t||"function"!=typeof t.equals)return!1;if(null!=this.length&&null!=t.length){if(this.length!==t.length)return!1;if(0===this.length&&0===t.length)return!0}return null!=this.__hash&&null!=t.__hash&&this.__hash!==t.__hash?!1:this.__deepEquals(t)},__deepEquals:function(t){var e=this.entries();return"function"==typeof t.every&&t.every(function(t,r){var i=e.next().value;return i&&n(i[0],r)&&n(i[1],t)})&&e.next().done},entrySeq:function(){var t=this;if(t._cache)return ar(t._cache);var e=t.toKeyedSeq().map(x).valueSeq();return e.fromEntrySeq=function(){return t},e},filterNot:function(t,e){return this.filter(D(t),e)},findKey:function(t,e){var r;return this.__iterate(function(n,i,u){return t.call(e,n,i,u)?(r=i,!1):void 0}),r},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(M)},flatMap:function(t,e){return this.map(function(r,n,i){return ar(t.call(e,r,n,i))}).flatten(!0)},flatten:function(t){return T(this,t,!0)},flip:function(){return U(this)},get:function(t,e){return this.find(function(e,r){return n(r,t)},null,e)},getIn:function(t,e){var r=this;if(t)for(var n=0;n<t.length;n++)if(r=r&&r.get?r.get(t[n],Je):Je,r===Je)return e;return r},groupBy:function(t,e){return J(this,t,e,!0)},has:function(t){return this.get(t,Je)!==Je},keySeq:function(){return this.flip().valueSeq()},last:function(){return this.reverse().first()},mapEntries:function(t,e){var r=this;return this.entrySeq().map(function(n,i){return t.call(e,n,i,r)}).fromEntrySeq()},mapKeys:function(t,e){var r=this;return this.flip().map(function(n,i){return t.call(e,n,i,r)}).flip()},max:function(t){return this.maxBy(k,t)},maxBy:function(t,e){e=e||C;var r=this,n=r.entrySeq().reduce(function(n,i){return e(t(i[1],i[0],r),t(n[1],n[0],r))>0?i:n});return n&&n[1]},min:function(t){return this.minBy(k,t)},minBy:function(t,e){e=e||C;var r=this,n=r.entrySeq().reduce(function(n,i){return e(t(i[1],i[0],r),t(n[1],n[0],r))<0?i:n});return n&&n[1]},rest:function(){return this.slice(1)},skip:function(t){return V(this,t,!0)},skipLast:function(t){return this.reverse().skip(t).reverse()},skipWhile:function(t,e){return L(this,t,e,!0)},skipUntil:function(t,e){return this.skipWhile(D(t),e)},sortBy:function(t,e){e=e||C;var r=this;return ar(r.entrySeq().entrySeq().toArray().sort(function(n,i){return e(t(n[1][1],n[1][0],r),t(i[1][1],i[1][0],r))||n[0]-i[0]})).fromEntrySeq().valueSeq().fromEntrySeq()},take:function(t){return z(this,t)},takeLast:function(t){return this.reverse().take(t).reverse()},takeWhile:function(t,e){return B(this,t,e)},takeUntil:function(t,e){return this.takeWhile(D(t),e)},toKeyedSeq:function(){return this},valueSeq:function(){return new gr(this)},cacheResult:function(){return!this._cache&&this.__iterateUncached&&(E(this.length),this._cache=this.entrySeq().toArray(),null==this.length&&(this.length=this._cache.length)),this},hashCode:function(){return this.__hash||(this.__hash=1/0===this.length?0:this.reduce(function(t,e,r){return t+(h(e)^(e===r?0:h(r)))&Ne},0))},__makeSequence:function(){return Object.create(sr)},__iterate:function(t,e){return R(this,t,e,!0)},__iterator:function(t,e){return j(this,t,e,!0)}},{from:function(t){if(t instanceof ar)return t;if(!Array.isArray(t)){if(m(t))return new fr(t);if(p(t))return new _r(t);if(t&&t.constructor===Object)return new lr(t);t=[t]}return new vr(t)}});var sr=ur.prototype;sr[rr]=sr.entries,sr.toJSON=sr.toJS,sr.__toJS=sr.toObject,sr.inspect=sr.toSource=function(){return this.toString()},sr.chain=sr.flatMap;var or=function(){je.defaultSuperCall(this,hr.prototype,arguments)},hr=or;je.createClass(or,{toString:function(){return this.__toString("Seq [","]")},concat:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return N(this,t,!1)},filter:function(t,e){return K(this,t,e,!1)},findIndex:function(t,e){var r=this.findKey(t,e);return null==r?-1:r},indexOf:function(t){return this.findIndex(function(e){return n(e,t)})},lastIndexOf:function(t){return this.toKeyedSeq().reverse().indexOf(t)},reverse:function(){return P(this,!1)},splice:function(t,e){var r=arguments.length;if(e=Math.max(0|e,0),0===r||2===r&&!e)return this;t=I(t,this.length);var n=this.slice(0,t);return 1===r?n:n.concat(s(arguments,2),this.slice(t+e))},findLastIndex:function(t,e){return this.toKeyedSeq().reverse().findIndex(t,e)},first:function(){return this.get(0)},flatten:function(t){return T(this,t,!1)},flip:function(){return U(this.toKeyedSeq())},fromEntrySeq:function(){return new mr(this)},get:function(t,e){return t=A(this,t),0>t||1/0===this.length||null!=this.length&&t>this.length?e:this.find(function(e,r){return r===t},null,e)},groupBy:function(t,e){return J(this,t,e,!1)},has:function(t){return t=A(this,t),t>=0&&(null!=this.length?1/0===this.length||t<this.length:-1!==this.indexOf(t))},interpose:function(t){return G(this,t)},last:function(){return this.get(-1)},skip:function(t){var e=this,r=V(e,t,!1);return r!==e&&(r.get=function(r,n){return r=A(this,r),r>=0?e.get(r+t,n):n}),r},skipWhile:function(t,e){return L(this,t,e,!1)},sortBy:function(t,e){e=e||C;var r=this;return ur(this.entrySeq().toArray().sort(function(n,i){return e(t(n[1],n[0],r),t(i[1],i[0],r))||n[0]-i[0]})).fromEntrySeq().valueSeq()},take:function(t){var e=this,r=z(e,t);return r!==e&&(r.get=function(r,n){return r=A(this,r),r>=0&&t>r?e.get(r,n):n}),r},toKeyedSeq:function(){return new pr(this)},valueSeq:function(){return this},__makeSequence:function(){return Object.create(cr)},__iterate:function(t,e){return R(this,t,e,!1)},__iterator:function(t,e){return j(this,t,e,!1)}},{},ur);var cr=or.prototype;cr[rr]=cr.values,cr.__toJS=cr.toArray,cr.__toStringMapper=O;var fr=function(t){this._iterator=t,this._iteratorCache=[]};je.createClass(fr,{__iterateUncached:function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var r=this._iterator,n=this._iteratorCache,i=0;i<n.length;)if(t(n[i],i++,this)===!1)return i;for(var u;!(u=r.next()).done;){var a=u.value;if(n[i]=a,t(a,i++,this)===!1)break}return i},__iteratorUncached:function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterator,n=this._iteratorCache,i=0;return new nr(function(){if(i>=n.length){var e=r.next();if(e.done)return e;n[i]=e.value}return v(t,i,n[i++])})}},{},or);var _r=function(t){this._iterable=t,this.length=t.length||t.size};je.createClass(_r,{__iterateUncached:function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=this._iterable,n=y(r),i=0;if(m(n))for(var u;!(u=n.next()).done&&t(u.value,i++,this)!==!1;);return i},__iteratorUncached:function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterable,n=y(r);if(!m(n))return new nr(function(){return g()});var i=0;return new nr(function(){var e=n.next();return e.done?e:v(t,i++,e.value)})}},{},or);var lr=function(t){var e=Object.keys(t);this._object=t,this._keys=e,this.length=e.length};je.createClass(lr,{get:function(t,e){return void 0===e||this.has(t)?this._object[t]:e},has:function(t){return this._object.hasOwnProperty(t)},__iterate:function(t,e){for(var r=this._object,n=this._keys,i=n.length-1,u=0;i>=u;u++){var a=n[e?i-u:u];if(t(r[a],a,this)===!1)return u+1}return u},__iterator:function(t,e){var r=this._object,n=this._keys,i=n.length-1,u=0;return new nr(function(){var a=n[e?i-u:u];return u++>i?g():v(t,a,r[a])})}},{},ur);var vr=function(t){this._array=t,this.length=t.length};je.createClass(vr,{get:function(t,e){return this.has(t)?this._array[A(this,t)]:e},__iterate:function(t,e){for(var r=this._array,n=r.length-1,i=0;n>=i;i++)if(t(r[e?n-i:i],i,this)===!1)return i+1;return i},__iterator:function(t,e){var r=this._array,n=r.length-1,i=0;return new nr(function(){return i>n?g():v(t,i,r[e?n-i++:i++])})}},{},or);var gr=function(t){this._seq=t,this.length=t.length};je.createClass(gr,{contains:function(t){return this._seq.contains(t)},cacheResult:function(){return this._seq.cacheResult(),this.length=this._seq.length,this},__iterate:function(t,e){var r=this,n=0;return this._seq.__iterate(function(e){return t(e,n++,r)},e)},__iterator:function(t,e){var r=this._seq.__iterator(Ze,e),n=0;return new nr(function(){var e=r.next();return e.done?e:v(t,n++,e.value,e)})}},{},or);var pr=function(t){this._seq=t,this.length=t.length};je.createClass(pr,{get:function(t,e){return this._seq.get(t,e)},has:function(t){return this._seq.has(t)},valueSeq:function(){return this._seq},reverse:function(){var t=this,e=P(this,!0);return e.valueSeq=function(){return t._seq.reverse()},e},map:function(t,e){var r=this,n=W(this,t,e);return n.valueSeq=function(){return r._seq.map(t,e)},n},cacheResult:function(){return this._seq.cacheResult(),this.length=this._seq.length,this},__iterate:function(t,e){var r=this,n=e?w(this):0;return this._seq.__iterate(function(i){return t(i,e?--n:n++,r)},e)},__iterator:function(t,e){var r=this._seq.__iterator(Ze,e),n=e?w(this):0;return new nr(function(){var i=r.next();return i.done?i:v(t,e?--n:n++,i.value,i)})}},{},ur);var mr=function(t){this._seq=t,this.length=t.length};je.createClass(mr,{entrySeq:function(){return this._seq},cacheResult:function(){return this._seq.cacheResult(),this.length=this._seq.length,this},__iterate:function(t,e){var r=this;return this._seq.__iterate(function(e){return e&&t(e[1],e[0],r)},e)},__iterator:function(t,e){var r=this._seq.__iterator(Ze,e);return new nr(function(){for(;;){var e=r.next();if(e.done)return e;var n=e.value;if(n)return t===$e?e:v(t,n[0],n[1],e)}})}},{},ur);var yr=function(t){var e=dr.empty();return t?t.constructor===dr?t:e.merge(t):e},dr=yr;je.createClass(yr,{toString:function(){return this.__toString("Map {","}")},get:function(t,e){return this._root?this._root.get(0,h(t),t,e):e},set:function(t,e){return Y(this,t,e)},setIn:function(t,e){return o(t.length>0,"Requires non-empty key path."),this.updateIn(t,function(){return e})},remove:function(t){return Y(this,t,Je)},removeIn:function(t){return o(t.length>0,"Requires non-empty key path."),this.updateIn(t,function(){return Je})},update:function(t,e,r){return 1===arguments.length?t(this):this.updateIn([t],e,r)},updateIn:function(t,e,r){return r||(r=e,e=void 0),0===t.length?r(this):ae(this,t,e,r,0)},clear:function(){return 0===this.length?this:this.__ownerID?(this.length=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):dr.empty()},merge:function(){return ne(this,null,arguments)},mergeWith:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return ne(this,t,e)},mergeDeep:function(){return ne(this,ie(null),arguments)},mergeDeepWith:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return ne(this,ie(t),e)},cursor:function(t,e){var r=0===arguments.length||"function"==typeof t&&(e=t)?[]:Array.isArray(t)?t:[t];return Oe(this,r,e)},withMutations:function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},asMutable:function(){return this.__ownerID?this:this.__ensureOwner(new a)},asImmutable:function(){return this.__ensureOwner()},wasAltered:function(){return this.__altered},__iterator:function(t,e){return new Or(this,t,e)},__iterate:function(t,e){var r=this,n=0;return this._root&&this._root.iterate(function(e){return n++,t(e[1],e[0],r)},e),n},__ensureOwner:function(t){return t===this.__ownerID?this:t?X(this.length,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)}},{empty:function(){return Cr||(Cr=X(0))}},ur);var wr=yr.prototype;wr[Ue]=wr.remove,yr.from=yr;var Sr=function(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r},Ir=Sr;je.createClass(Sr,{get:function(t,e,r,n){var i=1<<((0===t?e:e>>>t)&Ke),u=this.bitmap;return 0===(u&i)?n:this.nodes[se(u&i-1)].get(t+We,e,r,n)},update:function(t,e,r,n,i,u,a){var s=(0===e?r:r>>>e)&Ke,o=1<<s,h=this.bitmap,c=0!==(h&o);if(!c&&i===Je)return this;var f=se(h&o-1),_=this.nodes,l=c?_[f]:null,v=Z(l,t,e+We,r,n,i,u,a);if(v===l)return this;if(!c&&v&&_.length>=Ar)return re(t,_,h,s,v);if(c&&!v&&2===_.length&&$(_[1^f]))return _[1^f];if(c&&v&&1===_.length&&$(v))return v;var g=t&&t===this.ownerID,p=c?v?h:h^o:h|o,m=c?v?oe(_,f,v,g):ce(_,f,g):he(_,f,v,g);return g?(this.bitmap=p,this.nodes=m,this):new Ir(t,p,m)},iterate:function(t,e){for(var r=this.nodes,n=0,i=r.length-1;i>=n;n++)if(r[e?i-n:n].iterate(t,e)===!1)return!1}},{});var qr=function(t,e,r){this.ownerID=t,this.count=e,this.nodes=r},br=qr;je.createClass(qr,{get:function(t,e,r,n){var i=(0===t?e:e>>>t)&Ke,u=this.nodes[i];return u?u.get(t+We,e,r,n):n},update:function(t,e,r,n,i,u,a){var s=(0===e?r:r>>>e)&Ke,o=i===Je,h=this.nodes,c=h[s];if(o&&!c)return this;var f=Z(c,t,e+We,r,n,i,u,a);if(f===c)return this;var _=this.count;if(c){if(!f&&(_--,Er>_))return ee(t,h,_,s)}else _++;var l=t&&t===this.ownerID,v=oe(h,s,f,l);return l?(this.count=_,this.nodes=v,this):new br(t,_,v)},iterate:function(t,e){for(var r=this.nodes,n=0,i=r.length-1;i>=n;n++){var u=r[e?i-n:n];if(u&&u.iterate(t,e)===!1)return!1}}},{});var kr=function(t,e,r){this.ownerID=t,this.hash=e,this.entries=r},xr=kr;je.createClass(kr,{get:function(t,e,r,i){for(var u=this.entries,a=0,s=u.length;s>a;a++)if(n(r,u[a][0]))return u[a][1];return i},update:function(t,e,r,i,a,o,h){var c=a===Je;if(r!==this.hash)return c?this:(u(h),u(o),te(this,t,e,r,[i,a]));
for(var f=this.entries,_=0,l=f.length;l>_&&!n(i,f[_][0]);_++);var v=l>_;if(c&&!v)return this;if(u(h),(c||!v)&&u(o),c&&2===l)return new Mr(t,this.hash,f[1^_]);var g=t&&t===this.ownerID,p=g?f:s(f);return v?c?_===l-1?p.pop():p[_]=p.pop():p[_]=[i,a]:p.push([i,a]),g?(this.entries=p,this):new xr(t,this.hash,p)},iterate:function(t,e){for(var r=this.entries,n=0,i=r.length-1;i>=n;n++)if(t(r[e?i-n:n])===!1)return!1}},{});var Mr=function(t,e,r){this.ownerID=t,this.hash=e,this.entry=r},Dr=Mr;je.createClass(Mr,{get:function(t,e,r,i){return n(r,this.entry[0])?this.entry[1]:i},update:function(t,e,r,i,a,s,o){var h=a===Je,c=n(i,this.entry[0]);return(c?a===this.entry[1]:h)?this:(u(o),h?(u(s),null):c?t&&t===this.ownerID?(this.entry[1]=a,this):new Dr(t,r,[i,a]):(u(s),te(this,t,e,r,[i,a])))},iterate:function(t){return t(this.entry)}},{});var Or=function(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&Q(t._root)};je.createClass(Or,{next:function(){for(var t=this._type,e=this._stack;e;){var r,n=e.node,i=e.index++;if(n.entry){if(0===i)return H(t,n.entry)}else if(n.entries){if(r=n.entries.length-1,r>=i)return H(t,n.entries[this._reverse?r-i:i])}else if(r=n.nodes.length-1,r>=i){var u=n.nodes[this._reverse?r-i:i];if(u){if(u.entry)return H(t,u.entry);e=this._stack=Q(u,e)}continue}e=this._stack=this._stack.__prev}return g()}},{},nr);var Cr,Ar=Pe/2,Er=Pe/4,Rr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return jr.from(t)},jr=Rr;je.createClass(Rr,{toString:function(){return this.__toString("Vector [","]")},get:function(t,e){if(t=A(this,t),0>t||t>=this.length)return e;t+=this._origin;var r=me(this,t);return r&&r.array[t&Ke]},set:function(t,e){return ve(this,t,e)},remove:function(t){return ve(this,t,Je)},clear:function(){return 0===this.length?this:this.__ownerID?(this.length=this._origin=this._size=0,this._level=We,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):jr.empty()},push:function(){var t=arguments,e=this.length;return this.withMutations(function(r){ye(r,0,e+t.length);for(var n=0;n<t.length;n++)r.set(e+n,t[n])})},pop:function(){return ye(this,0,-1)},unshift:function(){var t=arguments;return this.withMutations(function(e){ye(e,-t.length);for(var r=0;r<t.length;r++)e.set(r,t[r])})},shift:function(){return ye(this,1)},merge:function(){return de(this,null,arguments)},mergeWith:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return de(this,t,e)},mergeDeep:function(){return de(this,ie(null),arguments)},mergeDeepWith:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return de(this,ie(t),e)},setLength:function(t){return ye(this,0,t)},slice:function(t,e){var r=je.superCall(this,jr.prototype,"slice",[t,e]);if(r!==this){var n=this,i=n.length;r.toVector=function(){return ye(n,0>t?Math.max(0,i+t):i?Math.min(i,t):t,null==e?i:0>e?Math.max(0,i+e):i?Math.min(i,e):e)}}return r},__iterator:function(t,e){return new Kr(this,t,e)},__iterate:function(t,e){var r=this,n=0,i=function(e){return t(e,n++,r)},u=we(this._size);return e?fe(this._tail,0,u-this._origin,this._size-this._origin,i,e)&&fe(this._root,this._level,-this._origin,u-this._origin,i,e):fe(this._root,this._level,-this._origin,u-this._origin,i,e)&&fe(this._tail,0,u-this._origin,this._size-this._origin,i,e),n},__ensureOwner:function(t){return t===this.__ownerID?this:t?le(this._origin,this._size,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)}},{empty:function(){return Jr||(Jr=le(0,0,We))},from:function(t){if(!t||0===t.length)return jr.empty();if(t.constructor===jr)return t;var e=Array.isArray(t);return t.length>0&&t.length<Pe?le(0,t.length,We,null,new Wr(e?s(t):ur(t).toArray())):(e||(t=ur(t).valueSeq()),jr.empty().merge(t))}},or);var Ur=Rr.prototype;Ur[Ue]=Ur.remove,Ur.setIn=wr.setIn,Ur.removeIn=wr.removeIn,Ur.update=wr.update,Ur.updateIn=wr.updateIn,Ur.cursor=wr.cursor,Ur.withMutations=wr.withMutations,Ur.asMutable=wr.asMutable,Ur.asImmutable=wr.asImmutable,Ur.wasAltered=wr.wasAltered;var Wr=function(t,e){this.array=t,this.ownerID=e},Pr=Wr;je.createClass(Wr,{removeBefore:function(t,e,r){if(r===e?1<<e:0||0===this.array.length)return this;var n=r>>>e&Ke;if(n>=this.array.length)return new Pr([],t);var i,u=0===n;if(e>0){var a=this.array[n];if(i=a&&a.removeBefore(t,e-We,r),i===a&&u)return this}if(u&&!i)return this;var s=pe(this,t);if(!u)for(var o=0;n>o;o++)s.array[o]=void 0;return i&&(s.array[n]=i),s},removeAfter:function(t,e,r){if(r===e?1<<e:0||0===this.array.length)return this;var n=r-1>>>e&Ke;if(n>=this.array.length)return this;var i,u=n===this.array.length-1;if(e>0){var a=this.array[n];if(i=a&&a.removeAfter(t,e-We,r),i===a&&u)return this}if(u&&!i)return this;var s=pe(this,t);return u||s.array.pop(),i&&(s.array[n]=i),s}},{});var Kr=function(t,e,r){this._type=e,this._reverse=!!r,this._maxIndex=t.length-1;var n=we(t._size),i=_e(t._root&&t._root.array,t._level,-t._origin,n-t._origin-1),u=_e(t._tail&&t._tail.array,0,n-t._origin,t._size-t._origin-1);this._stack=r?u:i,this._stack.__prev=r?i:u};je.createClass(Kr,{next:function(){for(var t=this._stack;t;){var e=t.array,r=t.index++;if(this._reverse&&(r=Ke-r,r>t.rawMax&&(r=t.rawMax,t.index=Pe-r)),r>=0&&Pe>r&&r<=t.rawMax){var n=e&&e[r];if(0===t.level){var i,u=this._type;return 1!==u&&(i=t.offset+(r<<t.level),this._reverse&&(i=this._maxIndex-i)),v(u,i,n)}this._stack=t=_e(n&&n.array,t.level-We,t.offset+(r<<t.level),t.max,t)}else t=this._stack=this._stack.__prev}return g()}},{},nr);var Jr,zr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Br.from(t)},Br=zr;je.createClass(zr,{toString:function(){return this.__toString("Stack [","]")},get:function(t,e){for(var r=this._head;r&&t--;)r=r.next;return r?r.value:e},peek:function(){return this._head&&this._head.value},push:function(){if(0===arguments.length)return this;for(var t=this.length+arguments.length,e=this._head,r=arguments.length-1;r>=0;r--)e={value:arguments[r],next:e};return this.__ownerID?(this.length=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Se(t,e)},pushAll:function(t){if(t=ur(t),0===t.length)return this;var e=this.length,r=this._head;return t.reverse().forEach(function(t){e++,r={value:t,next:r}}),this.__ownerID?(this.length=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):Se(e,r)},pop:function(){return this.slice(1)},unshift:function(){return this.push.apply(this,arguments)},unshiftAll:function(t){return this.pushAll(t)},shift:function(){return this.pop.apply(this,arguments)},clear:function(){return 0===this.length?this:this.__ownerID?(this.length=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Br.empty()},slice:function(t,e){if(S(t,e,this.length))return this;var r=I(t,this.length),n=q(e,this.length);if(n!==this.length)return je.superCall(this,Br.prototype,"slice",[t,e]);for(var i=this.length-r,u=this._head;r--;)u=u.next;return this.__ownerID?(this.length=i,this._head=u,this.__hash=void 0,this.__altered=!0,this):Se(i,u)},__ensureOwner:function(t){return t===this.__ownerID?this:t?Se(this.length,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},__iterateUncached:function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var r=0,n=this._head;n&&t(n.value,r++,this)!==!1;)n=n.next;return r},__iteratorUncached:function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=0,n=this._head;return new nr(function(){if(n){var e=n.value;return n=n.next,v(t,r++,e)}return g()})}},{empty:function(){return Lr||(Lr=Se(0))},from:function(t){var e=Br.empty();return t?t.constructor===Br?t:e.unshiftAll(t):e}},or);var Vr=zr.prototype;Vr.withMutations=wr.withMutations,Vr.asMutable=wr.asMutable,Vr.asImmutable=wr.asImmutable,Vr.wasAltered=wr.wasAltered;var Lr,Nr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Tr.from(t)},Tr=Nr;je.createClass(Nr,{toString:function(){return this.__toString("Set {","}")},get:function(t,e){return this._map.has(t)?t:e},contains:function(t){return this._map.has(t)},add:function(t){var e=this._map.set(t,null);return this.__ownerID?(this.length=e.length,this._map=e,this):e===this._map?this:Ie(e)},remove:function(t){var e=this._map.remove(t);return this.__ownerID?(this.length=e.length,this._map=e,this):e===this._map?this:0===e.length?Tr.empty():Ie(e)},clear:function(){return 0===this.length?this:this.__ownerID?(this.length=0,this._map.clear(),this):Tr.empty()},union:function(){var t=arguments;return 0===t.length?this:this.withMutations(function(e){for(var r=0;r<t.length;r++)ur(t[r]).forEach(function(t){return e.add(t)})})},intersect:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return this;t=t.map(function(t){return ur(t)});var r=this;return this.withMutations(function(e){r.forEach(function(r){t.every(function(t){return t.contains(r)})||e.remove(r)})})},subtract:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return this;t=t.map(function(t){return ur(t)});var r=this;return this.withMutations(function(e){r.forEach(function(r){t.some(function(t){return t.contains(r)})&&e.remove(r)})})},isSubset:function(t){return t=ur(t),this.every(function(e){return t.contains(e)})},isSuperset:function(t){var e=this;return t=ur(t),t.every(function(t){return e.contains(t)})},merge:function(){return this.union.apply(this,arguments)},mergeWith:function(){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return this.union.apply(this,t)},wasAltered:function(){return this._map.wasAltered()},__iterate:function(t,e){var r=this;return this._map.__iterate(function(e,n){return t(n,n,r)},e)},__iterator:function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},__ensureOwner:function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?Ie(e,t):(this.__ownerID=t,this._map=e,this)}},{empty:function(){return Gr||(Gr=Ie(yr.empty()))},from:function(t){var e=Tr.empty();return t?t.constructor===Tr?t:e.union(t):e},fromKeys:function(t){return Tr.from(ur(t).flip())}},ur);var Fr=Nr.prototype;Fr[Ue]=Fr.remove,Fr[rr]=Fr.values,Fr.mergeDeep=Fr.merge,Fr.mergeDeepWith=Fr.mergeWith,Fr.withMutations=wr.withMutations,Fr.asMutable=wr.asMutable,Fr.asImmutable=wr.asImmutable,Fr.__toJS=cr.__toJS,Fr.__toStringMapper=cr.__toStringMapper;var Gr,Hr=function(t){var e=Qr.empty();return t?t.constructor===Qr?t:e.merge(t):e},Qr=Hr;je.createClass(Hr,{toString:function(){return this.__toString("OrderedMap {","}")},get:function(t,e){var r=this._map.get(t);return null!=r?this._vector.get(r)[1]:e},clear:function(){return 0===this.length?this:this.__ownerID?(this.length=0,this._map.clear(),this._vector.clear(),this):Qr.empty()},set:function(t,e){return be(this,t,e)},remove:function(t){return be(this,t,Je)},wasAltered:function(){return this._map.wasAltered()||this._vector.wasAltered()},__iterate:function(t,e){var r=this;return this._vector.__iterate(function(e){return e&&t(e[1],e[0],r)},e)},__iterator:function(t,e){return this._vector.fromEntrySeq().__iterator(t,e)},__ensureOwner:function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._vector.__ensureOwner(t);return t?qe(e,r,t,this.__hash):(this.__ownerID=t,this._map=e,this._vector=r,this)}},{empty:function(){return Xr||(Xr=qe(yr.empty(),Rr.empty()))}},yr),Hr.from=Hr,Hr.prototype[Ue]=Hr.prototype.remove;var Xr,Yr=function(t,e){var r=function(t){return this instanceof r?void(this._map=yr(t)):new r(t)},n=Object.keys(t),i=r.prototype=Object.create(Zr);i.constructor=r,e&&(i._name=e),i._defaultValues=t,i._keys=n,i.length=n.length;try{ur(t).forEach(function(t,e){Object.defineProperty(r.prototype,e,{get:function(){return this.get(e)},set:function(t){o(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})})}catch(u){}return r};je.createClass(Yr,{toString:function(){return this.__toString(this._name+" {","}")},has:function(t){return this._defaultValues.hasOwnProperty(t)},get:function(t,e){return void 0===e||this.has(t)?this._map.get(t,this._defaultValues[t]):e},clear:function(){if(this.__ownerID)return this._map.clear(),this;var t=Object.getPrototypeOf(this).constructor;return t._empty||(t._empty=ke(this,yr.empty()))},set:function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+this._name);var r=this._map.set(t,e);return this.__ownerID||r===this._map?this:ke(this,r)},remove:function(t){if(null==t||!this.has(t))return this;var e=this._map.remove(t);return this.__ownerID||e===this._map?this:ke(this,e)},keys:function(){return this._map.keys()},values:function(){return this._map.values()},entries:function(){return this._map.entries()},wasAltered:function(){return this._map.wasAltered()},__iterator:function(t,e){return this._map.__iterator(t,e)},__iterate:function(t,e){var r=this;return ur(this._defaultValues).map(function(t,e){return r.get(e)}).__iterate(t,e)},__ensureOwner:function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?ke(this,e,t):(this.__ownerID=t,this._map=e,this)}},{},ur);var Zr=Yr.prototype;Zr._name="Record",Zr[Ue]=Zr.remove,Zr.merge=wr.merge,Zr.mergeWith=wr.mergeWith,Zr.mergeDeep=wr.mergeDeep,Zr.mergeDeepWith=wr.mergeDeepWith,Zr.update=wr.update,Zr.updateIn=wr.updateIn,Zr.cursor=wr.cursor,Zr.withMutations=wr.withMutations,Zr.asMutable=wr.asMutable,Zr.asImmutable=wr.asImmutable;var $r=function(t,e,r){return this instanceof tn?(o(0!==r,"Cannot step a Range by 0"),t=t||0,null==e&&(e=1/0),t===e&&rn?rn:(r=null==r?1:Math.abs(r),t>e&&(r=-r),this._start=t,this._end=e,this._step=r,void(this.length=Math.max(0,Math.ceil((e-t)/r-1)+1)))):new tn(t,e,r)},tn=$r;je.createClass($r,{toString:function(){return 0===this.length?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},get:function(t,e){return this.has(t)?this._start+A(this,t)*this._step:e},contains:function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.length&&e===Math.floor(e)},slice:function(t,e){return S(t,e,this.length)?this:(t=I(t,this.length),e=q(e,this.length),t>=e?rn:new tn(this.get(t,this._end),this.get(e,this._end),this._step))},indexOf:function(t){var e=t-this._start;if(e%this._step===0){var r=e/this._step;if(r>=0&&r<this.length)return r}return-1},lastIndexOf:function(t){return this.indexOf(t)},take:function(t){return this.slice(0,Math.max(0,t))},skip:function(t){return this.slice(Math.max(0,t))},__iterate:function(t,e){for(var r=this.length-1,n=this._step,i=e?this._start+r*n:this._start,u=0;r>=u;u++){if(t(i,u,this)===!1)return u+1;i+=e?-n:n}return u},__iterator:function(t,e){var r=this.length-1,n=this._step,i=e?this._start+r*n:this._start,u=0;return new nr(function(){var a=i;return i+=e?-n:n,u>r?g():v(t,u++,a)})},__deepEquals:function(t){return t instanceof tn?this._start===t._start&&this._end===t._end&&this._step===t._step:je.superCall(this,tn.prototype,"__deepEquals",[t])}},{},or);var en=$r.prototype;en.__toJS=en.toArray,en.first=Ur.first,en.last=Ur.last;var rn=$r(0,0),nn=function(t,e){return 0===e&&sn?sn:this instanceof un?(this._value=t,void(this.length=null==e?1/0:Math.max(0,e))):new un(t,e)},un=nn;je.createClass(nn,{toString:function(){return 0===this.length?"Repeat []":"Repeat [ "+this._value+" "+this.length+" times ]"},get:function(t,e){return this.has(t)?this._value:e},contains:function(t){return n(this._value,t)},slice:function(t,e){var r=this.length;return t=0>t?Math.max(0,r+t):Math.min(r,t),e=null==e?r:e>0?Math.min(r,e):Math.max(0,r+e),e>t?new un(this._value,e-t):sn},reverse:function(){return this},indexOf:function(t){return n(this._value,t)?0:-1},lastIndexOf:function(t){return n(this._value,t)?this.length:-1},__iterate:function(t){for(var e=0;e<this.length;e++)if(t(this._value,e,this)===!1)return e+1;return e},__iterator:function(t){var e=this,r=0;return new nr(function(){return r<e.length?v(t,r++,e._value):g()})},__deepEquals:function(t){return t instanceof un?n(this._value,t._value):je.superCall(this,un.prototype,"__deepEquals",[t])}},{},or);var an=nn.prototype;an.last=an.first,an.has=en.has,an.take=en.take,an.skip=en.skip,an.__toJS=en.__toJS;var sn=new nn(void 0,0),on=function(t,e,r,n){this.length=n,this._rootData=t,this._keyPath=e,this._onChange=r};je.createClass(on,{equals:function(t){return n(this.deref(),t&&("function"==typeof t.deref?t.deref():t))},deref:function(t){return this._rootData.getIn(this._keyPath,t)},get:function(t,e){if(Array.isArray(t)&&0===t.length)return this;var r=this._rootData.getIn(this._keyPath.concat(t),Je);return r===Je?e:Ce(this,t,r)},set:function(t,e){return Ee(this,function(r){return r.set(t,e)},t)},remove:function(t){return Ee(this,function(e){return e.remove(t)},t)},clear:function(){return Ee(this,function(t){return t.clear()})},update:function(t,e,r){return 1===arguments.length?Ee(this,t):Ee(this,function(n){return n.update(t,e,r)},t)},withMutations:function(t){return Ee(this,function(e){return(e||yr.empty()).withMutations(t)})},cursor:function(t){return Array.isArray(t)&&0===t.length?this:Ae(this,t)},__iterate:function(t,e){var r=this,n=this.deref();return n&&n.__iterate?n.__iterate(function(e,n){return t(Ce(r,n,e),n,r)},e):0},__iterator:function(t,e){var r=this,n=this.deref(),i=n&&n.__iterator&&n.__iterator($e,e);return new nr(function(){if(!i)return g();var e=i.next();if(e.done)return e;var n=e.value,u=n[0],a=n[1];return v(t,u,Ce(r,u,a),e)})}},{},ur);var hn=on.prototype;hn[Ue]=hn.remove,hn.getIn=hn.get;var cn=function(t,e,r,n){this.length=n,this._rootData=t,this._keyPath=e,this._onChange=r};je.createClass(cn,{},{},or);var fn=cn.prototype;fn.equals=hn.equals,fn.deref=hn.deref,fn.get=hn.get,fn.getIn=hn.getIn,fn.set=hn.set,fn[Ue]=fn.remove=hn.remove,fn.clear=hn.clear,fn.update=hn.update,fn.withMutations=hn.withMutations,fn.cursor=hn.cursor,fn.__iterate=hn.__iterate,fn.__iterator=hn.__iterator;var _n={Sequence:ur,Map:yr,Vector:Rr,Stack:zr,Set:Nr,OrderedMap:Hr,Record:Yr,Range:$r,Repeat:nn,is:n,fromJS:xe};return _n}"object"==typeof exports?module.exports=universalModule():"function"==typeof define&&define.amd?define(universalModule):Immutable=universalModule();
},{}],"/home/vadzim/v/work/nerojs/node_modules/lodash/dist/lodash.js":[function(require,module,exports){
(function(){function n(n,r,t){for(var e=(t||0)-1,u=n?n.length:0;++e<u;)if(n[e]===r)return e;return-1}function r(r,t){var e=typeof t;if(r=r.cache,"boolean"==e||null==t)return r[t]?0:-1;"number"!=e&&"string"!=e&&(e="object");var u="number"==e?t:m+t;return r=(r=r[e])&&r[u],"object"==e?r&&n(r,t)>-1?0:-1:r?0:-1}function t(n){var r=this.cache,t=typeof n;if("boolean"==t||null==n)r[n]=!0;else{"number"!=t&&"string"!=t&&(t="object");var e="number"==t?n:m+n,u=r[t]||(r[t]={});"object"==t?(u[e]||(u[e]=[])).push(n):u[e]=!0}}function e(n){return n.charCodeAt(0)}function u(n,r){for(var t=n.criteria,e=r.criteria,u=-1,o=t.length;++u<o;){var a=t[u],i=e[u];if(a!==i){if(a>i||"undefined"==typeof a)return 1;if(i>a||"undefined"==typeof i)return-1}}return n.index-r.index}function o(n){var r=-1,e=n.length,u=n[0],o=n[e/2|0],a=n[e-1];if(u&&"object"==typeof u&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;var i=f();i["false"]=i["null"]=i["true"]=i.undefined=!1;var l=f();for(l.array=n,l.cache=i,l.push=t;++r<e;)l.push(n[r]);return l}function a(n){return"\\"+G[n]}function i(){return h.pop()||[]}function f(){return g.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function l(n){n.length=0,h.length<d&&h.push(n)}function c(n){var r=n.cache;r&&c(r),n.array=n.cache=n.criteria=n.object=n.number=n.string=n.value=null,g.length<d&&g.push(n)}function p(n,r,t){r||(r=0),"undefined"==typeof t&&(t=n?n.length:0);for(var e=-1,u=t-r||0,o=Array(0>u?0:u);++e<u;)o[e]=n[r+e];return o}function s(t){function h(n){return n&&"object"==typeof n&&!Xe(n)&&De.call(n,"__wrapped__")?n:new g(n)}function g(n,r){this.__chain__=!!r,this.__wrapped__=n}function d(n){function r(){if(e){var n=p(e);Te.apply(n,arguments)}if(this instanceof r){var o=J(t.prototype),a=t.apply(o,n||arguments);return Ir(a)?a:o}return t.apply(u,n||arguments)}var t=n[0],e=n[2],u=n[4];return Qe(r,n),r}function G(n,r,t,e,u){if(t){var o=t(n);if("undefined"!=typeof o)return o}var a=Ir(n);if(!a)return n;var f=Oe.call(n);if(!K[f])return n;var c=He[f];switch(f){case F:case B:return new c(+n);case q:case P:return new c(n);case L:return o=c(n.source,C.exec(n)),o.lastIndex=n.lastIndex,o}var s=Xe(n);if(r){var v=!e;e||(e=i()),u||(u=i());for(var h=e.length;h--;)if(e[h]==n)return u[h];o=s?c(n.length):{}}else o=s?p(n):uu({},n);return s&&(De.call(n,"index")&&(o.index=n.index),De.call(n,"input")&&(o.input=n.input)),r?(e.push(n),u.push(o),(s?Qr:iu)(n,function(n,a){o[a]=G(n,r,t,e,u)}),v&&(l(e),l(u)),o):o}function J(n){return Ir(n)?qe(n):{}}function Q(n,r,t){if("function"!=typeof n)return Xt;if("undefined"==typeof r||!("prototype"in n))return n;var e=n.__bindData__;if("undefined"==typeof e&&(Je.funcNames&&(e=!n.name),e=e||!Je.funcDecomp,!e)){var u=Se.call(n);Je.funcNames||(e=!O.test(u)),e||(e=I.test(u),Qe(n,e))}if(e===!1||e!==!0&&1&e[1])return n;switch(t){case 1:return function(t){return n.call(r,t)};case 2:return function(t,e){return n.call(r,t,e)};case 3:return function(t,e,u){return n.call(r,t,e,u)};case 4:return function(t,e,u,o){return n.call(r,t,e,u,o)}}return Tt(n,r)}function X(n){function r(){var n=f?a:this;if(u){var h=p(u);Te.apply(h,arguments)}if((o||c)&&(h||(h=p(arguments)),o&&Te.apply(h,o),c&&h.length<i))return e|=16,X([t,s?e:-4&e,h,null,a,i]);if(h||(h=arguments),l&&(t=n[v]),this instanceof r){n=J(t.prototype);var g=t.apply(n,h);return Ir(g)?g:n}return t.apply(n,h)}var t=n[0],e=n[1],u=n[2],o=n[3],a=n[4],i=n[5],f=1&e,l=2&e,c=4&e,s=8&e,v=t;return Qe(r,n),r}function Y(t,e){var u=-1,a=fr(),i=t?t.length:0,f=i>=b&&a===n,l=[];if(f){var p=o(e);p?(a=r,e=p):f=!1}for(;++u<i;){var s=t[u];a(e,s)<0&&l.push(s)}return f&&c(e),l}function nr(n,r,t,e){for(var u=(e||0)-1,o=n?n.length:0,a=[];++u<o;){var i=n[u];if(i&&"object"==typeof i&&"number"==typeof i.length&&(Xe(i)||sr(i))){r||(i=nr(i,r,t));var f=-1,l=i.length,c=a.length;for(a.length+=l;++f<l;)a[c++]=i[f]}else t||a.push(i)}return a}function rr(n,r,t,e,u,o){if(t){var a=t(n,r);if("undefined"!=typeof a)return!!a}if(n===r)return 0!==n||1/n==1/r;var f=typeof n,c=typeof r;if(!(n!==n||n&&V[f]||r&&V[c]))return!1;if(null==n||null==r)return n===r;var p=Oe.call(n),s=Oe.call(r);if(p==T&&(p=z),s==T&&(s=z),p!=s)return!1;switch(p){case F:case B:return+n==+r;case q:return n!=+n?r!=+r:0==n?1/n==1/r:n==+r;case L:case P:return n==we(r)}var v=p==$;if(!v){var h=De.call(n,"__wrapped__"),g=De.call(r,"__wrapped__");if(h||g)return rr(h?n.__wrapped__:n,g?r.__wrapped__:r,t,e,u,o);if(p!=z)return!1;var y=n.constructor,m=r.constructor;if(y!=m&&!(Er(y)&&y instanceof y&&Er(m)&&m instanceof m)&&"constructor"in n&&"constructor"in r)return!1}var b=!u;u||(u=i()),o||(o=i());for(var d=u.length;d--;)if(u[d]==n)return o[d]==r;var _=0;if(a=!0,u.push(n),o.push(r),v){if(d=n.length,_=r.length,a=_==d,a||e)for(;_--;){var w=d,j=r[_];if(e)for(;w--&&!(a=rr(n[w],j,t,e,u,o)););else if(!(a=rr(n[_],j,t,e,u,o)))break}}else au(r,function(r,i,f){return De.call(f,i)?(_++,a=De.call(n,i)&&rr(n[i],r,t,e,u,o)):void 0}),a&&!e&&au(n,function(n,r,t){return De.call(t,r)?a=--_>-1:void 0});return u.pop(),o.pop(),b&&(l(u),l(o)),a}function tr(n,r,t,e,u){(Xe(r)?Qr:iu)(r,function(r,o){var a,i,f=r,l=n[o];if(r&&((i=Xe(r))||fu(r))){for(var c=e.length;c--;)if(a=e[c]==r){l=u[c];break}if(!a){var p;t&&(f=t(l,r),(p="undefined"!=typeof f)&&(l=f)),p||(l=i?Xe(l)?l:[]:fu(l)?l:{}),e.push(r),u.push(l),p||tr(l,r,t,e,u)}}else t&&(f=t(l,r),"undefined"==typeof f&&(f=r)),"undefined"!=typeof f&&(l=f);n[o]=l})}function er(n,r){return n+Ie(Ge()*(r-n+1))}function ur(t,e,u){var a=-1,f=fr(),p=t?t.length:0,s=[],v=!e&&p>=b&&f===n,h=u||v?i():s;if(v){var g=o(h);f=r,h=g}for(;++a<p;){var y=t[a],m=u?u(y,a,t):y;(e?!a||h[h.length-1]!==m:f(h,m)<0)&&((u||v)&&h.push(m),s.push(y))}return v?(l(h.array),c(h)):u&&l(h),s}function or(n){return function(r,t,e){var u={};t=h.createCallback(t,e,3);var o=-1,a=r?r.length:0;if("number"==typeof a)for(;++o<a;){var i=r[o];n(u,i,t(i,o,r),r)}else iu(r,function(r,e,o){n(u,r,t(r,e,o),o)});return u}}function ar(n,r,t,e,u,o){var a=1&r,i=2&r,f=4&r,l=16&r,c=32&r;if(!i&&!Er(n))throw new je;l&&!t.length&&(r&=-17,l=t=!1),c&&!e.length&&(r&=-33,c=e=!1);var s=n&&n.__bindData__;if(s&&s!==!0)return s=p(s),s[2]&&(s[2]=p(s[2])),s[3]&&(s[3]=p(s[3])),!a||1&s[1]||(s[4]=u),!a&&1&s[1]&&(r|=8),!f||4&s[1]||(s[5]=o),l&&Te.apply(s[2]||(s[2]=[]),t),c&&Be.apply(s[3]||(s[3]=[]),e),s[1]|=r,ar.apply(null,s);var v=1==r||17===r?d:X;return v([n,r,t,e,u,o])}function ir(n){return nu[n]}function fr(){var r=(r=h.indexOf)===mt?n:r;return r}function lr(n){return"function"==typeof n&&Ne.test(n)}function cr(n){var r,t;return n&&Oe.call(n)==z&&(r=n.constructor,!Er(r)||r instanceof r)?(au(n,function(n,r){t=r}),"undefined"==typeof t||De.call(n,t)):!1}function pr(n){return ru[n]}function sr(n){return n&&"object"==typeof n&&"number"==typeof n.length&&Oe.call(n)==T||!1}function vr(n,r,t,e){return"boolean"!=typeof r&&null!=r&&(e=t,t=r,r=!1),G(n,r,"function"==typeof t&&Q(t,e,1))}function hr(n,r,t){return G(n,!0,"function"==typeof r&&Q(r,t,1))}function gr(n,r){var t=J(n);return r?uu(t,r):t}function yr(n,r,t){var e;return r=h.createCallback(r,t,3),iu(n,function(n,t,u){return r(n,t,u)?(e=t,!1):void 0}),e}function mr(n,r,t){var e;return r=h.createCallback(r,t,3),dr(n,function(n,t,u){return r(n,t,u)?(e=t,!1):void 0}),e}function br(n,r,t){var e=[];au(n,function(n,r){e.push(r,n)});var u=e.length;for(r=Q(r,t,3);u--&&r(e[u--],e[u],n)!==!1;);return n}function dr(n,r,t){var e=Ze(n),u=e.length;for(r=Q(r,t,3);u--;){var o=e[u];if(r(n[o],o,n)===!1)break}return n}function _r(n){var r=[];return au(n,function(n,t){Er(n)&&r.push(t)}),r.sort()}function wr(n,r){return n?De.call(n,r):!1}function jr(n){for(var r=-1,t=Ze(n),e=t.length,u={};++r<e;){var o=t[r];u[n[o]]=o}return u}function kr(n){return n===!0||n===!1||n&&"object"==typeof n&&Oe.call(n)==F||!1}function xr(n){return n&&"object"==typeof n&&Oe.call(n)==B||!1}function Cr(n){return n&&1===n.nodeType||!1}function Or(n){var r=!0;if(!n)return r;var t=Oe.call(n),e=n.length;return t==$||t==P||t==T||t==z&&"number"==typeof e&&Er(n.splice)?!e:(iu(n,function(){return r=!1}),r)}function Nr(n,r,t,e){return rr(n,r,"function"==typeof t&&Q(t,e,2))}function Rr(n){return Le(n)&&!Pe(parseFloat(n))}function Er(n){return"function"==typeof n}function Ir(n){return!(!n||!V[typeof n])}function Sr(n){return Dr(n)&&n!=+n}function Ar(n){return null===n}function Dr(n){return"number"==typeof n||n&&"object"==typeof n&&Oe.call(n)==q||!1}function Tr(n){return n&&"object"==typeof n&&Oe.call(n)==L||!1}function $r(n){return"string"==typeof n||n&&"object"==typeof n&&Oe.call(n)==P||!1}function Fr(n){return"undefined"==typeof n}function Br(n,r,t){var e={};return r=h.createCallback(r,t,3),iu(n,function(n,t,u){e[t]=r(n,t,u)}),e}function Wr(n){var r=arguments,t=2;if(!Ir(n))return n;if("number"!=typeof r[2]&&(t=r.length),t>3&&"function"==typeof r[t-2])var e=Q(r[--t-1],r[t--],2);else t>2&&"function"==typeof r[t-1]&&(e=r[--t]);for(var u=p(arguments,1,t),o=-1,a=i(),f=i();++o<t;)tr(n,u[o],e,a,f);return l(a),l(f),n}function qr(n,r,t){var e={};if("function"!=typeof r){var u=[];au(n,function(n,r){u.push(r)}),u=Y(u,nr(arguments,!0,!1,1));for(var o=-1,a=u.length;++o<a;){var i=u[o];e[i]=n[i]}}else r=h.createCallback(r,t,3),au(n,function(n,t,u){r(n,t,u)||(e[t]=n)});return e}function zr(n){for(var r=-1,t=Ze(n),e=t.length,u=ve(e);++r<e;){var o=t[r];u[r]=[o,n[o]]}return u}function Lr(n,r,t){var e={};if("function"!=typeof r)for(var u=-1,o=nr(arguments,!0,!1,1),a=Ir(n)?o.length:0;++u<a;){var i=o[u];i in n&&(e[i]=n[i])}else r=h.createCallback(r,t,3),au(n,function(n,t,u){r(n,t,u)&&(e[t]=n)});return e}function Pr(n,r,t,e){var u=Xe(n);if(null==t)if(u)t=[];else{var o=n&&n.constructor,a=o&&o.prototype;t=J(a)}return r&&(r=h.createCallback(r,e,4),(u?Qr:iu)(n,function(n,e,u){return r(t,n,e,u)})),t}function Kr(n){for(var r=-1,t=Ze(n),e=t.length,u=ve(e);++r<e;)u[r]=n[t[r]];return u}function Ur(n){for(var r=arguments,t=-1,e=nr(r,!0,!1,1),u=r[2]&&r[2][r[1]]===n?1:e.length,o=ve(u);++t<u;)o[t]=n[e[t]];return o}function Mr(n,r,t){var e=-1,u=fr(),o=n?n.length:0,a=!1;return t=(0>t?Ue(0,o+t):t)||0,Xe(n)?a=u(n,r,t)>-1:"number"==typeof o?a=($r(n)?n.indexOf(r,t):u(n,r,t))>-1:iu(n,function(n){return++e>=t?!(a=n===r):void 0}),a}function Vr(n,r,t){var e=!0;r=h.createCallback(r,t,3);var u=-1,o=n?n.length:0;if("number"==typeof o)for(;++u<o&&(e=!!r(n[u],u,n)););else iu(n,function(n,t,u){return e=!!r(n,t,u)});return e}function Gr(n,r,t){var e=[];r=h.createCallback(r,t,3);var u=-1,o=n?n.length:0;if("number"==typeof o)for(;++u<o;){var a=n[u];r(a,u,n)&&e.push(a)}else iu(n,function(n,t,u){r(n,t,u)&&e.push(n)});return e}function Hr(n,r,t){r=h.createCallback(r,t,3);var e=-1,u=n?n.length:0;if("number"!=typeof u){var o;return iu(n,function(n,t,e){return r(n,t,e)?(o=n,!1):void 0}),o}for(;++e<u;){var a=n[e];if(r(a,e,n))return a}}function Jr(n,r,t){var e;return r=h.createCallback(r,t,3),Xr(n,function(n,t,u){return r(n,t,u)?(e=n,!1):void 0}),e}function Qr(n,r,t){var e=-1,u=n?n.length:0;if(r=r&&"undefined"==typeof t?r:Q(r,t,3),"number"==typeof u)for(;++e<u&&r(n[e],e,n)!==!1;);else iu(n,r);return n}function Xr(n,r,t){var e=n?n.length:0;if(r=r&&"undefined"==typeof t?r:Q(r,t,3),"number"==typeof e)for(;e--&&r(n[e],e,n)!==!1;);else{var u=Ze(n);e=u.length,iu(n,function(n,t,o){return t=u?u[--e]:--e,r(o[t],t,o)})}return n}function Yr(n,r){var t=p(arguments,2),e=-1,u="function"==typeof r,o=n?n.length:0,a=ve("number"==typeof o?o:0);return Qr(n,function(n){a[++e]=(u?r:n[r]).apply(n,t)}),a}function Zr(n,r,t){var e=-1,u=n?n.length:0;if(r=h.createCallback(r,t,3),"number"==typeof u)for(var o=ve(u);++e<u;)o[e]=r(n[e],e,n);else o=[],iu(n,function(n,t,u){o[++e]=r(n,t,u)});return o}function nt(n,r,t){var u=-1/0,o=u;if("function"!=typeof r&&t&&t[r]===n&&(r=null),null==r&&Xe(n))for(var a=-1,i=n.length;++a<i;){var f=n[a];f>o&&(o=f)}else r=null==r&&$r(n)?e:h.createCallback(r,t,3),Qr(n,function(n,t,e){var a=r(n,t,e);a>u&&(u=a,o=n)});return o}function rt(n,r,t){var u=1/0,o=u;if("function"!=typeof r&&t&&t[r]===n&&(r=null),null==r&&Xe(n))for(var a=-1,i=n.length;++a<i;){var f=n[a];o>f&&(o=f)}else r=null==r&&$r(n)?e:h.createCallback(r,t,3),Qr(n,function(n,t,e){var a=r(n,t,e);u>a&&(u=a,o=n)});return o}function tt(n,r,t,e){if(!n)return t;var u=arguments.length<3;r=h.createCallback(r,e,4);var o=-1,a=n.length;if("number"==typeof a)for(u&&(t=n[++o]);++o<a;)t=r(t,n[o],o,n);else iu(n,function(n,e,o){t=u?(u=!1,n):r(t,n,e,o)});return t}function et(n,r,t,e){var u=arguments.length<3;return r=h.createCallback(r,e,4),Xr(n,function(n,e,o){t=u?(u=!1,n):r(t,n,e,o)}),t}function ut(n,r,t){return r=h.createCallback(r,t,3),Gr(n,function(n,t,e){return!r(n,t,e)})}function ot(n,r,t){if(n&&"number"!=typeof n.length&&(n=Kr(n)),null==r||t)return n?n[er(0,n.length-1)]:v;var e=at(n);return e.length=Me(Ue(0,r),e.length),e}function at(n){var r=-1,t=n?n.length:0,e=ve("number"==typeof t?t:0);return Qr(n,function(n){var t=er(0,++r);e[r]=e[t],e[t]=n}),e}function it(n){var r=n?n.length:0;return"number"==typeof r?r:Ze(n).length}function ft(n,r,t){var e;r=h.createCallback(r,t,3);var u=-1,o=n?n.length:0;if("number"==typeof o)for(;++u<o&&!(e=r(n[u],u,n)););else iu(n,function(n,t,u){return!(e=r(n,t,u))});return!!e}function lt(n,r,t){var e=-1,o=Xe(r),a=n?n.length:0,p=ve("number"==typeof a?a:0);for(o||(r=h.createCallback(r,t,3)),Qr(n,function(n,t,u){var a=p[++e]=f();o?a.criteria=Zr(r,function(r){return n[r]}):(a.criteria=i())[0]=r(n,t,u),a.index=e,a.value=n}),a=p.length,p.sort(u);a--;){var s=p[a];p[a]=s.value,o||l(s.criteria),c(s)}return p}function ct(n){return n&&"number"==typeof n.length?p(n):Kr(n)}function pt(n){for(var r=-1,t=n?n.length:0,e=[];++r<t;){var u=n[r];u&&e.push(u)}return e}function st(n){return Y(n,nr(arguments,!0,!0,1))}function vt(n,r,t){var e=-1,u=n?n.length:0;for(r=h.createCallback(r,t,3);++e<u;)if(r(n[e],e,n))return e;return-1}function ht(n,r,t){var e=n?n.length:0;for(r=h.createCallback(r,t,3);e--;)if(r(n[e],e,n))return e;return-1}function gt(n,r,t){var e=0,u=n?n.length:0;if("number"!=typeof r&&null!=r){var o=-1;for(r=h.createCallback(r,t,3);++o<u&&r(n[o],o,n);)e++}else if(e=r,null==e||t)return n?n[0]:v;return p(n,0,Me(Ue(0,e),u))}function yt(n,r,t,e){return"boolean"!=typeof r&&null!=r&&(e=t,t="function"!=typeof r&&e&&e[r]===n?null:r,r=!1),null!=t&&(n=Zr(n,t,e)),nr(n,r)}function mt(r,t,e){if("number"==typeof e){var u=r?r.length:0;e=0>e?Ue(0,u+e):e||0}else if(e){var o=Ot(r,t);return r[o]===t?o:-1}return n(r,t,e)}function bt(n,r,t){var e=0,u=n?n.length:0;if("number"!=typeof r&&null!=r){var o=u;for(r=h.createCallback(r,t,3);o--&&r(n[o],o,n);)e++}else e=null==r||t?1:r||e;return p(n,0,Me(Ue(0,u-e),u))}function dt(){for(var t=[],e=-1,u=arguments.length,a=i(),f=fr(),p=f===n,s=i();++e<u;){var v=arguments[e];(Xe(v)||sr(v))&&(t.push(v),a.push(p&&v.length>=b&&o(e?t[e]:s)))}var h=t[0],g=-1,y=h?h.length:0,m=[];n:for(;++g<y;){var d=a[0];if(v=h[g],(d?r(d,v):f(s,v))<0){for(e=u,(d||s).push(v);--e;)if(d=a[e],(d?r(d,v):f(t[e],v))<0)continue n;m.push(v)}}for(;u--;)d=a[u],d&&c(d);return l(a),l(s),m}function _t(n,r,t){var e=0,u=n?n.length:0;if("number"!=typeof r&&null!=r){var o=u;for(r=h.createCallback(r,t,3);o--&&r(n[o],o,n);)e++}else if(e=r,null==e||t)return n?n[u-1]:v;return p(n,Ue(0,u-e))}function wt(n,r,t){var e=n?n.length:0;for("number"==typeof t&&(e=(0>t?Ue(0,e+t):Me(t,e-1))+1);e--;)if(n[e]===r)return e;return-1}function jt(n){for(var r=arguments,t=0,e=r.length,u=n?n.length:0;++t<e;)for(var o=-1,a=r[t];++o<u;)n[o]===a&&(Fe.call(n,o--,1),u--);return n}function kt(n,r,t){n=+n||0,t="number"==typeof t?t:+t||1,null==r&&(r=n,n=0);for(var e=-1,u=Ue(0,Re((r-n)/(t||1))),o=ve(u);++e<u;)o[e]=n,n+=t;return o}function xt(n,r,t){var e=-1,u=n?n.length:0,o=[];for(r=h.createCallback(r,t,3);++e<u;){var a=n[e];r(a,e,n)&&(o.push(a),Fe.call(n,e--,1),u--)}return o}function Ct(n,r,t){if("number"!=typeof r&&null!=r){var e=0,u=-1,o=n?n.length:0;for(r=h.createCallback(r,t,3);++u<o&&r(n[u],u,n);)e++}else e=null==r||t?1:Ue(0,r);return p(n,e)}function Ot(n,r,t,e){var u=0,o=n?n.length:u;for(t=t?h.createCallback(t,e,1):Xt,r=t(r);o>u;){var a=u+o>>>1;t(n[a])<r?u=a+1:o=a}return u}function Nt(){return ur(nr(arguments,!0,!0))}function Rt(n,r,t,e){return"boolean"!=typeof r&&null!=r&&(e=t,t="function"!=typeof r&&e&&e[r]===n?null:r,r=!1),null!=t&&(t=h.createCallback(t,e,3)),ur(n,r,t)}function Et(n){return Y(n,p(arguments,1))}function It(){for(var n=-1,r=arguments.length;++n<r;){var t=arguments[n];if(Xe(t)||sr(t))var e=e?ur(Y(e,t).concat(Y(t,e))):t}return e||[]}function St(){for(var n=arguments.length>1?arguments:arguments[0],r=-1,t=n?nt(su(n,"length")):0,e=ve(0>t?0:t);++r<t;)e[r]=su(n,r);return e}function At(n,r){var t=-1,e=n?n.length:0,u={};for(r||!e||Xe(n[0])||(r=[]);++t<e;){var o=n[t];r?u[o]=r[t]:o&&(u[o[0]]=o[1])}return u}function Dt(n,r){if(!Er(r))throw new je;return function(){return--n<1?r.apply(this,arguments):void 0}}function Tt(n,r){return arguments.length>2?ar(n,17,p(arguments,2),null,r):ar(n,1,null,null,r)}function $t(n){for(var r=arguments.length>1?nr(arguments,!0,!1,1):_r(n),t=-1,e=r.length;++t<e;){var u=r[t];n[u]=ar(n[u],1,null,null,n)}return n}function Ft(n,r){return arguments.length>2?ar(r,19,p(arguments,2),null,n):ar(r,3,null,null,n)}function Bt(){for(var n=arguments,r=n.length;r--;)if(!Er(n[r]))throw new je;return function(){for(var r=arguments,t=n.length;t--;)r=[n[t].apply(this,r)];return r[0]}}function Wt(n,r){return r="number"==typeof r?r:+r||n.length,ar(n,4,null,null,null,r)}function qt(n,r,t){var e,u,o,a,i,f,l,c=0,p=!1,s=!0;if(!Er(n))throw new je;if(r=Ue(0,r)||0,t===!0){var h=!0;s=!1}else Ir(t)&&(h=t.leading,p="maxWait"in t&&(Ue(r,t.maxWait)||0),s="trailing"in t?t.trailing:s);var g=function(){var t=r-(hu()-a);if(0>=t){u&&Ee(u);var p=l;u=f=l=v,p&&(c=hu(),o=n.apply(i,e),f||u||(e=i=null))}else f=$e(g,t)},y=function(){f&&Ee(f),u=f=l=v,(s||p!==r)&&(c=hu(),o=n.apply(i,e),f||u||(e=i=null))};return function(){if(e=arguments,a=hu(),i=this,l=s&&(f||!h),p===!1)var t=h&&!f;else{u||h||(c=a);var v=p-(a-c),m=0>=v;m?(u&&(u=Ee(u)),c=a,o=n.apply(i,e)):u||(u=$e(y,v))}return m&&f?f=Ee(f):f||r===p||(f=$e(g,r)),t&&(m=!0,o=n.apply(i,e)),!m||f||u||(e=i=null),o}}function zt(n){if(!Er(n))throw new je;var r=p(arguments,1);return $e(function(){n.apply(v,r)},1)}function Lt(n,r){if(!Er(n))throw new je;var t=p(arguments,2);return $e(function(){n.apply(v,t)},r)}function Pt(n,r){if(!Er(n))throw new je;var t=function(){var e=t.cache,u=r?r.apply(this,arguments):m+arguments[0];return De.call(e,u)?e[u]:e[u]=n.apply(this,arguments)};return t.cache={},t}function Kt(n){var r,t;if(!Er(n))throw new je;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}}function Ut(n){return ar(n,16,p(arguments,1))}function Mt(n){return ar(n,32,null,p(arguments,1))}function Vt(n,r,t){var e=!0,u=!0;if(!Er(n))throw new je;return t===!1?e=!1:Ir(t)&&(e="leading"in t?t.leading:e,u="trailing"in t?t.trailing:u),U.leading=e,U.maxWait=r,U.trailing=u,qt(n,r,U)}function Gt(n,r){return ar(r,16,[n])}function Ht(n){return function(){return n}}function Jt(n,r,t){var e=typeof n;if(null==n||"function"==e)return Q(n,r,t);if("object"!=e)return re(n);var u=Ze(n),o=u[0],a=n[o];return 1!=u.length||a!==a||Ir(a)?function(r){for(var t=u.length,e=!1;t--&&(e=rr(r[u[t]],n[u[t]],null,!0)););return e}:function(n){var r=n[o];return a===r&&(0!==a||1/a==1/r)}}function Qt(n){return null==n?"":we(n).replace(eu,ir)}function Xt(n){return n}function Yt(n,r,t){var e=!0,u=r&&_r(r);r&&(t||u.length)||(null==t&&(t=r),o=g,r=n,n=h,u=_r(r)),t===!1?e=!1:Ir(t)&&"chain"in t&&(e=t.chain);var o=n,a=Er(o);Qr(u,function(t){var u=n[t]=r[t];a&&(o.prototype[t]=function(){var r=this.__chain__,t=this.__wrapped__,a=[t];Te.apply(a,arguments);var i=u.apply(n,a);if(e||r){if(t===i&&Ir(i))return this;i=new o(i),i.__chain__=r}return i})})}function Zt(){return t._=Ce,this}function ne(){}function re(n){return function(r){return r[n]}}function te(n,r,t){var e=null==n,u=null==r;if(null==t&&("boolean"==typeof n&&u?(t=n,n=1):u||"boolean"!=typeof r||(t=r,u=!0)),e&&u&&(r=1),n=+n||0,u?(r=n,n=0):r=+r||0,t||n%1||r%1){var o=Ge();return Me(n+o*(r-n+parseFloat("1e-"+((o+"").length-1))),r)}return er(n,r)}function ee(n,r){if(n){var t=n[r];return Er(t)?n[r]():t}}function ue(n,r,t){var e=h.templateSettings;n=we(n||""),t=ou({},t,e);var u,o=ou({},t.imports,e.imports),i=Ze(o),f=Kr(o),l=0,c=t.interpolate||E,p="__p += '",s=_e((t.escape||E).source+"|"+c.source+"|"+(c===N?x:E).source+"|"+(t.evaluate||E).source+"|$","g");n.replace(s,function(r,t,e,o,i,f){return e||(e=o),p+=n.slice(l,f).replace(S,a),t&&(p+="' +\n__e("+t+") +\n'"),i&&(u=!0,p+="';\n"+i+";\n__p += '"),e&&(p+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),l=f+r.length,r}),p+="';\n";var g=t.variable,y=g;y||(g="obj",p="with ("+g+") {\n"+p+"\n}\n"),p=(u?p.replace(w,""):p).replace(j,"$1").replace(k,"$1;"),p="function("+g+") {\n"+(y?"":g+" || ("+g+" = {});\n")+"var __t, __p = '', __e = _.escape"+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m="\n/*\n//# sourceURL="+(t.sourceURL||"/lodash/template/source["+D++ +"]")+"\n*/";try{var b=ye(i,"return "+p+m).apply(v,f)}catch(d){throw d.source=p,d}return r?b(r):(b.source=p,b)}function oe(n,r,t){n=(n=+n)>-1?n:0;var e=-1,u=ve(n);for(r=Q(r,t,1);++e<n;)u[e]=r(e);return u}function ae(n){return null==n?"":we(n).replace(tu,pr)}function ie(n){var r=++y;return we(null==n?"":n)+r}function fe(n){return n=new g(n),n.__chain__=!0,n}function le(n,r){return r(n),n}function ce(){return this.__chain__=!0,this}function pe(){return we(this.__wrapped__)}function se(){return this.__wrapped__}t=t?Z.defaults(H.Object(),t,Z.pick(H,A)):H;var ve=t.Array,he=t.Boolean,ge=t.Date,ye=t.Function,me=t.Math,be=t.Number,de=t.Object,_e=t.RegExp,we=t.String,je=t.TypeError,ke=[],xe=de.prototype,Ce=t._,Oe=xe.toString,Ne=_e("^"+we(Oe).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Re=me.ceil,Ee=t.clearTimeout,Ie=me.floor,Se=ye.prototype.toString,Ae=lr(Ae=de.getPrototypeOf)&&Ae,De=xe.hasOwnProperty,Te=ke.push,$e=t.setTimeout,Fe=ke.splice,Be=ke.unshift,We=function(){try{var n={},r=lr(r=de.defineProperty)&&r,t=r(n,n,n)&&r}catch(e){}return t}(),qe=lr(qe=de.create)&&qe,ze=lr(ze=ve.isArray)&&ze,Le=t.isFinite,Pe=t.isNaN,Ke=lr(Ke=de.keys)&&Ke,Ue=me.max,Me=me.min,Ve=t.parseInt,Ge=me.random,He={};He[$]=ve,He[F]=he,He[B]=ge,He[W]=ye,He[z]=de,He[q]=be,He[L]=_e,He[P]=we,g.prototype=h.prototype;var Je=h.support={};Je.funcDecomp=!lr(t.WinRTError)&&I.test(s),Je.funcNames="string"==typeof ye.name,h.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:N,variable:"",imports:{_:h}},qe||(J=function(){function n(){}return function(r){if(Ir(r)){n.prototype=r;var e=new n;n.prototype=null}return e||t.Object()}}());var Qe=We?function(n,r){M.value=r,We(n,"__bindData__",M)}:ne,Xe=ze||function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&Oe.call(n)==$||!1},Ye=function(n){var r,t=n,e=[];if(!t)return e;if(!V[typeof n])return e;for(r in t)De.call(t,r)&&e.push(r);return e},Ze=Ke?function(n){return Ir(n)?Ke(n):[]}:Ye,nu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ru=jr(nu),tu=_e("("+Ze(ru).join("|")+")","g"),eu=_e("["+Ze(nu).join("")+"]","g"),uu=function(n,r,t){var e,u=n,o=u;if(!u)return o;var a=arguments,i=0,f="number"==typeof t?2:a.length;if(f>3&&"function"==typeof a[f-2])var l=Q(a[--f-1],a[f--],2);else f>2&&"function"==typeof a[f-1]&&(l=a[--f]);for(;++i<f;)if(u=a[i],u&&V[typeof u])for(var c=-1,p=V[typeof u]&&Ze(u),s=p?p.length:0;++c<s;)e=p[c],o[e]=l?l(o[e],u[e]):u[e];return o},ou=function(n,r,t){var e,u=n,o=u;if(!u)return o;for(var a=arguments,i=0,f="number"==typeof t?2:a.length;++i<f;)if(u=a[i],u&&V[typeof u])for(var l=-1,c=V[typeof u]&&Ze(u),p=c?c.length:0;++l<p;)e=c[l],"undefined"==typeof o[e]&&(o[e]=u[e]);return o},au=function(n,r,t){var e,u=n,o=u;if(!u)return o;if(!V[typeof u])return o;r=r&&"undefined"==typeof t?r:Q(r,t,3);for(e in u)if(r(u[e],e,n)===!1)return o;return o},iu=function(n,r,t){var e,u=n,o=u;if(!u)return o;if(!V[typeof u])return o;r=r&&"undefined"==typeof t?r:Q(r,t,3);for(var a=-1,i=V[typeof u]&&Ze(u),f=i?i.length:0;++a<f;)if(e=i[a],r(u[e],e,n)===!1)return o;return o},fu=Ae?function(n){if(!n||Oe.call(n)!=z)return!1;var r=n.valueOf,t=lr(r)&&(t=Ae(r))&&Ae(t);return t?n==t||Ae(n)==t:cr(n)}:cr,lu=or(function(n,r,t){De.call(n,t)?n[t]++:n[t]=1}),cu=or(function(n,r,t){(De.call(n,t)?n[t]:n[t]=[]).push(r)}),pu=or(function(n,r,t){n[t]=r}),su=Zr,vu=Gr,hu=lr(hu=ge.now)&&hu||function(){return(new ge).getTime()},gu=8==Ve(_+"08")?Ve:function(n,r){return Ve($r(n)?n.replace(R,""):n,r||0)};return h.after=Dt,h.assign=uu,h.at=Ur,h.bind=Tt,h.bindAll=$t,h.bindKey=Ft,h.chain=fe,h.compact=pt,h.compose=Bt,h.constant=Ht,h.countBy=lu,h.create=gr,h.createCallback=Jt,h.curry=Wt,h.debounce=qt,h.defaults=ou,h.defer=zt,h.delay=Lt,h.difference=st,h.filter=Gr,h.flatten=yt,h.forEach=Qr,h.forEachRight=Xr,h.forIn=au,h.forInRight=br,h.forOwn=iu,h.forOwnRight=dr,h.functions=_r,h.groupBy=cu,h.indexBy=pu,h.initial=bt,h.intersection=dt,h.invert=jr,h.invoke=Yr,h.keys=Ze,h.map=Zr,h.mapValues=Br,h.max=nt,h.memoize=Pt,h.merge=Wr,h.min=rt,h.omit=qr,h.once=Kt,h.pairs=zr,h.partial=Ut,h.partialRight=Mt,h.pick=Lr,h.pluck=su,h.property=re,h.pull=jt,h.range=kt,h.reject=ut,h.remove=xt,h.rest=Ct,h.shuffle=at,h.sortBy=lt,h.tap=le,h.throttle=Vt,h.times=oe,h.toArray=ct,h.transform=Pr,h.union=Nt,h.uniq=Rt,h.values=Kr,h.where=vu,h.without=Et,h.wrap=Gt,h.xor=It,h.zip=St,h.zipObject=At,h.collect=Zr,h.drop=Ct,h.each=Qr,h.eachRight=Xr,h.extend=uu,h.methods=_r,h.object=At,h.select=Gr,h.tail=Ct,h.unique=Rt,h.unzip=St,Yt(h),h.clone=vr,h.cloneDeep=hr,h.contains=Mr,h.escape=Qt,h.every=Vr,h.find=Hr,h.findIndex=vt,h.findKey=yr,h.findLast=Jr,h.findLastIndex=ht,h.findLastKey=mr,h.has=wr,h.identity=Xt,h.indexOf=mt,h.isArguments=sr,h.isArray=Xe,h.isBoolean=kr,h.isDate=xr,h.isElement=Cr,h.isEmpty=Or,h.isEqual=Nr,h.isFinite=Rr,h.isFunction=Er,h.isNaN=Sr,h.isNull=Ar,h.isNumber=Dr,h.isObject=Ir,h.isPlainObject=fu,h.isRegExp=Tr,h.isString=$r,h.isUndefined=Fr,h.lastIndexOf=wt,h.mixin=Yt,h.noConflict=Zt,h.noop=ne,h.now=hu,h.parseInt=gu,h.random=te,h.reduce=tt,h.reduceRight=et,h.result=ee,h.runInContext=s,h.size=it,h.some=ft,h.sortedIndex=Ot,h.template=ue,h.unescape=ae,h.uniqueId=ie,h.all=Vr,h.any=ft,h.detect=Hr,h.findWhere=Hr,h.foldl=tt,h.foldr=et,h.include=Mr,h.inject=tt,Yt(function(){var n={};return iu(h,function(r,t){h.prototype[t]||(n[t]=r)}),n}(),!1),h.first=gt,h.last=_t,h.sample=ot,h.take=gt,h.head=gt,iu(h,function(n,r){var t="sample"!==r;h.prototype[r]||(h.prototype[r]=function(r,e){var u=this.__chain__,o=n(this.__wrapped__,r,e);return u||null!=r&&(!e||t&&"function"==typeof r)?new g(o,u):o})}),h.VERSION="2.4.1",h.prototype.chain=ce,h.prototype.toString=pe,h.prototype.value=se,h.prototype.valueOf=se,Qr(["join","pop","shift"],function(n){var r=ke[n];h.prototype[n]=function(){var n=this.__chain__,t=r.apply(this.__wrapped__,arguments);return n?new g(t,n):t}}),Qr(["push","reverse","sort","unshift"],function(n){var r=ke[n];h.prototype[n]=function(){return r.apply(this.__wrapped__,arguments),this}}),Qr(["concat","slice","splice"],function(n){var r=ke[n];h.prototype[n]=function(){return new g(r.apply(this.__wrapped__,arguments),this.__chain__)}}),h}var v,h=[],g=[],y=0,m=+new Date+"",b=75,d=40,_=" 	\f¬†Ôªø\n\r\u2028\u2029·öÄ·†é‚ÄÄ‚ÄÅ‚ÄÇ‚ÄÉ‚ÄÑ‚ÄÖ‚ÄÜ‚Äá‚Äà‚Äâ‚Ää‚ÄØ‚Åü„ÄÄ",w=/\b__p \+= '';/g,j=/\b(__p \+=) '' \+/g,k=/(__e\(.*?\)|\b__t\)) \+\n'';/g,x=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,C=/\w*$/,O=/^\s*function[ \n\r\t]+\w/,N=/<%=([\s\S]+?)%>/g,R=RegExp("^["+_+"]*0+(?=.$)"),E=/($^)/,I=/\bthis\b/,S=/['\n\r\t\u2028\u2029\\]/g,A=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],D=0,T="[object Arguments]",$="[object Array]",F="[object Boolean]",B="[object Date]",W="[object Function]",q="[object Number]",z="[object Object]",L="[object RegExp]",P="[object String]",K={};K[W]=!1,K[T]=K[$]=K[F]=K[B]=K[q]=K[z]=K[L]=K[P]=!0;var U={leading:!1,maxWait:0,trailing:!1},M={configurable:!1,enumerable:!1,value:null,writable:!1},V={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},G={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},H=V[typeof window]&&window||this,J=V[typeof exports]&&exports&&!exports.nodeType&&exports,Q=V[typeof module]&&module&&!module.nodeType&&module,X=Q&&Q.exports===J&&J,Y=V[typeof global]&&global;!Y||Y.global!==Y&&Y.window!==Y||(H=Y);var Z=s();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(H._=Z,define(function(){return Z})):J&&Q?X?(Q.exports=Z)._=Z:J._=Z:H._=Z}).call(this);
},{}],"/home/vadzim/v/work/nerojs/node_modules/morgan/index.js":[function(require,module,exports){
function compile(e){if("function"==typeof e)return e;if("string"!=typeof e)throw new TypeError("argument format must be a function or string");var t=e.replace(/"/g,'\\"'),r='  return "'+t.replace(/:([-\w]{2,})(?:\[([^\]]+)\])?/g,function(e,t,r){return'"\n    + (tokens["'+t+'"](req, res, '+String(JSON.stringify(r))+') || "-") + "'})+'";';return new Function("tokens, req, res",r)}function clfdate(e){var t=e.getUTCDate(),r=e.getUTCHours(),n=e.getUTCMinutes(),o=e.getUTCSeconds(),s=e.getUTCFullYear(),u=clfmonth[e.getUTCMonth()];return pad2(t)+"/"+u+"/"+s+":"+pad2(r)+":"+pad2(n)+":"+pad2(o)+" +0000"}function getip(e){return e.ip||e._remoteAddress||e.connection&&e.connection.remoteAddress||void 0}function pad2(e){var t=String(e);return(1===t.length?"0":"")+t}var auth=require("basic-auth"),debug=require("debug")("morgan"),deprecate=require("depd")("morgan"),onFinished=require("on-finished"),clfmonth=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],defaultBufferDuration=1e3;exports=module.exports=function(e,t){"object"==typeof e&&(t=e,e=t.format||"default",deprecate("morgan(options): use morgan("+("string"==typeof e?JSON.stringify(e):"format")+", options) instead")),void 0===e&&deprecate("undefined format: specify a format"),t=t||{};var r=t.immediate,n=t.skip||function(){return!1},o=compile(exports[e]||e||exports.default),s=t.buffer,u=t.stream||process.stdout;if(s){deprecate("buffer option");var i=u,a=[],f=null,d="number"==typeof s?s:defaultBufferDuration,p=function(){f=null,a.length&&(i.write(a.join("")),a.length=0)};u={write:function(e){null===f&&(f=setTimeout(p,d)),a.push(e)}}}return function(e,t,s){function i(){if(n(e,t))return void debug("skip request");var r=o(exports,e,t);return null==r?void debug("skip line"):(debug("log request"),void u.write(r+"\n"))}e._startAt=process.hrtime(),e._startTime=new Date,e._remoteAddress=getip(e),r?i():onFinished(t,i),s()}},exports.token=function(e,t){return exports[e]=t,this},exports.format=function(e,t){return exports[e]=t,this},exports.format("combined",':remote-addr - :remote-user [:date[clf]] ":method :url HTTP/:http-version" :status :res[content-length] ":referrer" ":user-agent"'),exports.format("common",':remote-addr - :remote-user [:date[clf]] ":method :url HTTP/:http-version" :status :res[content-length]'),exports.format("default",':remote-addr - :remote-user [:date] ":method :url HTTP/:http-version" :status :res[content-length] ":referrer" ":user-agent"'),deprecate.property(exports,"default","default format: use combined format"),exports.format("short",":remote-addr :remote-user :method :url HTTP/:http-version :status :res[content-length] - :response-time ms"),exports.format("tiny",":method :url :status :res[content-length] - :response-time ms"),exports.format("dev",function(e,t,r){var n=32,o=r.statusCode;o>=500?n=31:o>=400?n=33:o>=300&&(n=36);var s=compile("[0m:method :url ["+n+"m:status [0m:response-time ms - :res[content-length][0m");return s(e,t,r)}),exports.token("url",function(e){return e.originalUrl||e.url}),exports.token("method",function(e){return e.method}),exports.token("response-time",function(e,t){if(!t._header||!e._startAt)return"";var r=process.hrtime(e._startAt),n=1e3*r[0]+1e-6*r[1];return n.toFixed(3)}),exports.token("date",function(e,t,r){r=r||"web";var n=new Date;switch(r){case"clf":return clfdate(n);case"iso":return n.toISOString();case"web":return n.toUTCString()}}),exports.token("status",function(e,t){return t._header?t.statusCode:null}),exports.token("referrer",function(e){return e.headers.referer||e.headers.referrer}),exports.token("remote-addr",getip),exports.token("remote-user",function(e){var t=auth(e),r=t&&t.name||"-";return r}),exports.token("http-version",function(e){return e.httpVersionMajor+"."+e.httpVersionMinor}),exports.token("user-agent",function(e){return e.headers["user-agent"]}),exports.token("req",function(e,t,r){return e.headers[r.toLowerCase()]}),exports.token("res",function(e,t,r){return(t._headers||{})[r.toLowerCase()]});
},{"basic-auth":"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/basic-auth/index.js","debug":"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/debug/browser.js","depd":"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/depd/index.js","on-finished":"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/on-finished/index.js"}],"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/basic-auth/index.js":[function(require,module,exports){
module.exports=function(e){e=e.req||e;var a=e.headers.authorization;if(a){var r=a.split(" ");if("basic"==r[0].toLowerCase()&&r[1]&&(a=r[1],a=new Buffer(a,"base64").toString(),a=a.match(/^([^:]*):(.*)$/)))return{name:a[1],pass:a[2]}}};
},{}],"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/debug/browser.js":[function(require,module,exports){
function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function formatArgs(){var o=arguments,e=this.useColors;if(o[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+o[0]+(e?"%c ":" ")+"+"+exports.humanize(this.diff),!e)return o;var r="color: "+this.color;o=[o[0],r,"color: inherit"].concat(Array.prototype.slice.call(o,1));var t=0,n=0;return o[0].replace(/%[a-z%]/g,function(o){"%%"!==o&&(t++,"%c"===o&&(n=t))}),o.splice(n,0,r),o}function log(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(o){try{null==o?localStorage.removeItem("debug"):localStorage.debug=o}catch(e){}}function load(){var o;try{o=localStorage.debug}catch(e){}return o}exports=module.exports=require("./debug"),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(o){return JSON.stringify(o)},exports.enable(load());
},{"./debug":"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/debug/debug.js"}],"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/debug/debug.js":[function(require,module,exports){
function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(e){function r(){}function o(){var e=o,r=+new Date,s=r-(prevTime||r);e.diff=s,e.prev=prevTime,e.curr=r,prevTime=r,null==e.useColors&&(e.useColors=exports.useColors()),null==e.color&&e.useColors&&(e.color=selectColor());var t=Array.prototype.slice.call(arguments);t[0]=exports.coerce(t[0]),"string"!=typeof t[0]&&(t=["%o"].concat(t));var n=0;t[0]=t[0].replace(/%([a-z%])/g,function(r,o){if("%%"===r)return r;n++;var s=exports.formatters[o];if("function"==typeof s){var p=t[n];r=s.call(e,p),t.splice(n,1),n--}return r}),"function"==typeof exports.formatArgs&&(t=exports.formatArgs.apply(e,t));var p=o.log||exports.log||console.log.bind(console);p.apply(e,t)}r.enabled=!1,o.enabled=!0;var s=exports.enabled(e)?o:r;return s.namespace=e,s}function enable(e){exports.save(e);for(var r=(e||"").split(/[\s,]+/),o=r.length,s=0;o>s;s++)r[s]&&(e=r[s].replace(/\*/g,".*?"),"-"===e[0]?exports.skips.push(new RegExp("^"+e.substr(1)+"$")):exports.names.push(new RegExp("^"+e+"$")))}function disable(){exports.enable("")}function enabled(e){var r,o;for(r=0,o=exports.skips.length;o>r;r++)if(exports.skips[r].test(e))return!1;for(r=0,o=exports.names.length;o>r;r++)if(exports.names[r].test(e))return!0;return!1}function coerce(e){return e instanceof Error?e.stack||e.message:e}exports=module.exports=debug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=require("ms"),exports.names=[],exports.skips=[],exports.formatters={};var prevColor=0,prevTime;
},{"ms":"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/debug/node_modules/ms/index.js"}],"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/debug/node_modules/ms/index.js":[function(require,module,exports){
function parse(e){var r=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(r){var a=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"y":return a*y;case"days":case"day":case"d":return a*d;case"hours":case"hour":case"h":return a*h;case"minutes":case"minute":case"m":return a*m;case"seconds":case"second":case"s":return a*s;case"ms":return a}}}function short(e){return e>=d?Math.round(e/d)+"d":e>=h?Math.round(e/h)+"h":e>=m?Math.round(e/m)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function long(e){return plural(e,d,"day")||plural(e,h,"hour")||plural(e,m,"minute")||plural(e,s,"second")||e+" ms"}function plural(s,e,r){return e>s?void 0:1.5*e>s?Math.floor(s/e)+" "+r:Math.ceil(s/e)+" "+r+"s"}var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;module.exports=function(s,e){return e=e||{},"string"==typeof s?parse(s):e.long?long(s):short(s)};
},{}],"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/depd/index.js":[function(require,module,exports){
function containsNamespace(e,r){var t=e.split(/[ ,]+/);r=String(r).toLowerCase();for(var n=0;n<t.length;n++)if((e=t[n])&&("*"===e||e.toLowerCase()===r))return!0;return!1}function convertDataDescriptorToAccessor(e,r){var t=Object.getOwnPropertyDescriptor(e,r),n=t.value;return t.get=function(){return n},t.writable&&(t.set=function(e){return n=e}),delete t.value,delete t.writable,Object.defineProperty(e,r,t),t}function createArgumentsString(e){for(var r="",t=0;e>t;t++)r+=", arg"+t;return r.substr(2)}function createStackString(e){var r=this.name+": "+this.namespace;this.message&&(r+=" deprecated "+this.message);for(var t=0;t<e.length;t++)r+="\n    at "+callSiteToString(e[t]);return r}function depd(e){function r(e){log.call(r,e)}if(!e)throw new TypeError("argument namespace is required");var t=getStack(),n=callSiteLocation(t[1]),a=n[0];return r._file=a,r._ignored=isignored(e),r._namespace=e,r._traced=istraced(e),r._warned=Object.create(null),r.function=wrapfunction,r.property=wrapproperty,r}function isignored(e){if(process.noDeprecation)return!0;var r=process.env.NO_DEPRECATION||"";return containsNamespace(r,e)}function istraced(e){if(process.traceDeprecation)return!0;var r=process.env.TRACE_DEPRECATION||"";return containsNamespace(r,e)}function log(e,r){var t=0!==eventListenerCount(process,"deprecation");if(t||!this._ignored){var n,a,i,o=0,c=!1,s=getStack(),u=this._file;for(r?(i=callSiteLocation(s[1]),i.name=r.name,u=i[0]):(o=2,r=callSiteLocation(s[o]),i=r);o<s.length;o++)if(n=callSiteLocation(s[o]),a=n[0],a===u)c=!0;else if(a===this._file)u=this._file;else if(c)break;var l=n?r.join(":")+"__"+n.join(":"):void 0;if(!(void 0!==l&&l in this._warned)){if(this._warned[l]=!0,e||(e=defaultMessage(i!==r&&i.name?i:r)),t){var f=DeprecationError(this._namespace,e,s.slice(o));return void process.emit("deprecation",f)}var p=process.stderr.isTTY?formatColor:formatPlain,m=p.call(this,e,n,s.slice(o));process.stderr.write(m+"\n","utf8")}}}function callSiteLocation(e){var r=e.getFileName()||"<anonymous>",t=e.getLineNumber(),n=e.getColumnNumber();e.isEval()&&(r=e.getEvalOrigin()+", "+r);var a=[r,t,n];return a.callSite=e,a.name=e.getFunctionName(),a}function defaultMessage(e){var r=e.callSite,t=e.name,n=r.getTypeName();return t||(t="<anonymous@"+formatLocation(e)+">"),"Function"===n&&(n=r.getThis().name||n),r.getMethodName()?n+"."+t:t}function formatPlain(e,r,t){var n=(new Date).toUTCString(),a=n+" "+this._namespace+" deprecated "+e;if(this._traced){for(var i=0;i<t.length;i++)a+="\n    at "+callSiteToString(t[i]);return a}return r&&(a+=" at "+formatLocation(r)),a}function formatColor(e,r,t){var n="[36;1m"+this._namespace+"[22;39m [33;1mdeprecated[22;39m [0m"+e+"[39m";if(this._traced){for(var a=0;a<t.length;a++)n+="\n    [36mat "+callSiteToString(t[a])+"[39m";return n}return r&&(n+=" [36m"+formatLocation(r)+"[39m"),n}function formatLocation(e){return relative(basePath,e[0])+":"+e[1]+":"+e[2]}function getStack(){var e=Error.stackTraceLimit,r={},t=Error.prepareStackTrace;Error.prepareStackTrace=prepareObjectStackTrace,Error.stackTraceLimit=Math.max(10,e),Error.captureStackTrace(r);var n=r.stack.slice(1);return Error.prepareStackTrace=t,Error.stackTraceLimit=e,n}function prepareObjectStackTrace(e,r){return r}function wrapfunction(fn,message){if("function"!=typeof fn)throw new TypeError("argument fn must be a function");var args=createArgumentsString(fn.length),deprecate=this,stack=getStack(),site=callSiteLocation(stack[1]);site.name=fn.name;var deprecatedfn=eval("(function ("+args+') {\n"use strict"\nlog.call(deprecate, message, site)\nreturn fn.apply(this, arguments)\n})');return deprecatedfn}function wrapproperty(e,r,t){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(e,r);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable");var a=this,i=getStack(),o=callSiteLocation(i[1]);o.name=r,"value"in n&&(n=convertDataDescriptorToAccessor(e,r,t));var c=n.get,s=n.set;"function"==typeof c&&(n.get=function(){return log.call(a,t,o),c.apply(this,arguments)}),"function"==typeof s&&(n.set=function(){return log.call(a,t,o),s.apply(this,arguments)}),Object.defineProperty(e,r,n)}function DeprecationError(e,r,t){var n,a=new Error;return Object.defineProperty(a,"constructor",{value:DeprecationError}),Object.defineProperty(a,"message",{configurable:!0,enumerable:!1,value:r,writable:!0}),Object.defineProperty(a,"name",{enumerable:!1,configurable:!0,value:"DeprecationError",writable:!0}),Object.defineProperty(a,"namespace",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(a,"stack",{configurable:!0,enumerable:!1,get:function(){return void 0!==n?n:n=createStackString.call(this,t)},set:function(e){n=e}}),a}var callSiteToString=require("./lib/compat").callSiteToString,EventEmitter=require("events").EventEmitter,relative=require("path").relative;module.exports=depd;var basePath=process.cwd(),eventListenerCount=EventEmitter.listenerCount||function(e,r){return e.listeners(r).length};
},{"./lib/compat":"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/depd/lib/compat/index.js","events":false,"path":false}],"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/depd/lib/compat/buffer-concat.js":[function(require,module,exports){
function bufferConcat(e){for(var n=0,r=0,f=e.length;f>r;r++)n+=e[r].length;for(var t=new Buffer(n),o=0,r=0,f=e.length;f>r;r++)e[r].copy(t,o),o+=e[r].length;return t}module.exports=bufferConcat;
},{}],"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/depd/lib/compat/callsite-tostring.js":[function(require,module,exports){
function callSiteFileLocation(e){var t,n="";if(e.isNative()?n="native":e.isEval()?(t=e.getScriptNameOrSourceURL(),t||(n=e.getEvalOrigin())):t=e.getFileName(),t){n+=t;var r=e.getLineNumber();if(null!=r){n+=":"+r;var o=e.getColumnNumber();o&&(n+=":"+o)}}return n||"unknown source"}function callSiteToString(e){var t=!0,n=callSiteFileLocation(e),r=e.getFunctionName(),o=e.isConstructor(),i=!(e.isToplevel()||o),a="";if(i){var l=e.getMethodName(),u=getConstructorName(e);r?(u&&0!==r.indexOf(u)&&(a+=u+"."),a+=r,l&&r.lastIndexOf("."+l)!==r.length-l.length-1&&(a+=" [as "+l+"]")):a+=u+"."+(l||"<anonymous>")}else o?a+="new "+(r||"<anonymous>"):r?a+=r:(t=!1,a+=n);return t&&(a+=" ("+n+")"),a}function getConstructorName(e){var t=e.receiver;return t.constructor&&t.constructor.name||null}module.exports=callSiteToString;
},{}],"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/depd/lib/compat/index.js":[function(require,module,exports){
function lazyProperty(r,e,t){function a(){var a=t();return Object.defineProperty(r,e,{configurable:!0,enumerable:!0,value:a}),a}Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:a})}function toString(r){return r.toString()}lazyProperty(module.exports,"bufferConcat",function(){return Buffer.concat||require("./buffer-concat")}),lazyProperty(module.exports,"callSiteToString",function(){function r(r,e){return e}var e=Error.stackTraceLimit,t={},a=Error.prepareStackTrace;Error.prepareStackTrace=r,Error.stackTraceLimit=2,Error.captureStackTrace(t);var c=t.stack.slice();return Error.prepareStackTrace=a,Error.stackTraceLimit=e,c[0].toString?toString:require("./callsite-tostring")});
},{"./buffer-concat":"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/depd/lib/compat/buffer-concat.js","./callsite-tostring":"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/depd/lib/compat/callsite-tostring.js"}],"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/on-finished/index.js":[function(require,module,exports){
function onFinished(e,n){return isFinished(e)!==!1?(defer(n),e):(attachListener(e,n),e)}function isFinished(e){var n=e.socket;return"boolean"==typeof e.finished?Boolean(e.finished||n&&!n.writable):"boolean"==typeof e.complete?Boolean(!n||e.complete||!n.readable):void 0}function attachFinishedListener(e,n){function i(e){o.cancel(),s.cancel(),r=!0,n(e)}function t(n){e.removeListener("socket",t),r||o===s&&(s=first([[n,"error","close"]],i))}var o,s,r=!1;return o=s=first([[e,"end","finish"]],i),e.socket?void t(e.socket):(e.on("socket",t),void(void 0===e.socket&&patchAssignSocket(e,t)))}function attachListener(e,n){var i=e.__onFinished;i&&i.queue||(i=e.__onFinished=createListener(e),attachFinishedListener(e,i)),i.queue.push(n)}function createListener(e){function n(i){if(e.__onFinished===n&&(e.__onFinished=null),n.queue){var t=n.queue;n.queue=null;for(var o=0;o<t.length;o++)t[o](i)}}return n.queue=[],n}function patchAssignSocket(e,n){var i=e.assignSocket;"function"==typeof i&&(e.assignSocket=function(e){i.call(this,e),n(e)})}module.exports=onFinished,module.exports.isFinished=isFinished;var first=require("ee-first"),defer="function"==typeof setImmediate?setImmediate:function(e){process.nextTick(e.bind.apply(e,arguments))};
},{"ee-first":"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/on-finished/node_modules/ee-first/index.js"}],"/home/vadzim/v/work/nerojs/node_modules/morgan/node_modules/on-finished/node_modules/ee-first/index.js":[function(require,module,exports){
function listener(r,e){return function(n){for(var t=new Array(arguments.length),a=this,o="error"===r?n:null,u=0;u<t.length;u++)t[u]=arguments[u];e(o,a,r,t)}}module.exports=function(r,e){function n(){t(),e.apply(null,arguments)}function t(){for(var r,e=0;e<o.length;e++)r=o[e],r.ee.removeListener(r.event,r.fn)}function a(r){e=r}if(!Array.isArray(r))throw new TypeError("arg must be an array of [ee, events...] arrays");for(var o=[],u=0;u<r.length;u++){var s=r[u];if(!Array.isArray(s)||s.length<2)throw new TypeError("each array member must be [ee, events...]");for(var f=s[0],l=1;l<s.length;l++){var i=s[l],h=listener(i,n);f.on(i,h),o.push({ee:f,event:i,fn:h})}}return a.cancel=t,a};
},{}],"/home/vadzim/v/work/nerojs/node_modules/traceur/bin/traceur-runtime.js":[function(require,module,exports){
!function(t){"use strict";function e(t){return{configurable:!0,enumerable:!1,value:t,writable:!0}}function r(){return"__$"+Math.floor(1e9*Math.random())+"$"+ ++q+"$__"}function n(t){return L[t]}function i(){var t=r();return L[t]=!0,t}function u(t){return"object"==typeof t&&t instanceof a}function o(t){return u(t)?"symbol":typeof t}function c(t){var e=new a(t);if(!(this instanceof c))return e;throw new TypeError("Symbol cannot be new'ed")}function a(t){var e=r();N(this,K,{value:this}),N(this,Y,{value:e}),N(this,W,{value:t}),l(this),B[e]=this}function s(t){var e=t[Q];return e&&e.self===t?e:D(t)?(J.hash.value=Z++,J.self.value=t,X.value=k(null,J),N(t,Q,X),X.value):void 0}function l(t){return s(t),A.apply(this,arguments)}function f(t){return s(t),U.apply(this,arguments)}function h(t){return s(t),V.apply(this,arguments)}function m(t){return B[t]||L[t]}function p(t){return u(t)?t[Y]:t}function b(t){for(var e=[],r=0;r<t.length;r++)m(t[r])||e.push(t[r]);return e}function g(t){return b(F(t))}function y(t){return b(G(t))}function v(t){for(var e=[],r=F(t),n=0;n<r.length;n++){var i=B[r[n]];i&&e.push(i)}return e}function d(t,e){return C(t,p(e))}function j(t){return H.call(this,p(t))}function O(e){return t.$traceurRuntime.options[e]}function w(t,e,r){return u(e)&&(e=e[Y]),N(t,e,r),t}function S(t){N(t,"defineProperty",{value:w}),N(t,"getOwnPropertyNames",{value:g}),N(t,"getOwnPropertyDescriptor",{value:d}),N(t.prototype,"hasOwnProperty",{value:j}),N(t,"freeze",{value:l}),N(t,"preventExtensions",{value:f}),N(t,"seal",{value:h}),N(t,"keys",{value:y})}function _(t){for(var e=1;e<arguments.length;e++)for(var r=F(arguments[e]),n=0;n<r.length;n++){var i=r[n];m(i)||!function(e,r){N(t,r,{get:function(){return e[r]},enumerable:!0})}(arguments[e],r[n])}return t}function R(t){return null!=t&&("object"==typeof t||"function"==typeof t)}function M(t){if(null==t)throw I();return $(t)}function P(t){if(null==t)throw new TypeError("Value cannot be converted to an Object");return t}function E(t,e){t.Symbol||(t.Symbol=e,Object.getOwnPropertySymbols=v),t.Symbol.iterator||(t.Symbol.iterator=e("Symbol.iterator"))}function x(t){E(t,c),t.Reflect=t.Reflect||{},t.Reflect.global=t.Reflect.global||t,S(t.Object)}if(!t.$traceurRuntime){var $=Object,I=TypeError,k=$.create,T=$.defineProperties,N=$.defineProperty,A=$.freeze,C=$.getOwnPropertyDescriptor,F=$.getOwnPropertyNames,G=$.keys,H=$.prototype.hasOwnProperty,U=($.prototype.toString,Object.preventExtensions),V=Object.seal,D=Object.isExtensible,z=e,q=0,Y=r(),W=r(),K=r(),B=k(null),L=k(null);N(c.prototype,"constructor",e(c)),N(c.prototype,"toString",z(function(){var t=this[K];return t[Y]})),N(c.prototype,"valueOf",z(function(){var t=this[K];if(!t)throw TypeError("Conversion from symbol to string");return O("symbols")?t:t[Y]})),N(a.prototype,"constructor",e(c)),N(a.prototype,"toString",{value:c.prototype.toString,enumerable:!1}),N(a.prototype,"valueOf",{value:c.prototype.valueOf,enumerable:!1});var Q=i(),X={value:void 0},J={hash:{value:void 0},self:{value:void 0}},Z=0;l(a.prototype),x(t),t.$traceurRuntime={checkObjectCoercible:P,createPrivateName:i,defineProperties:T,defineProperty:N,exportStar:_,getOwnHashObject:s,getOwnPropertyDescriptor:C,getOwnPropertyNames:F,isObject:R,isPrivateName:n,isSymbolString:m,keys:G,options:{},setupGlobals:x,toObject:M,toProperty:p,"typeof":o}}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this),function(){function t(t,e,r,n,i,u,o){var c=[];return t&&c.push(t,":"),r&&(c.push("//"),e&&c.push(e,"@"),c.push(r),n&&c.push(":",n)),i&&c.push(i),u&&c.push("?",u),o&&c.push("#",o),c.join("")}function e(t){return t.match(c)}function r(t){if("/"===t)return"/";for(var e="/"===t[0]?"/":"",r="/"===t.slice(-1)?"/":"",n=t.split("/"),i=[],u=0,o=0;o<n.length;o++){var c=n[o];switch(c){case"":case".":break;case"..":i.length?i.pop():u++;break;default:i.push(c)}}if(!e){for(;u-->0;)i.unshift("..");0===i.length&&i.push(".")}return e+i.join("/")+r}function n(e){var n=e[a.PATH]||"";return n=r(n),e[a.PATH]=n,t(e[a.SCHEME],e[a.USER_INFO],e[a.DOMAIN],e[a.PORT],e[a.PATH],e[a.QUERY_DATA],e[a.FRAGMENT])}function i(t){var r=e(t);return n(r)}function u(t,r){var i=e(r),u=e(t);if(i[a.SCHEME])return n(i);i[a.SCHEME]=u[a.SCHEME];for(var o=a.SCHEME;o<=a.PORT;o++)i[o]||(i[o]=u[o]);if("/"==i[a.PATH][0])return n(i);var c=u[a.PATH],s=c.lastIndexOf("/");return c=c.slice(0,s+1)+i[a.PATH],i[a.PATH]=c,n(i)}function o(t){if(!t)return!1;if("/"===t[0])return!0;var r=e(t);return r[a.SCHEME]?!0:!1}var c=new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),a={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7};$traceurRuntime.canonicalizeUrl=i,$traceurRuntime.isAbsolute=o,$traceurRuntime.removeDotSegments=r,$traceurRuntime.resolveUrl=u}(),function(t){"use strict";function e(t,e){this.url=t,this.value_=e}function r(t,e){this.message=this.constructor.name+": "+this.stripCause(e)+" in "+t,this.stack=e instanceof r||!e.stack?"":this.stripStack(e.stack)}function n(t,e){var r=[],n=e-3;0>n&&(n=0);for(var i=n;e>i;i++)r.push(t[i]);return r}function i(t,e){var r=e+1;r>t.length-1&&(r=t.length-1);for(var n=[],i=e;r>=i;i++)n.push(t[i]);return n}function u(t){for(var e="",r=0;t-1>r;r++)e+="-";return e}function o(t,r){e.call(this,t,null),this.func=r}function c(t){if(t){var e=y.normalize(t);return p[e]}}function a(t){var e=arguments[1],r=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(n){var i,u;if(e===g){var o=Object.getOwnPropertyDescriptor(t,n);o.get&&(i=o.get)}i||(u=t[n],i=function(){return u}),Object.defineProperty(r,n,{get:i,enumerable:!0})}),Object.preventExtensions(r),r}var s,l=$traceurRuntime,f=l.canonicalizeUrl,h=l.resolveUrl,m=l.isAbsolute,p=Object.create(null);s=t.location&&t.location.href?h(t.location.href,"./"):"",r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r.prototype.stripError=function(t){return t.replace(/.*Error:/,this.constructor.name+":")},r.prototype.stripCause=function(t){return t?t.message?this.stripError(t.message):t+"":""},r.prototype.loadedBy=function(t){this.stack+="\n loaded by "+t},r.prototype.stripStack=function(t){var e=[];return t.split("\n").some(function(t){return/UncoatedModuleInstantiator/.test(t)?!0:void e.push(t)}),e[0]=this.stripError(e[0]),e.join("\n")},o.prototype=Object.create(e.prototype),o.prototype.getUncoatedModule=function(){if(this.value_)return this.value_;try{var e;return void 0!==typeof $traceurRuntime&&$traceurRuntime.require&&(e=$traceurRuntime.require.bind(null,this.url)),this.value_=this.func.call(t,e)}catch(o){if(o instanceof r)throw o.loadedBy(this.url),o;if(o.stack){var c=this.func.toString().split("\n"),a=[];o.stack.split("\n").some(function(t){if(t.indexOf("UncoatedModuleInstantiator.getUncoatedModule")>0)return!0;var e=/(at\s[^\s]*\s).*>:(\d*):(\d*)\)/.exec(t);if(e){var r=parseInt(e[2],10);a=a.concat(n(c,r)),a.push(u(e[3])+"^"),a=a.concat(i(c,r)),a.push("= = = = = = = = =")}else a.push(t)}),o.stack=a.join("\n")}throw new r(this.url,o)}};var b=Object.create(null),g={},y={normalize:function(t,e){if("string"!=typeof t)throw new TypeError("module name must be a string, not "+typeof t);if(m(t))return f(t);if(/[^\.]\/\.\.\//.test(t))throw new Error("module name embeds /../: "+t);return"."===t[0]&&e?h(e,t):f(t)},get:function(t){var e=c(t);if(!e)return void 0;var r=b[e.url];return r?r:(r=a(e.getUncoatedModule(),g),b[e.url]=r)},set:function(t,e){t=String(t),p[t]=new o(t,function(){return e}),b[t]=e},get baseURL(){return s},set baseURL(t){s=String(t)},registerModule:function(t,e,r){var n=y.normalize(t);if(p[n])throw new Error("duplicate module named "+n);p[n]=new o(n,r)},bundleStore:Object.create(null),register:function(t,e,r){e&&(e.length||r.length)?this.bundleStore[t]={deps:e,execute:function(){var t=arguments,n={};e.forEach(function(e,r){return n[e]=t[r]});var i=r.call(this,n);return i.execute.call(this),i.exports}}:this.registerModule(t,e,r)},getAnonymousModule:function(e){return new a(e.call(t),g)},getForTesting:function(t){var e=this;return this.testingPrefix_||Object.keys(b).some(function(t){var r=/(traceur@[^\/]*\/)/.exec(t);return r?(e.testingPrefix_=r[1],!0):void 0}),this.get(this.testingPrefix_+t)}},v=new a({ModuleStore:y});y.set("@traceur/src/runtime/ModuleStore",v),y.set("@traceur/src/runtime/ModuleStore.js",v);var d=$traceurRuntime.setupGlobals;$traceurRuntime.setupGlobals=function(t){d(t)},$traceurRuntime.ModuleStore=y,t.System={register:y.register.bind(y),registerModule:y.registerModule.bind(y),get:y.get,set:y.set,normalize:y.normalize},$traceurRuntime.getModuleImpl=function(t){var e=c(t);return e&&e.getUncoatedModule()}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this),System.registerModule("traceur-runtime@0.0.84/src/runtime/classes.js",[],function(){"use strict";function t(t,e){var r=m(t);do{var n=h(r,e);if(n)return n;r=m(r)}while(r);return void 0}function e(t){return t.__proto__}function r(e,r,n){var i=t(r,n);return i?i.get?i.get.call(e):i.value:void 0}function n(e,r,n,i){var u=t(r,n);if(u&&u.set)return u.set.call(e,i),i;throw a("super has no setter '"+n+"'.")}function i(t){for(var e={},r=b(t),n=0;n<r.length;n++){var i=r[n];e[i]=h(t,i)}for(var u=g(t),n=0;n<u.length;n++){var o=u[n];e[$traceurRuntime.toProperty(o)]=h(t,$traceurRuntime.toProperty(o))}return e}function u(t,e,r,n){return f(e,"constructor",{value:t,configurable:!0,enumerable:!1,writable:!0}),arguments.length>3?("function"==typeof n&&(t.__proto__=n),t.prototype=s(o(n),i(e))):t.prototype=e,f(t,"prototype",{configurable:!1,writable:!1}),l(t,i(r))}function o(t){if("function"==typeof t){var e=t.prototype;if(c(e)===e||null===e)return t.prototype;throw new a("super prototype must be an Object or null")}if(null===t)return null;throw new a("Super expression must either be null or a function, not "+typeof t+".")}var c=Object,a=TypeError,s=c.create,l=$traceurRuntime.defineProperties,f=$traceurRuntime.defineProperty,h=$traceurRuntime.getOwnPropertyDescriptor,m=($traceurRuntime.getOwnPropertyNames,Object.getPrototypeOf),p=Object,b=p.getOwnPropertyNames,g=p.getOwnPropertySymbols;return $traceurRuntime.createClass=u,$traceurRuntime.superConstructor=e,$traceurRuntime.superGet=r,$traceurRuntime.superSet=n,{}}),System.registerModule("traceur-runtime@0.0.84/src/runtime/destructuring.js",[],function(){"use strict";function t(t){for(var e,r=[],n=0;!(e=t.next()).done;)r[n++]=e.value;return r}return $traceurRuntime.iteratorToArray=t,{}}),System.registerModule("traceur-runtime@0.0.84/src/runtime/generators.js",[],function(){"use strict";function t(t){return{configurable:!0,enumerable:!1,value:t,writable:!0}}function e(t){return new Error("Traceur compiler bug: invalid state in state machine: "+t)}function r(){this.state=0,this.GState=y,this.storedException=void 0,this.finallyFallThrough=void 0,this.sent_=void 0,this.returnValue=void 0,this.oldReturnValue=void 0,this.tryStack_=[]}function n(t,e,r,n){switch(t.GState){case v:throw new Error('"'+r+'" on executing generator');case j:if("next"==r)return{value:void 0,done:!0};if(n===S)return{value:t.returnValue,done:!0};throw n;case y:if("throw"===r){if(t.GState=j,n===S)return{value:t.returnValue,done:!0};throw n}if(void 0!==n)throw g("Sent value to newborn generator");case d:t.GState=v,t.action=r,t.sent=n;var i;try{i=e(t)}catch(u){if(u!==S)throw u;i=t}var o=i===t;return o&&(i=t.returnValue),t.GState=o?j:d,{value:i,done:o}}}function i(){}function u(){}function o(t,e,n){var i=l(t,n),u=new r,o=b(e.prototype);return o[_]=u,o[R]=i,o}function c(t){return t.prototype=b(u.prototype),t.__proto__=u,t}function a(){r.call(this),this.err=void 0;var t=this;t.result=new Promise(function(e,r){t.resolve=e,t.reject=r})}function s(t,e){var r=l(t,e),n=new a;return n.createCallback=function(t){return function(e){n.state=t,n.value=e,r(n)}},n.errback=function(t){f(n,t),r(n)},r(n),n.result}function l(t,e){return function(r){for(;;)try{return t.call(e,r)}catch(n){f(r,n)}}}function f(t,e){t.storedException=e;var r=t.tryStack_[t.tryStack_.length-1];return r?(t.state=e!==S&&void 0!==r.catch?r.catch:r.finally,void(void 0!==r.finallyFallThrough&&(t.finallyFallThrough=r.finallyFallThrough))):void t.handleException(e)}if("object"!=typeof $traceurRuntime)throw new Error("traceur runtime not found.");var h=$traceurRuntime.createPrivateName,m=$traceurRuntime.defineProperties,p=$traceurRuntime.defineProperty,b=Object.create,g=TypeError,y=0,v=1,d=2,j=3,O=-2,w=-3,S={};r.prototype={pushTry:function(t,e){if(null!==e){for(var r=null,n=this.tryStack_.length-1;n>=0;n--)if(void 0!==this.tryStack_[n].catch){r=this.tryStack_[n].catch;break}null===r&&(r=w),this.tryStack_.push({"finally":e,finallyFallThrough:r})}null!==t&&this.tryStack_.push({"catch":t})},popTry:function(){this.tryStack_.pop()},get sent(){return this.maybeThrow(),this.sent_},set sent(t){this.sent_=t},get sentIgnoreThrow(){return this.sent_},maybeThrow:function(){if("throw"===this.action)throw this.action="next",this.sent_},end:function(){switch(this.state){case O:return this;case w:throw this.storedException;default:throw e(this.state)}},handleException:function(t){throw this.GState=j,this.state=O,t},wrapYieldStar:function(t){var e=this;return{next:function(e){return t.next(e)},"throw":function(r){var n;if(r===S){if(t.return){if(n=t.return(e.returnValue),!n.done)return e.returnValue=e.oldReturnValue,n;e.returnValue=n.value}throw r}if(t.throw)return t.throw(r);throw t.return&&t.return(),g("Inner iterator does not have a throw method")}}}};var _=h(),R=h();return i.prototype=u,p(u,"constructor",t(i)),u.prototype={constructor:u,next:function(t){return n(this[_],this[R],"next",t)},"throw":function(t){return n(this[_],this[R],"throw",t)},"return":function(t){return this[_].oldReturnValue=this[_].returnValue,this[_].returnValue=t,n(this[_],this[R],"throw",S)}},m(u.prototype,{constructor:{enumerable:!1},next:{enumerable:!1},"throw":{enumerable:!1},"return":{enumerable:!1}}),Object.defineProperty(u.prototype,Symbol.iterator,t(function(){return this})),a.prototype=b(r.prototype),a.prototype.end=function(){switch(this.state){case O:this.resolve(this.returnValue);break;case w:this.reject(this.storedException);break;default:this.reject(e(this.state))}},a.prototype.handleException=function(){this.state=w},$traceurRuntime.asyncWrap=s,$traceurRuntime.initGeneratorFunction=c,$traceurRuntime.createGeneratorInstance=o,{}}),System.registerModule("traceur-runtime@0.0.84/src/runtime/relativeRequire.js",[],function(){"use strict";function t(t,r){function n(t){return"/"===t.slice(-1)}function i(t){return"/"===t[0]}function u(t){return"."===t[0]}return e=e||"undefined"!=typeof require&&require("path"),n(r)||i(r)?void 0:require(u(r)?e.resolve(e.dirname(t),r):r)}var e;return $traceurRuntime.require=t,{}}),System.registerModule("traceur-runtime@0.0.84/src/runtime/spread.js",[],function(){"use strict";function t(){for(var t,e=[],r=0,n=0;n<arguments.length;n++){var i=$traceurRuntime.checkObjectCoercible(arguments[n]);if("function"!=typeof i[$traceurRuntime.toProperty(Symbol.iterator)])throw new TypeError("Cannot spread non-iterable object.");for(var u=i[$traceurRuntime.toProperty(Symbol.iterator)]();!(t=u.next()).done;)e[r++]=t.value}return e}return $traceurRuntime.spread=t,{}}),System.registerModule("traceur-runtime@0.0.84/src/runtime/type-assertions.js",[],function(){"use strict";function t(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var u=n,o=$traceurRuntime.getOwnHashObject(t).hash;u[o]||(u[o]=Object.create(null)),u=u[o];for(var c=0;c<e.length-1;c++)o=$traceurRuntime.getOwnHashObject(e[c]).hash,u[o]||(u[o]=Object.create(null)),u=u[o];var a=e[e.length-1];return o=$traceurRuntime.getOwnHashObject(a).hash,u[o]||(u[o]=new r(t,e)),u[o]}var e={any:{name:"any"},"boolean":{name:"boolean"},number:{name:"number"},string:{name:"string"},symbol:{name:"symbol"},"void":{name:"void"}},r=function(t,e){this.type=t,this.argumentTypes=e};$traceurRuntime.createClass(r,{},{});var n=Object.create(null);return $traceurRuntime.GenericType=r,$traceurRuntime.genericType=t,$traceurRuntime.type=e,{}}),System.registerModule("traceur-runtime@0.0.84/src/runtime/runtime-modules.js",[],function(){"use strict";return System.get("traceur-runtime@0.0.84/src/runtime/relativeRequire.js"),System.get("traceur-runtime@0.0.84/src/runtime/spread.js"),System.get("traceur-runtime@0.0.84/src/runtime/destructuring.js"),System.get("traceur-runtime@0.0.84/src/runtime/classes.js"),System.get("traceur-runtime@0.0.84/src/runtime/generators.js"),System.get("traceur-runtime@0.0.84/src/runtime/type-assertions.js"),{}}),System.get("traceur-runtime@0.0.84/src/runtime/runtime-modules.js"),System.registerModule("traceur-runtime@0.0.84/src/runtime/polyfills/utils.js",[],function(){"use strict";function t(t){return t>>>0}function e(t){return t&&("object"==typeof t||"function"==typeof t)}function r(t){return"function"==typeof t}function n(t){return"number"==typeof t}function i(t){return t=+t,j(t)?0:0!==t&&d(t)?t>0?v(t):y(t):t}function u(t){var e=i(t);return 0>e?0:w(e,_)}function o(t){return e(t)?t[Symbol.iterator]:void 0}function c(t){return r(t)}function a(t,e){return{value:t,done:e}}function s(t,e,r){e in t||Object.defineProperty(t,e,r)}function l(t,e,r){s(t,e,{value:r,configurable:!0,enumerable:!1,writable:!0})}function f(t,e,r){s(t,e,{value:r,configurable:!1,enumerable:!1,writable:!1})}function h(t,e){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];l(t,n,i)}}function m(t,e){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];f(t,n,i)}}function p(t,e,r){r&&r.iterator&&!t[r.iterator]&&(t["@@iterator"]&&(e=t["@@iterator"]),Object.defineProperty(t,r.iterator,{value:e,configurable:!0,enumerable:!1,writable:!0}))}function b(t){R.push(t)}function g(t){R.forEach(function(e){return e(t)})}var y=Math.ceil,v=Math.floor,d=isFinite,j=isNaN,O=Math.pow,w=Math.min,S=$traceurRuntime.toObject,_=O(2,53)-1,R=[];return{get toObject(){return S},get toUint32(){return t},get isObject(){return e},get isCallable(){return r},get isNumber(){return n},get toInteger(){return i},get toLength(){return u},get checkIterable(){return o},get isConstructor(){return c},get createIteratorResultObject(){return a},get maybeDefine(){return s},get maybeDefineMethod(){return l},get maybeDefineConst(){return f},get maybeAddFunctions(){return h},get maybeAddConsts(){return m},get maybeAddIterator(){return p},get registerPolyfill(){return b},get polyfillAll(){return g}}}),System.registerModule("traceur-runtime@0.0.84/src/runtime/polyfills/Map.js",[],function(){"use strict";function t(t,e){if(i(e)){var r=c(e);return r&&t.objectIndex_[r.hash]}return"string"==typeof e?t.stringIndex_[e]:t.primitiveIndex_[e]}function e(t){t.entries_=[],t.objectIndex_=Object.create(null),t.stringIndex_=Object.create(null),t.primitiveIndex_=Object.create(null),t.deletedCount_=0}function r(t){var e=t,r=e.Object,n=e.Symbol;t.Map||(t.Map=l);var i=t.Map.prototype;void 0===i.entries&&(t.Map=l),i.entries&&(u(i,i.entries,n),u(r.getPrototypeOf((new t.Map).entries()),function(){return this},n))}var n=System.get("traceur-runtime@0.0.84/src/runtime/polyfills/utils.js"),i=n.isObject,u=n.maybeAddIterator,o=n.registerPolyfill,c=$traceurRuntime.getOwnHashObject,a=Object.prototype.hasOwnProperty,s={},l=function(){var t,r,n=arguments[0];if(!i(this))throw new TypeError("Map called on incompatible type");if(a.call(this,"entries_"))throw new TypeError("Map can not be reentrantly initialised");if(e(this),null!==n&&void 0!==n)for(var u=n[$traceurRuntime.toProperty(Symbol.iterator)](),o=void 0;!(o=u.next()).done;){var c=o.value,s=(t=c[$traceurRuntime.toProperty(Symbol.iterator)](),(r=t.next()).done?void 0:r.value),l=(r=t.next()).done?void 0:r.value;this.set(s,l)}};return $traceurRuntime.createClass(l,{get size(){return this.entries_.length/2-this.deletedCount_},get:function(e){var r=t(this,e);return void 0!==r?this.entries_[r+1]:void 0},set:function(e,r){var n=i(e),u="string"==typeof e,o=t(this,e);if(void 0!==o)this.entries_[o+1]=r;else if(o=this.entries_.length,this.entries_[o]=e,this.entries_[o+1]=r,n){var a=c(e),s=a.hash;this.objectIndex_[s]=o}else u?this.stringIndex_[e]=o:this.primitiveIndex_[e]=o;return this},has:function(e){return void 0!==t(this,e)},"delete":function(t){var e,r,n=i(t),u="string"==typeof t;if(n){var o=c(t);o&&(e=this.objectIndex_[r=o.hash],delete this.objectIndex_[r])}else u?(e=this.stringIndex_[t],delete this.stringIndex_[t]):(e=this.primitiveIndex_[t],delete this.primitiveIndex_[t]);return void 0!==e?(this.entries_[e]=s,this.entries_[e+1]=void 0,this.deletedCount_++,!0):!1},clear:function(){e(this)},forEach:function(t){for(var e=arguments[1],r=0;r<this.entries_.length;r+=2){var n=this.entries_[r],i=this.entries_[r+1];n!==s&&t.call(e,i,n,this)}},entries:$traceurRuntime.initGeneratorFunction(function f(){var t,e,r;return $traceurRuntime.createGeneratorInstance(function(n){for(;;)switch(n.state){case 0:t=0,n.state=12;break;case 12:n.state=t<this.entries_.length?8:-2;break;case 4:t+=2,n.state=12;break;case 8:e=this.entries_[t],r=this.entries_[t+1],n.state=9;break;case 9:n.state=e===s?4:6;break;case 6:return n.state=2,[e,r];case 2:n.maybeThrow(),n.state=4;break;default:return n.end()}},f,this)}),keys:$traceurRuntime.initGeneratorFunction(function h(){var t,e,r;return $traceurRuntime.createGeneratorInstance(function(n){for(;;)switch(n.state){case 0:t=0,n.state=12;break;case 12:n.state=t<this.entries_.length?8:-2;break;case 4:t+=2,n.state=12;break;case 8:e=this.entries_[t],r=this.entries_[t+1],n.state=9;break;case 9:n.state=e===s?4:6;break;case 6:return n.state=2,e;case 2:n.maybeThrow(),n.state=4;break;default:return n.end()}},h,this)}),values:$traceurRuntime.initGeneratorFunction(function m(){var t,e,r;return $traceurRuntime.createGeneratorInstance(function(n){for(;;)switch(n.state){case 0:t=0,n.state=12;break;case 12:n.state=t<this.entries_.length?8:-2;break;case 4:t+=2,n.state=12;break;case 8:e=this.entries_[t],r=this.entries_[t+1],n.state=9;break;case 9:n.state=e===s?4:6;break;case 6:return n.state=2,r;case 2:n.maybeThrow(),n.state=4;break;default:return n.end()}},m,this)})},{}),Object.defineProperty(l.prototype,Symbol.iterator,{configurable:!0,writable:!0,value:l.prototype.entries}),o(r),{get Map(){return l},get polyfillMap(){return r}}}),System.get("traceur-runtime@0.0.84/src/runtime/polyfills/Map.js"),System.registerModule("traceur-runtime@0.0.84/src/runtime/polyfills/Set.js",[],function(){"use strict";function t(t){t.map_=new o}function e(t){var e=t,r=e.Object,n=e.Symbol;t.Set||(t.Set=a);var u=t.Set.prototype;u.values&&(i(u,u.values,n),i(r.getPrototypeOf((new t.Set).values()),function(){return this},n))}var r=System.get("traceur-runtime@0.0.84/src/runtime/polyfills/utils.js"),n=r.isObject,i=r.maybeAddIterator,u=r.registerPolyfill,o=System.get("traceur-runtime@0.0.84/src/runtime/polyfills/Map.js").Map,c=($traceurRuntime.getOwnHashObject,Object.prototype.hasOwnProperty),a=function(){var e=arguments[0];if(!n(this))throw new TypeError("Set called on incompatible type");if(c.call(this,"map_"))throw new TypeError("Set can not be reentrantly initialised");if(t(this),null!==e&&void 0!==e)for(var r=e[$traceurRuntime.toProperty(Symbol.iterator)](),i=void 0;!(i=r.next()).done;){var u=i.value;this.add(u)}};return $traceurRuntime.createClass(a,{get size(){return this.map_.size},has:function(t){return this.map_.has(t)},add:function(t){return this.map_.set(t,t),this},"delete":function(t){return this.map_.delete(t)},clear:function(){return this.map_.clear()},forEach:function(t){var e=arguments[1],r=this;return this.map_.forEach(function(n,i){t.call(e,i,i,r)})},values:$traceurRuntime.initGeneratorFunction(function s(){var t,e;return $traceurRuntime.createGeneratorInstance(function(r){for(;;)switch(r.state){case 0:t=r.wrapYieldStar(this.map_.keys()[Symbol.iterator]()),r.sent=void 0,r.action="next",r.state=12;break;case 12:e=t[r.action](r.sentIgnoreThrow),r.state=9;break;case 9:r.state=e.done?3:2;break;case 3:r.sent=e.value,r.state=-2;break;case 2:return r.state=12,e.value;default:return r.end()}},s,this)}),entries:$traceurRuntime.initGeneratorFunction(function l(){var t,e;return $traceurRuntime.createGeneratorInstance(function(r){for(;;)switch(r.state){case 0:t=r.wrapYieldStar(this.map_.entries()[Symbol.iterator]()),r.sent=void 0,r.action="next",r.state=12;break;case 12:e=t[r.action](r.sentIgnoreThrow),r.state=9;break;case 9:r.state=e.done?3:2;break;case 3:r.sent=e.value,r.state=-2;break;case 2:return r.state=12,e.value;default:return r.end()}},l,this)})},{}),Object.defineProperty(a.prototype,Symbol.iterator,{configurable:!0,writable:!0,value:a.prototype.values}),Object.defineProperty(a.prototype,"keys",{configurable:!0,writable:!0,value:a.prototype.values}),u(e),{get Set(){return a},get polyfillSet(){return e}}}),System.get("traceur-runtime@0.0.84/src/runtime/polyfills/Set.js"),System.registerModule("traceur-runtime@0.0.84/node_modules/rsvp/lib/rsvp/asap.js",[],function(){"use strict";function t(t,e){h[c]=t,h[c+1]=e,c+=2,2===c&&o()}function e(){return function(){process.nextTick(u)}}function r(){var t=0,e=new l(u),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}function n(){var t=new MessageChannel;return t.port1.onmessage=u,function(){t.port2.postMessage(0)}}function i(){return function(){setTimeout(u,1)}}function u(){for(var t=0;c>t;t+=2){var e=h[t],r=h[t+1];e(r),h[t]=void 0,h[t+1]=void 0}c=0}var o,c=0,a=t,s="undefined"!=typeof window?window:{},l=s.MutationObserver||s.WebKitMutationObserver,f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,h=new Array(1e3);return o="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?e():l?r():f?n():i(),{get default(){return a}}}),System.registerModule("traceur-runtime@0.0.84/src/runtime/polyfills/Promise.js",[],function(){"use strict";function t(t){return t&&"object"==typeof t&&void 0!==t.status_}function e(t){return t}function r(t){throw t}function n(t){var n=void 0!==arguments[1]?arguments[1]:e,u=void 0!==arguments[2]?arguments[2]:r,o=i(t.constructor);switch(t.status_){case void 0:throw TypeError;case 0:t.onResolve_.push(n,o),t.onReject_.push(u,o);break;case 1:l(t.value_,[n,o]);break;case-1:l(t.value_,[u,o])}return o.promise}function i(t){if(this===d){var e=o(new d(y));return{promise:e,resolve:function(t){c(e,t)},reject:function(t){a(e,t)}}}var r={};return r.promise=new t(function(t,e){r.resolve=t,r.reject=e}),r}function u(t,e,r,n,i){return t.status_=e,t.value_=r,t.onResolve_=n,t.onReject_=i,t}function o(t){return u(t,0,void 0,[],[])}function c(t,e){s(t,1,e,t.onResolve_)}function a(t,e){s(t,-1,e,t.onReject_)}function s(t,e,r,n){0===t.status_&&(l(r,n),u(t,e,r))}function l(t,e){b(function(){for(var r=0;r<e.length;r+=2)f(t,e[r],e[r+1])})}function f(e,r,i){try{var u=r(e);if(u===i.promise)throw new TypeError;t(u)?n(u,i.resolve,i.reject):i.resolve(u)}catch(o){try{i.reject(o)}catch(o){}}}function h(t){return t&&("object"==typeof t||"function"==typeof t)}function m(e,r){if(!t(r)&&h(r)){var n;try{n=r.then}catch(u){var o=j.call(e,u);return r[O]=o,o}if("function"==typeof n){var c=r[O];if(c)return c;var a=i(e);r[O]=a.promise;try{n.call(r,a.resolve,a.reject)}catch(u){a.reject(u)}return a.promise}}return r}function p(t){t.Promise||(t.Promise=v)}var b=System.get("traceur-runtime@0.0.84/node_modules/rsvp/lib/rsvp/asap.js").default,g=System.get("traceur-runtime@0.0.84/src/runtime/polyfills/utils.js").registerPolyfill,y={},v=function(t){if(t!==y){if("function"!=typeof t)throw new TypeError;var e=o(this);try{t(function(t){c(e,t)},function(t){a(e,t)})}catch(r){a(e,r)}}};$traceurRuntime.createClass(v,{"catch":function(t){return this.then(void 0,t)},then:function(i,u){"function"!=typeof i&&(i=e),"function"!=typeof u&&(u=r);var o=this,c=this.constructor;return n(this,function(e){return e=m(c,e),e===o?u(new TypeError):t(e)?e.then(i,u):i(e)},u)}},{resolve:function(e){return this===d?t(e)?e:u(new d(y),1,e):new this(function(t){t(e)})},reject:function(t){return this===d?u(new d(y),-1,t):new this(function(e,r){r(t)})},all:function(t){var e=i(this),r=[];try{for(var n=function(t){return function(n){r[t]=n,0===--u&&e.resolve(r)}},u=0,o=0,c=t[$traceurRuntime.toProperty(Symbol.iterator)](),a=void 0;!(a=c.next()).done;){var s=a.value,l=n(o);this.resolve(s).then(l,function(t){e.reject(t)}),++o,++u}0===u&&e.resolve(r)}catch(f){e.reject(f)}return e.promise},race:function(t){var e=i(this);try{for(var r=0;r<t.length;r++)this.resolve(t[r]).then(function(t){e.resolve(t)},function(t){e.reject(t)})}catch(n){e.reject(n)}return e.promise}});var d=v,j=d.reject,O="@@thenable";return g(p),{get Promise(){return v},get polyfillPromise(){return p}}}),System.get("traceur-runtime@0.0.84/src/runtime/polyfills/Promise.js"),System.registerModule("traceur-runtime@0.0.84/src/runtime/polyfills/StringIterator.js",[],function(){"use strict";function t(t){var e=String(t),r=Object.create(s.prototype);return r[u(c)]=e,r[u(a)]=0,r}var e,r=System.get("traceur-runtime@0.0.84/src/runtime/polyfills/utils.js"),n=r.createIteratorResultObject,i=r.isObject,u=$traceurRuntime.toProperty,o=Object.prototype.hasOwnProperty,c=Symbol("iteratedString"),a=Symbol("stringIteratorNextIndex"),s=function(){};return $traceurRuntime.createClass(s,(e={},Object.defineProperty(e,"next",{value:function(){var t=this;if(!i(t)||!o.call(t,c))throw new TypeError("this must be a StringIterator object");var e=t[u(c)];if(void 0===e)return n(void 0,!0);var r=t[u(a)],s=e.length;if(r>=s)return t[u(c)]=void 0,n(void 0,!0);var l,f=e.charCodeAt(r);if(55296>f||f>56319||r+1===s)l=String.fromCharCode(f);else{var h=e.charCodeAt(r+1);l=56320>h||h>57343?String.fromCharCode(f):String.fromCharCode(f)+String.fromCharCode(h)}return t[u(a)]=r+l.length,n(l,!1)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(e,Symbol.iterator,{value:function(){return this},configurable:!0,enumerable:!0,writable:!0}),e),{}),{get createStringIterator(){return t}}}),System.registerModule("traceur-runtime@0.0.84/src/runtime/polyfills/String.js",[],function(){"use strict";function t(t){var e=String(this);if(null==this||"[object RegExp]"==p.call(t))throw TypeError();var r=e.length,n=String(t),i=(n.length,arguments.length>1?arguments[1]:void 0),u=i?Number(i):0;isNaN(u)&&(u=0);var o=Math.min(Math.max(u,0),r);return b.call(e,n,u)==o}function e(t){var e=String(this);if(null==this||"[object RegExp]"==p.call(t))throw TypeError();var r=e.length,n=String(t),i=n.length,u=r;if(arguments.length>1){var o=arguments[1];void 0!==o&&(u=o?Number(o):0,isNaN(u)&&(u=0))}var c=Math.min(Math.max(u,0),r),a=c-i;return 0>a?!1:g.call(e,n,a)==a}function r(t){if(null==this)throw TypeError();var e=String(this);if(t&&"[object RegExp]"==p.call(t))throw TypeError();var r=e.length,n=String(t),i=n.length,u=arguments.length>1?arguments[1]:void 0,o=u?Number(u):0;o!=o&&(o=0);var c=Math.min(Math.max(o,0),r);return i+c>r?!1:-1!=b.call(e,n,o)}function n(t){if(null==this)throw TypeError();var e=String(this),r=t?Number(t):0;if(isNaN(r)&&(r=0),0>r||1/0==r)throw RangeError();if(0==r)return"";for(var n="";r--;)n+=e;return n}function i(t){if(null==this)throw TypeError();var e=String(this),r=e.length,n=t?Number(t):0;if(isNaN(n)&&(n=0),0>n||n>=r)return void 0;var i,u=e.charCodeAt(n);return u>=55296&&56319>=u&&r>n+1&&(i=e.charCodeAt(n+1),i>=56320&&57343>=i)?1024*(u-55296)+i-56320+65536:u}function u(t){var e=t.raw,r=e.length>>>0;if(0===r)return"";for(var n="",i=0;;){if(n+=e[i],i+1===r)return n;n+=arguments[++i]}}function o(){var t,e,r=[],n=Math.floor,i=-1,u=arguments.length;if(!u)return"";for(;++i<u;){var o=Number(arguments[i]);if(!isFinite(o)||0>o||o>1114111||n(o)!=o)throw RangeError("Invalid code point: "+o);65535>=o?r.push(o):(o-=65536,t=(o>>10)+55296,e=o%1024+56320,r.push(t,e))}return String.fromCharCode.apply(null,r)}function c(){var t=$traceurRuntime.checkObjectCoercible(this),e=String(t);return s(e)}function a(a){var s=a.String;f(s.prototype,["codePointAt",i,"endsWith",e,"includes",r,"repeat",n,"startsWith",t]),f(s,["fromCodePoint",o,"raw",u]),h(s.prototype,c,Symbol)
}var s=System.get("traceur-runtime@0.0.84/src/runtime/polyfills/StringIterator.js").createStringIterator,l=System.get("traceur-runtime@0.0.84/src/runtime/polyfills/utils.js"),f=l.maybeAddFunctions,h=l.maybeAddIterator,m=l.registerPolyfill,p=Object.prototype.toString,b=String.prototype.indexOf,g=String.prototype.lastIndexOf;return m(a),{get startsWith(){return t},get endsWith(){return e},get includes(){return r},get repeat(){return n},get codePointAt(){return i},get raw(){return u},get fromCodePoint(){return o},get stringPrototypeIterator(){return c},get polyfillString(){return a}}}),System.get("traceur-runtime@0.0.84/src/runtime/polyfills/String.js"),System.registerModule("traceur-runtime@0.0.84/src/runtime/polyfills/ArrayIterator.js",[],function(){"use strict";function t(t,e){var r=o(t),n=new h;return n.iteratorObject_=r,n.arrayIteratorNextIndex_=0,n.arrayIterationKind_=e,n}function e(){return t(this,f)}function r(){return t(this,s)}function n(){return t(this,l)}var i,u=System.get("traceur-runtime@0.0.84/src/runtime/polyfills/utils.js"),o=u.toObject,c=u.toUint32,a=u.createIteratorResultObject,s=1,l=2,f=3,h=function(){};return $traceurRuntime.createClass(h,(i={},Object.defineProperty(i,"next",{value:function(){var t=o(this),e=t.iteratorObject_;if(!e)throw new TypeError("Object is not an ArrayIterator");var r=t.arrayIteratorNextIndex_,n=t.arrayIterationKind_,i=c(e.length);return r>=i?(t.arrayIteratorNextIndex_=1/0,a(void 0,!0)):(t.arrayIteratorNextIndex_=r+1,n==l?a(e[r],!1):n==f?a([r,e[r]],!1):a(r,!1))},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(i,Symbol.iterator,{value:function(){return this},configurable:!0,enumerable:!0,writable:!0}),i),{}),{get entries(){return e},get keys(){return r},get values(){return n}}}),System.registerModule("traceur-runtime@0.0.84/src/runtime/polyfills/Array.js",[],function(){"use strict";function t(t){var e,r,n=arguments[1],i=arguments[2],u=this,o=j(t),c=void 0!==n,a=0;if(c&&!m(n))throw TypeError();if(h(o)){e=p(u)?new u:[];for(var s=o[$traceurRuntime.toProperty(Symbol.iterator)](),l=void 0;!(l=s.next()).done;){var f=l.value;e[a]=c?n.call(i,f,a):f,a++}return e.length=a,e}for(r=d(o.length),e=p(u)?new u(r):new Array(r);r>a;a++)e[a]=c?"undefined"==typeof i?n(o[a],a):n.call(i,o[a],a):o[a];return e.length=r,e}function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=this,n=t.length,i=p(r)?new r(n):new Array(n),u=0;n>u;u++)i[u]=t[u];return i.length=n,i}function r(t){var e=void 0!==arguments[1]?arguments[1]:0,r=arguments[2],n=j(this),i=d(n.length),u=v(e),o=void 0!==r?v(r):i;for(u=0>u?Math.max(i+u,0):Math.min(u,i),o=0>o?Math.max(i+o,0):Math.min(o,i);o>u;)n[u]=t,u++;return n}function n(t){var e=arguments[1];return u(this,t,e)}function i(t){var e=arguments[1];return u(this,t,e,!0)}function u(t,e){var r=arguments[2],n=void 0!==arguments[3]?arguments[3]:!1,i=j(t),u=d(i.length);if(!m(e))throw TypeError();for(var o=0;u>o;o++){var c=i[o];if(e.call(r,c,o,i))return n?o:c}return n?-1:void 0}function o(u){var o=u,c=o.Array,f=o.Object,h=o.Symbol;b(c.prototype,["entries",a,"keys",s,"values",l,"fill",r,"find",n,"findIndex",i]),b(c,["from",t,"of",e]),g(c.prototype,l,h),g(f.getPrototypeOf([].values()),function(){return this},h)}var c=System.get("traceur-runtime@0.0.84/src/runtime/polyfills/ArrayIterator.js"),a=c.entries,s=c.keys,l=c.values,f=System.get("traceur-runtime@0.0.84/src/runtime/polyfills/utils.js"),h=f.checkIterable,m=f.isCallable,p=f.isConstructor,b=f.maybeAddFunctions,g=f.maybeAddIterator,y=f.registerPolyfill,v=f.toInteger,d=f.toLength,j=f.toObject;return y(o),{get from(){return t},get of(){return e},get fill(){return r},get find(){return n},get findIndex(){return i},get polyfillArray(){return o}}}),System.get("traceur-runtime@0.0.84/src/runtime/polyfills/Array.js"),System.registerModule("traceur-runtime@0.0.84/src/runtime/polyfills/Object.js",[],function(){"use strict";function t(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e],n=null==r?[]:h(r),i=void 0,u=n.length;for(i=0;u>i;i++){var o=n[i];f(o)||(t[o]=r[o])}}return t}function r(t,e){var r,n,i=l(e),u=i.length;for(r=0;u>r;r++){var o=i[r];f(o)||(n=s(e,i[r]),a(t,i[r],n))}return t}function n(n){var i=n.Object;u(i,["assign",e,"is",t,"mixin",r])}var i=System.get("traceur-runtime@0.0.84/src/runtime/polyfills/utils.js"),u=i.maybeAddFunctions,o=i.registerPolyfill,c=$traceurRuntime,a=c.defineProperty,s=c.getOwnPropertyDescriptor,l=c.getOwnPropertyNames,f=c.isPrivateName,h=c.keys;return o(n),{get is(){return t},get assign(){return e},get mixin(){return r},get polyfillObject(){return n}}}),System.get("traceur-runtime@0.0.84/src/runtime/polyfills/Object.js"),System.registerModule("traceur-runtime@0.0.84/src/runtime/polyfills/Number.js",[],function(){"use strict";function t(t){return o(t)&&h(t)}function e(e){return t(e)&&l(e)===e}function r(t){return o(t)&&m(t)}function n(e){if(t(e)){var r=l(e);if(r===e)return f(r)<=p}return!1}function i(i){var u=i.Number;c(u,["MAX_SAFE_INTEGER",p,"MIN_SAFE_INTEGER",b,"EPSILON",g]),a(u,["isFinite",t,"isInteger",e,"isNaN",r,"isSafeInteger",n])}var u=System.get("traceur-runtime@0.0.84/src/runtime/polyfills/utils.js"),o=u.isNumber,c=u.maybeAddConsts,a=u.maybeAddFunctions,s=u.registerPolyfill,l=u.toInteger,f=Math.abs,h=isFinite,m=isNaN,p=Math.pow(2,53)-1,b=-Math.pow(2,53)+1,g=Math.pow(2,-52);return s(i),{get MAX_SAFE_INTEGER(){return p},get MIN_SAFE_INTEGER(){return b},get EPSILON(){return g},get isFinite(){return t},get isInteger(){return e},get isNaN(){return r},get isSafeInteger(){return n},get polyfillNumber(){return i}}}),System.get("traceur-runtime@0.0.84/src/runtime/polyfills/Number.js"),System.registerModule("traceur-runtime@0.0.84/src/runtime/polyfills/Math.js",[],function(){"use strict";function t(t){if(t=O(+t),0==t)return 32;var e=0;return 0===(4294901760&t)&&(t<<=16,e+=16),0===(4278190080&t)&&(t<<=8,e+=8),0===(4026531840&t)&&(t<<=4,e+=4),0===(3221225472&t)&&(t<<=2,e+=2),0===(2147483648&t)&&(t<<=1,e+=1),e}function e(t,e){t=O(+t),e=O(+e);var r=t>>>16&65535,n=65535&t,i=e>>>16&65535,u=65535&e;return n*u+(r*u+n*i<<16>>>0)|0}function r(t){return t=+t,t>0?1:0>t?-1:t}function n(t){return.4342944819032518*x(t)}function i(t){return 1.4426950408889634*x(t)}function u(t){if(t=+t,-1>t||S(t))return 0/0;if(0===t||1/0===t)return t;if(-1===t)return-1/0;var e=0,r=50;if(0>t||t>1)return x(1+t);for(var n=1;r>n;n++)n%2===0?e-=$(t,n)/n:e+=$(t,n)/n;return e}function o(t){return t=+t,t===-1/0?-1:w(t)&&0!==t?P(t)-1:t}function c(t){return t=+t,0===t?1:S(t)?0/0:w(t)?(0>t&&(t=-t),t>21?P(t)/2:(P(t)+P(-t))/2):1/0}function a(t){return t=+t,w(t)&&0!==t?(P(t)-P(-t))/2:t}function s(t){if(t=+t,0===t)return t;if(!w(t))return r(t);var e=P(t),n=P(-t);return(e-n)/(e+n)}function l(t){return t=+t,1>t?0/0:w(t)?x(t+I(t+1)*I(t-1)):t}function f(t){return t=+t,0!==t&&w(t)?t>0?x(t+I(t*t+1)):-x(-t+I(t*t+1)):t}function h(t){return t=+t,-1===t?-1/0:1===t?1/0:0===t?t:S(t)||-1>t||t>1?0/0:.5*x((1+t)/(1-t))}function m(){for(var t=arguments.length,e=new Array(t),r=0,n=0;t>n;n++){var i=arguments[n];if(i=+i,1/0===i||i===-1/0)return 1/0;i=R(i),i>r&&(r=i),e[n]=i}0===r&&(r=1);for(var u=0,o=0,n=0;t>n;n++){var i=e[n]/r,c=i*i-o,a=u+c;o=a-u-c,u=a}return I(u)*r}function p(t){return t=+t,t>0?E(t):0>t?M(t):t}function b(t){return k[0]=+t,k[0]}function g(t){if(t=+t,0===t)return t;var e=0>t;e&&(t=-t);var r=$(t,1/3);return e?-r:r}function y(y){var v=y.Math;d(v,["acosh",l,"asinh",f,"atanh",h,"cbrt",g,"clz32",t,"cosh",c,"expm1",o,"fround",b,"hypot",m,"imul",e,"log10",n,"log1p",u,"log2",i,"sign",r,"sinh",a,"tanh",s,"trunc",p])}var v=System.get("traceur-runtime@0.0.84/src/runtime/polyfills/utils.js"),d=v.maybeAddFunctions,j=v.registerPolyfill,O=v.toUint32,w=isFinite,S=isNaN,_=Math,R=_.abs,M=_.ceil,P=_.exp,E=_.floor,x=_.log,$=_.pow,I=_.sqrt,k=new Float32Array(1);return j(y),{get clz32(){return t},get imul(){return e},get sign(){return r},get log10(){return n},get log2(){return i},get log1p(){return u},get expm1(){return o},get cosh(){return c},get sinh(){return a},get tanh(){return s},get acosh(){return l},get asinh(){return f},get atanh(){return h},get hypot(){return m},get trunc(){return p},get fround(){return b},get cbrt(){return g},get polyfillMath(){return y}}}),System.get("traceur-runtime@0.0.84/src/runtime/polyfills/Math.js"),System.registerModule("traceur-runtime@0.0.84/src/runtime/polyfills/polyfills.js",[],function(){"use strict";var t=System.get("traceur-runtime@0.0.84/src/runtime/polyfills/utils.js").polyfillAll;t(Reflect.global);var e=$traceurRuntime.setupGlobals;return $traceurRuntime.setupGlobals=function(r){e(r),t(r)},{}}),System.get("traceur-runtime@0.0.84/src/runtime/polyfills/polyfills.js");
},{"path":false}],"/home/vadzim/v/work/nerojs/node_modules/websockets/lib/websockets/rfc6455.js":[function(require,module,exports){
function Rfc6455(e){var t=this;events.EventEmitter.call(t);var r="string"==typeof e,n=r?Client:Server;t.core=new n(t);var o=t._options=(r?arguments[1]:arguments[3])||{};"string"==typeof o?o=t._options={protocols:[o]}:"array"==typeof o&&(o=t._options={protocols:o});var i=o.bufferSize;(!i||0>=i)&&(o.bufferSize=BUFFER_SIZE),t.on("_data",function(e,r,n){if(0!==n&&(t.opcode=n,t.buffer=[]),t.buffer=t.buffer.concat(e),t.emit("data",new Buffer(e),r,t.opcode),r){var o=new Buffer(t.buffer),i=1===t.opcode?o.toString():o;t.emit("message",i)}})}function _option(e){return this._options[e]}function Server(e){this.parent=e}function Client(e){this.parent=e}function close(e,t){var r=this,n=r.parent;if(n.socket){var o=ERR_CODE[e]||e+"";_ctrl.call(r,OPCODE.close,t,o),n.close=function(){var e=n.socket;e.writable&&e.end(),e.destroy()}}}function ping(e,t){{var r=this;r.parent}_ctrl.call(r,OPCODE.ping,t,e)}function _ctrl(e,t,r){var n=this.parent,o=new Buffer(r);125<o.length&&(o=o.slice(0,124));var i=1,s=[0,0,0];n.socket.write(frame(i,s,e,t,o))}function write(e,t){var r,n=this.parent,o=n.socket,i=new Buffer(e),s=i.length,a=[],c=n._options.bufferSize;for(r=0;s>r;r+=c)a.push(i.slice(r,Math.min(i.length,r+c)));var p=0,f=[0,0,0],u=OPCODE[typeof e]||OPCODE.binary,l=t;for(r=0,s=a.length;s-1>r;r++,u=0)o.write(frame(p,f,u,l,a[r]));p=1,o.write(frame(p,f,u,l,a[r]))}function parse(e,t){function r(){var r=e.length;if(2>r)return e;var n=e[s++],o=n>>>7,a=15&n;n=e[s++];var c=n>>>7;if(t!==c)return i.emit("error",1002);var p=127&n;if(r<2+({126:2,127:8}||0)[p]+(t?4:0))return e;127===p?p=((e[s++]<<24)+(e[s++]<<16)+(e[s++]<<8)+e[s++])*Math.pow(2,32)+(e[s++]<<24)+(e[s++]<<16)+(e[s++]<<8)+e[s++]:126===p&&(p=(e[s++]<<8)+e[s++]);var f=t?[e[s++],e[s++],e[s++],e[s++]]:null;return{fin:o,ope:a,length:p,mask:f,payload:[]}}function n(){for(var r=o.buffer,n=e.length,c=r.payload,p=r.mask,f=r.ope,u=r.fin,l=c.length%4;r.length&&n>s;l++,r.length--)c.push(p?e[s++]^p[l%4]:e[s++]);if("function"!=typeof a[f])return i.emit("error",1002);try{0===r.length&&(a[f](c,!!u),delete o.buffer),n>s&&parse.call(o,e.slice(s),t)}catch(h){throw console.error(h),h}}var o=this,i=o.parent,s=0,a={_def:function(e,t,r){i.emit("_data",e,t,r)},0:function(e,t){a._def(e,t,0)},1:function(e,t){a._def(e,t,1)},2:function(e,t){a._def(e,t,2)},8:function(){i.emit("_closing",1e3)},9:function(e){i.pong(e)},10:function(e){i.emit("pong",Buffer(e).toString())}};if(o.buffer instanceof Buffer){var c=Buffer(o.buffer.length+e.length);o.buffer.copy(c),e.copy(c,o.buffer.length),e=c,delete o.buffer}"undefined"==typeof o.buffer&&(o.buffer=r()),o.buffer instanceof Buffer||n()}function _hashAndEncode(e){var t=(e+GUID).trim(),r=crypto.createHash("sha1");return r.update(t),r.digest("base64")}function frame(e,t,r,n,o){var i=[],s=Array.prototype.push;return s.apply(i,_1st(e,t,r)),s.apply(i,_length(n,o)),i=i.concat(_payload(n,o)),new Buffer(i)}function _1st(e,t,r){return[e<<7|t[0]<<6|t[1]<<5|t[2]<<4|r]}function _length(e,t){var r=t.length,n=r,o=[];if(125>=r);else if(65535>=r)n=126,o.push(r>>>8),o.push(255&r);else{n=127;var i="000000000000000000000000000000000000000000000000",s=(i+r.toString(2)).slice(-64);o.push(parseInt(s.substr(0,8),2)),o.push(parseInt(s.substr(8,8),2)),o.push(parseInt(s.substr(16,8),2)),o.push(parseInt(s.substr(24,8),2)),o.push(parseInt(s.substr(32,8),2)),o.push(parseInt(s.substr(40,8),2)),o.push(parseInt(s.substr(48,8),2)),o.push(parseInt(s.substr(56,8),2))}return o.unshift(e<<7|n),o}function _payload(e,t){function r(){var e,t=[];for(e=4;e--;)t.push(~~(256*Math.random()));return t}var n,o,i,s;if(e)for(o=r(),i=o.slice(-4),s=t.length,n=0;s>n;n++)i.push(t[n]^o[n%4]);else i=Array.prototype.slice.call(t);return i}var util=require("util"),events=require("events"),crypto=require("crypto"),URL=require("url"),http=require("http"),https=require("https"),GUID="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",HANDSHAKE_RESPONSE="HTTP/1.1 101 Switching Protocols\r\nUpgrade: websocket\r\nConnection: Upgrade\r\nSec-WebSocket-Accept: ",ERR_400="HTTP/1.1 400 Bad Request\r\n\r\n400 Bad Request",ERR_403="HTTP/1.1 403 Forbidden\r\n\r\n403 Forbidden",ERR_426="HTTP/1.1 426 Upgrade Required\r\n\r\n426 Upgrade Required";module.exports=exports=Rfc6455,util.inherits(Rfc6455,events.EventEmitter),Server.prototype.close=function(e){close.call(this,e,0)},Client.prototype.close=function(e){close.call(this,e,1)},Rfc6455.prototype.close=function(e){this.core.close(e)},Server.prototype.ping=function(e){ping.call(this,e,0)},Client.prototype.ping=function(e){ping.call(this,e,1)},Rfc6455.prototype.ping=function(e){this.core.ping(e)},Server.prototype.write=function(e){write.call(this,e,0)},Client.prototype.write=function(e){write.call(this,e,1)},Rfc6455.prototype.write=function(e){this.core.write(e)},Rfc6455.prototype.pong=Rfc6455.prototype.write,Server.prototype.parse=function(e){parse.call(this,e,1)},Client.prototype.parse=function(e){parse.call(this,e,0)},Rfc6455.prototype.parse=function(e){this.core.parse(e)},Rfc6455.prototype.handShake=function(){var e=this.core;e.handShake.apply(e,arguments)},Server.prototype.handShake=function(e,t){function r(){var e=n._options.validateOrigin;return"function"==typeof e?e(o):!0}var n=this.parent,o=e.headers;n.socket=t;var i,s=["host","sec-websocket-key","upgrade"];for(i=s.length;i--;)if(!(s[i]in o))return t.write(ERR_400);if("websocket"!==o.upgrade.toLowerCase())return t.write(ERR_400);if("13"!==o["sec-websocket-version"])return t.write(ERR_426);if(!0!==r())return t.write(ERR_403);o["sec-websocket-protocol"],o.cookie;var a=!0,c=function(){a&&(a=!1,n.emit("close"))},p=_hashAndEncode(o["sec-websocket-key"]);t.write(new Buffer(HANDSHAKE_RESPONSE+p+"\r\n\r\n")),process.nextTick(function(){t.on("close",c),t.on("end",c),t.on("data",function(e){n.parse(e)}),n.emit("connect",t)})},Client.prototype.handShake=function(e){function t(){var e,t=[];for(e=16;e--;)t.push(~~(256*Math.random()));return new Buffer(t).toString("base64")}var r=this.parent,n=URL.parse(e);r.URL=e;var o=r.secure="wss:"===n.protocol,i=n.pathname||"/";i+=(n.search||"").replace(/#/,"%23"),i+=n.hash||"";var s=t(),a={port:n.port||(o?443:80),host:n.hostname,path:i,headers:{Connection:"Upgrade",Upgrade:"websocket","Sec-Websocket-Key":s,"Sec-Websocket-Origin":"node-websockets","Sec-Websocket-Version":13}};o&&(a.key=r._options.key,a.cert=r._options.cert,a.ca=r._options.ca,a.rejectUnauthorized=r._options.rejectUnauthorized);var c,p=o?https:http;p.getAgent&&(c=p.getAgent(a.host,a.port),a.agent=c);var f=p.request(a);f.end(),c=c||f;var u=_hashAndEncode(s);c.on("upgrade",function(e,t){r.socket=t,t.on("close",function(e){r.emit("close",e)}),t.on("data",function(e){r.parse(e)});var n=e.statusCode;if(101!==n)return r.emit("_closing",n);var o=e.headers;return"websocket"!==o.upgrade||"Upgrade"!==o.connection?r.emit("error",new Error("Invalid Response Header")):o["sec-websocket-accept"]!==u?r.emit("error",new Error("Invalid Server Response")):void r.emit("connect",t)}),f.on("error",function(e){r.emit("error",e)})};var OPCODE={string:1,binary:2,close:8,ping:9,pong:10},ERR_CODE={1e3:"Normal Closure",1001:"Going Away",1002:"Protocol error",1003:"Unsupported Data",1004:"Frame Too Large",1005:"No Status Rcvd",1006:"Abnormal Closure",1007:"Invalid UTF-8"},BUFFER_SIZE=2e6;
},{"crypto":false,"events":false,"http":false,"https":false,"url":false,"util":false}],"/home/vadzim/v/work/nerojs/node_modules/websockets/lib/websockets/socket.js":[function(require,module,exports){
function WebSocket(){var e=this;events.EventEmitter.call(e),e.readyState=STATE.CONNECTING,e.on("error",function(t){e.close(t&&t.message),"function"==typeof e.onerror&&e.onerror(t)}),e.on("close",function(){e.readyState=STATE.CLOSED,"function"==typeof e.onclose&&e.onclose()}),e.on("open",function(){e.readyState=STATE.OPEN,"function"==typeof e.onopen&&e.onopen()}),e.on("message",function(){"function"==typeof e.onmessage&&e.onmessage()}),e.on("_closing",function(t){e.readyState=STATE.CLOSING,process.nextTick(function(){close.call(e,t)})}),e.on("connect",function(){e.emit("open")});var t=arguments;process.nextTick(function(){handShake.apply(e,t)})}function handShake(){for(var e=this,t=arguments[0],o=arguments[1],n=arguments[2],r=arguments[3],c=_getProtocol.apply(null,arguments),s=e.protocol=new c(t,o,n,r),i=length,a=EVTS;i--;)_bubbling(a[i],s,e);e.on("connect",function(t){e.secure=!!t.encrypted;var o=t.socket||t;o.setTimeout(0),o.setNoDelay(!0),o.setKeepAlive(!0,0)}),s.handShake.apply(s,arguments)}function close(e){var t=this,o=t.protocol;t.send=function(){},o.close(e)}function _bubbling(e,t,o){t.on(e,function(){var t=Array.prototype.slice.call(arguments);t.unshift(e),o.emit.apply(o,t)})}function _getProtocol(e){if("string"==typeof e)return require("./rfc6455");var t=e.headers,o=t["sec-websocket-version"];return require("8"===o?"./draft-10":t["sec-websocket-key1"]&&t["sec-websocket-key2"]?"./draft-00":"./rfc6455")}var util=require("util"),events=require("events"),crypto=require("crypto"),fs=require("fs"),URL=require("url"),path=require("path"),STATE={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3};module.exports=exports=WebSocket;var EVTS=["close","_closing","connect","error","message"],length=EVTS.length;util.inherits(WebSocket,events.EventEmitter),WebSocket.prototype.send=function(){var e=this.protocol;e.write.apply(e,arguments)},WebSocket.prototype.close=function(){this.emit("_closing")},WebSocket.prototype.addEventListener=WebSocket.prototype.addListener;
},{"./rfc6455":"/home/vadzim/v/work/nerojs/node_modules/websockets/lib/websockets/rfc6455.js","crypto":false,"events":false,"fs":false,"path":false,"url":false,"util":false}],"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Dumper.js":[function(require,module,exports){
var Dumper,Inline,Utils;Utils=require("./Utils"),Inline=require("./Inline"),Dumper=function(){function n(){}return n.indentation=4,n.prototype.dump=function(n,t,e,i,l){var u,o,r,s,p,f,m;if(null==t&&(t=0),null==e&&(e=0),null==i&&(i=!1),null==l&&(l=null),o="",r=e?Utils.strRepeat(" ",e):"",0>=t||"object"!=typeof n||n instanceof Date||Utils.isEmpty(n))o+=r+Inline.dump(n,i,l);else if(n instanceof Array)for(f=0,m=n.length;m>f;f++)s=n[f],p=0>=t-1||"object"!=typeof s||Utils.isEmpty(s),o+=r+"-"+(p?" ":"\n")+this.dump(s,t-1,p?0:e+this.indentation,i,l)+(p?"\n":"");else for(u in n)s=n[u],p=0>=t-1||"object"!=typeof s||Utils.isEmpty(s),o+=r+Inline.dump(u,i,l)+":"+(p?" ":"\n")+this.dump(s,t-1,p?0:e+this.indentation,i,l)+(p?"\n":"");return o},n}(),module.exports=Dumper;
},{"./Inline":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Inline.js","./Utils":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Utils.js"}],"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Escaper.js":[function(require,module,exports){
var Escaper,Pattern;Pattern=require("./Pattern"),Escaper=function(){function e(){}var E;return e.LIST_ESCAPEES=["\\\\",'\\"','"',"\x00","","","","","","","","\b","	","\n","","\f","\r","","","","","","","","","","","","","","","","","","",(E=String.fromCharCode)(133),E(160),E(8232),E(8233)],e.LIST_ESCAPED=['\\"',"\\\\",'\\"',"\\0","\\x01","\\x02","\\x03","\\x04","\\x05","\\x06","\\a","\\b","\\t","\\n","\\v","\\f","\\r","\\x0e","\\x0f","\\x10","\\x11","\\x12","\\x13","\\x14","\\x15","\\x16","\\x17","\\x18","\\x19","\\x1a","\\e","\\x1c","\\x1d","\\x1e","\\x1f","\\N","\\_","\\L","\\P"],e.MAPPING_ESCAPEES_TO_ESCAPED=function(){var E,t,n,r;for(t={},E=n=0,r=e.LIST_ESCAPEES.length;r>=0?r>n:n>r;E=r>=0?++n:--n)t[e.LIST_ESCAPEES[E]]=e.LIST_ESCAPED[E];return t}(),e.PATTERN_CHARACTERS_TO_ESCAPE=new Pattern("[\\x00-\\x1f]|√Ç¬Ö|√Ç¬†|√¢¬Ä¬®|√¢¬Ä¬©"),e.PATTERN_MAPPING_ESCAPEES=new Pattern(e.LIST_ESCAPEES.join("|")),e.PATTERN_SINGLE_QUOTING=new Pattern("[\\s'\":{}[\\],&*#?]|^[-?|<>=!%@`]"),e.requiresDoubleQuoting=function(e){return this.PATTERN_CHARACTERS_TO_ESCAPE.test(e)},e.escapeWithDoubleQuotes=function(e){var E;return E=this.PATTERN_MAPPING_ESCAPEES.replace(e,function(e){return function(E){return e.MAPPING_ESCAPEES_TO_ESCAPED[E]}}(this)),'"'+E+'"'},e.requiresSingleQuoting=function(e){return this.PATTERN_SINGLE_QUOTING.test(e)},e.escapeWithSingleQuotes=function(e){return"'"+e.replace(/'/g,"''")+"'"},e}(),module.exports=Escaper;
},{"./Pattern":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Pattern.js"}],"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Exception/DumpException.js":[function(require,module,exports){
var DumpException,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var p in e)__hasProp.call(e,p)&&(t[p]=e[p]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};DumpException=function(t){function e(t,e,n){this.message=t,this.parsedLine=e,this.snippet=n}return __extends(e,t),e.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<DumpException> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<DumpException> "+this.message},e}(Error),module.exports=DumpException;
},{}],"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Exception/ParseException.js":[function(require,module,exports){
var ParseException,__hasProp={}.hasOwnProperty,__extends=function(t,e){function s(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t};ParseException=function(t){function e(t,e,s){this.message=t,this.parsedLine=e,this.snippet=s}return __extends(e,t),e.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<ParseException> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<ParseException> "+this.message},e}(Error),module.exports=ParseException;
},{}],"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Inline.js":[function(require,module,exports){
var DumpException,Escaper,Inline,ParseException,Pattern,Unescaper,Utils,__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};Pattern=require("./Pattern"),Unescaper=require("./Unescaper"),Escaper=require("./Escaper"),Utils=require("./Utils"),ParseException=require("./Exception/ParseException"),DumpException=require("./Exception/DumpException"),Inline=function(){function e(){}return e.REGEX_QUOTED_STRING="(?:\"(?:[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*)\"|'(?:[^']*(?:''[^']*)*)')",e.PATTERN_TRAILING_COMMENTS=new Pattern("^\\s*#.*$"),e.PATTERN_QUOTED_SCALAR=new Pattern("^"+e.REGEX_QUOTED_STRING),e.PATTERN_THOUSAND_NUMERIC_SCALAR=new Pattern("^(-|\\+)?[0-9,]+(\\.[0-9]+)?$"),e.PATTERN_SCALAR_BY_DELIMITERS={},e.settings={},e.configure=function(e,t){null==e&&(e=null),null==t&&(t=null),this.settings.exceptionOnInvalidType=e,this.settings.objectDecoder=t},e.parse=function(e,t,i){var s,r;if(null==t&&(t=!1),null==i&&(i=null),this.settings.exceptionOnInvalidType=t,this.settings.objectDecoder=i,null==e)return"";if(e=Utils.trim(e),0===e.length)return"";switch(s={exceptionOnInvalidType:t,objectDecoder:i,i:0},e.charAt(0)){case"[":r=this.parseSequence(e,s),++s.i;break;case"{":r=this.parseMapping(e,s),++s.i;break;default:r=this.parseScalar(e,null,['"',"'"],s)}if(""!==this.PATTERN_TRAILING_COMMENTS.replace(e.slice(s.i),""))throw new ParseException('Unexpected characters near "'+e.slice(s.i)+'".');return r},e.dump=function(e,t,i){var s,r,n;return null==t&&(t=!1),null==i&&(i=null),null==e?"null":(r=typeof e,"object"===r?e instanceof Date?e.toISOString():null!=i&&(s=i(e),"string"==typeof s||null!=s)?s:this.dumpObject(e):"boolean"===r?e?"true":"false":Utils.isDigits(e)?"string"===r?"'"+e+"'":String(parseInt(e)):Utils.isNumeric(e)?"string"===r?"'"+e+"'":String(parseFloat(e)):"number"===r?1/0===e?".Inf":e===-1/0?"-.Inf":isNaN(e)?".NaN":e:Escaper.requiresDoubleQuoting(e)?Escaper.escapeWithDoubleQuotes(e):Escaper.requiresSingleQuoting(e)?Escaper.escapeWithSingleQuotes(e):""===e?'""':Utils.PATTERN_DATE.test(e)?"'"+e+"'":"null"===(n=e.toLowerCase())||"~"===n||"true"===n||"false"===n?"'"+e+"'":e)},e.dumpObject=function(e,t,i){var s,r,n,a,l;if(null==i&&(i=null),e instanceof Array){for(r=[],a=0,l=e.length;l>a;a++)n=e[a],r.push(this.dump(n));return"["+r.join(", ")+"]"}r=[];for(s in e)n=e[s],r.push(this.dump(s)+": "+this.dump(n));return"{"+r.join(", ")+"}"},e.parseScalar=function(e,t,i,s,r){var n,a,l,c,u,o,p,h,f;if(null==t&&(t=null),null==i&&(i=['"',"'"]),null==s&&(s=null),null==r&&(r=!0),null==s&&(s={exceptionOnInvalidType:this.settings.exceptionOnInvalidType,objectDecoder:this.settings.objectDecoder,i:0}),n=s.i,h=e.charAt(n),__indexOf.call(i,h)>=0){if(c=this.parseQuotedScalar(e,s),n=s.i,null!=t&&(p=Utils.ltrim(e.slice(n)," "),f=p.charAt(0),!(__indexOf.call(t,f)>=0)))throw new ParseException("Unexpected characters ("+e.slice(n)+").")}else{if(t){if(a=t.join("|"),u=this.PATTERN_SCALAR_BY_DELIMITERS[a],null==u&&(u=new Pattern("^(.+?)("+a+")"),this.PATTERN_SCALAR_BY_DELIMITERS[a]=u),!(l=u.exec(e.slice(n))))throw new ParseException("Malformed inline YAML string ("+e+").");c=l[1],n+=c.length}else c=e.slice(n),n+=c.length,o=c.indexOf(" #"),-1!==o&&(c=Utils.rtrim(c.slice(0,o)));r&&(c=this.evaluateScalar(c,s))}return s.i=n,c},e.parseQuotedScalar=function(e,t){var i,s,r;if(i=t.i,!(s=this.PATTERN_QUOTED_SCALAR.exec(e.slice(i))))throw new ParseException("Malformed inline YAML string ("+e.slice(i)+").");return r=s[0].substr(1,s[0].length-2),r='"'===e.charAt(i)?Unescaper.unescapeDoubleQuotedString(r):Unescaper.unescapeSingleQuotedString(r),i+=s[0].length,t.i=i,r},e.parseSequence=function(e,t){var i,s,r,n,a,l,c;for(a=[],n=e.length,s=t.i,s+=1;n>s;){switch(t.i=s,e.charAt(s)){case"[":a.push(this.parseSequence(e,t)),s=t.i;break;case"{":a.push(this.parseMapping(e,t)),s=t.i;break;case"]":return a;case",":case" ":case"\n":break;default:if(r='"'===(c=e.charAt(s))||"'"===c,l=this.parseScalar(e,[",","]"],['"',"'"],t),s=t.i,!r&&"string"==typeof l&&(-1!==l.indexOf(": ")||-1!==l.indexOf(":\n")))try{l=this.parseMapping("{"+l+"}")}catch(u){i=u}a.push(l),--s}++s}throw new ParseException("Malformed inline YAML string "+e)},e.parseMapping=function(e,t){var i,s,r,n,a,l,c,u;for(l={},a=e.length,r=t.i,r+=1,c=!1;a>r;){switch(t.i=r,e.charAt(r)){case" ":case",":case"\n":++r,t.i=r,c=!0;break;case"}":return l}if(c)c=!1;else for(n=this.parseScalar(e,[":"," ","\n"],['"',"'"],t,!1),r=t.i,s=!1;a>r;){switch(t.i=r,e.charAt(r)){case"[":u=this.parseSequence(e,t),r=t.i,void 0===l[n]&&(l[n]=u),s=!0;break;case"{":i=this.parseMapping(e,t),r=t.i,void 0===l[n]&&(l[n]=u),s=!0;break;case":":case" ":case"\n":break;default:u=this.parseScalar(e,[",","}"],['"',"'"],t),r=t.i,void 0===l[n]&&(l[n]=u),s=!0,--r}if(++r,s)break}}throw new ParseException("Malformed inline YAML string "+e)},e.evaluateScalar=function(e,t){var i,s,r,n,a,l,c,u,o,p,h;switch(e=Utils.trim(e),o=e.toLowerCase()){case"null":case"":case"~":return null;case"true":return!0;case"false":return!1;case".inf":return 1/0;case".nan":return 0/0;case"-.inf":return 1/0;default:switch(n=o.charAt(0)){case"!":switch(a=e.indexOf(" "),l=-1===a?o:o.slice(0,a)){case"!":return-1!==a?parseInt(this.parseScalar(e.slice(2))):null;case"!str":return Utils.ltrim(e.slice(4));case"!!str":return Utils.ltrim(e.slice(5));case"!!int":return parseInt(this.parseScalar(e.slice(5)));case"!!bool":return Utils.parseBoolean(this.parseScalar(e.slice(6)),!1);case"!!float":return parseFloat(this.parseScalar(e.slice(7)));case"!!timestamp":return Utils.stringToDate(Utils.ltrim(e.slice(11)));default:if(null==t&&(t={exceptionOnInvalidType:this.settings.exceptionOnInvalidType,objectDecoder:this.settings.objectDecoder,i:0}),c=t.objectDecoder,r=t.exceptionOnInvalidType,c)return h=Utils.rtrim(e),a=h.indexOf(" "),-1===a?c(h,null):(p=Utils.ltrim(h.slice(a+1)),p.length>0||(p=null),c(h.slice(0,a),p));if(r)throw new ParseException("Custom object support when parsing a YAML file has been disabled.");return null}break;case"0":return"0x"===e.slice(0,2)?Utils.hexDec(e):Utils.isDigits(e)?Utils.octDec(e):Utils.isNumeric(e)?parseFloat(e):e;case"+":return Utils.isDigits(e)?(u=e,i=parseInt(u),u===String(i)?i:u):Utils.isNumeric(e)?parseFloat(e):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(e)?parseFloat(e.replace(",","")):e;case"-":return Utils.isDigits(e.slice(1))?"0"===e.charAt(1)?-Utils.octDec(e.slice(1)):(u=e.slice(1),i=parseInt(u),u===String(i)?-i:-u):Utils.isNumeric(e)?parseFloat(e):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(e)?parseFloat(e.replace(",","")):e;default:return(s=Utils.stringToDate(e))?s:Utils.isNumeric(e)?parseFloat(e):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(e)?parseFloat(e.replace(",","")):e}}},e}(),module.exports=Inline;
},{"./Escaper":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Escaper.js","./Exception/DumpException":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Exception/DumpException.js","./Exception/ParseException":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Exception/ParseException.js","./Pattern":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Pattern.js","./Unescaper":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Unescaper.js","./Utils":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Utils.js"}],"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Parser.js":[function(require,module,exports){
var Inline,ParseException,Parser,Pattern,Utils;Inline=require("./Inline"),Pattern=require("./Pattern"),Utils=require("./Utils"),ParseException=require("./Exception/ParseException"),Parser=function(){function e(e){this.offset=null!=e?e:0,this.lines=[],this.currentLineNb=-1,this.currentLine="",this.refs={}}return e.prototype.PATTERN_FOLDED_SCALAR_ALL=new Pattern("^(?:(?<type>![^\\|>]*)\\s+)?(?<separator>\\||>)(?<modifiers>\\+|\\-|\\d+|\\+\\d+|\\-\\d+|\\d+\\+|\\d+\\-)?(?<comments> +#.*)?$"),e.prototype.PATTERN_FOLDED_SCALAR_END=new Pattern("(?<separator>\\||>)(?<modifiers>\\+|\\-|\\d+|\\+\\d+|\\-\\d+|\\d+\\+|\\d+\\-)?(?<comments> +#.*)?$"),e.prototype.PATTERN_SEQUENCE_ITEM=new Pattern("^\\-((?<leadspaces>\\s+)(?<value>.+?))?\\s*$"),e.prototype.PATTERN_ANCHOR_VALUE=new Pattern("^&(?<ref>[^ ]+) *(?<value>.*)"),e.prototype.PATTERN_COMPACT_NOTATION=new Pattern("^(?<key>"+Inline.REGEX_QUOTED_STRING+"|[^ '\"\\{\\[].*?) *\\:(\\s+(?<value>.+?))?\\s*$"),e.prototype.PATTERN_MAPPING_ITEM=new Pattern("^(?<key>"+Inline.REGEX_QUOTED_STRING+"|[^ '\"\\[\\{].*?) *\\:(\\s+(?<value>.+?))?\\s*$"),e.prototype.PATTERN_DECIMAL=new Pattern("\\d+"),e.prototype.PATTERN_INDENT_SPACES=new Pattern("^ +"),e.prototype.PATTERN_TRAILING_LINES=new Pattern("(\n*)$"),e.prototype.PATTERN_YAML_HEADER=new Pattern("^\\%YAML[: ][\\d\\.]+.*\n"),e.prototype.PATTERN_LEADING_COMMENTS=new Pattern("^(\\#.*?\n)+"),e.prototype.PATTERN_DOCUMENT_MARKER_START=new Pattern("^\\-\\-\\-.*?\n"),e.prototype.PATTERN_DOCUMENT_MARKER_END=new Pattern("^\\.\\.\\.\\s*$"),e.prototype.PATTERN_FOLDED_SCALAR_BY_INDENTATION={},e.prototype.CONTEXT_NONE=0,e.prototype.CONTEXT_SEQUENCE=1,e.prototype.CONTEXT_MAPPING=2,e.prototype.parse=function(t,n,i){var r,s,o,l,u,h,a,c,p,L,N,E,f,T,A,d,C,P,_,R,I,m,v,y,g,x,b,w,O,U,S,D,M,k,B,G;for(null==n&&(n=!1),null==i&&(i=null),this.currentLineNb=-1,this.currentLine="",this.lines=this.cleanup(t).split("\n"),h=null,u=this.CONTEXT_NONE,s=!1;this.moveToNextLine();)if(!this.isCurrentLineEmpty()){if("	"===this.currentLine[0])throw new ParseException("A YAML file cannot contain tabs as indentation.",this.getRealCurrentLineNb()+1,this.currentLine);if(N=C=!1,y=this.PATTERN_SEQUENCE_ITEM.exec(this.currentLine)){if(this.CONTEXT_MAPPING===u)throw new ParseException("You cannot define a sequence item when in a mapping");u=this.CONTEXT_SEQUENCE,null==h&&(h=[]),null!=y.value&&(d=this.PATTERN_ANCHOR_VALUE.exec(y.value))&&(N=d.ref,y.value=d.value),null==y.value||""===Utils.trim(y.value," ")||0===Utils.ltrim(y.value," ").indexOf("#")?this.currentLineNb<this.lines.length-1&&!this.isNextLineUnIndentedCollection()?(l=this.getRealCurrentLineNb()+1,R=new e(l),R.refs=this.refs,h.push(R.parse(this.getNextEmbedBlock(null,!0),n,i))):h.push(null):(null!=(k=y.leadspaces)?k.length:void 0)&&(d=this.PATTERN_COMPACT_NOTATION.exec(y.value))?(l=this.getRealCurrentLineNb(),R=new e(l),R.refs=this.refs,o=y.value,L=this.getCurrentLineIndentation(),this.isNextLineIndented(!1)&&(o+="\n"+this.getNextEmbedBlock(L+y.leadspaces.length+1,!0)),h.push(R.parse(o,n,i))):h.push(this.parseValue(y.value,n,i))}else{if(!(y=this.PATTERN_MAPPING_ITEM.exec(this.currentLine))||-1!==y.key.indexOf(" #")){if(A=this.lines.length,1===A||2===A&&Utils.isEmpty(this.lines[1])){try{t=Inline.parse(this.lines[0],n,i)}catch(Y){throw a=Y,a.parsedLine=this.getRealCurrentLineNb()+1,a.snippet=this.currentLine,a}if("object"==typeof t){if(t instanceof Array)c=t[0];else for(f in t){c=t[f];break}if("string"==typeof c&&0===c.indexOf("*")){for(h=[],w=0,D=t.length;D>w;w++)r=t[w],h.push(this.refs[r.slice(1)]);t=h}}return t}if("["===(G=Utils.ltrim(t).charAt(0))||"{"===G)try{return Inline.parse(t,n,i)}catch(Y){throw a=Y,a.parsedLine=this.getRealCurrentLineNb()+1,a.snippet=this.currentLine,a}throw new ParseException("Unable to parse.",this.getRealCurrentLineNb()+1,this.currentLine)}if(this.CONTEXT_SEQUENCE===u)throw new ParseException("You cannot define a mapping item when in a sequence");u=this.CONTEXT_MAPPING,null==h&&(h={}),Inline.configure(n,i);try{f=Inline.parseScalar(y.key)}catch(Y){throw a=Y,a.parsedLine=this.getRealCurrentLineNb()+1,a.snippet=this.currentLine,a}if("<<"===f)if(C=!0,s=!0,0===(null!=(B=y.value)?B.indexOf("*"):void 0)){if(I=y.value.slice(1),null==this.refs[I])throw new ParseException('Reference "'+I+'" does not exist.',this.getRealCurrentLineNb()+1,this.currentLine);if(m=this.refs[I],"object"!=typeof m)throw new ParseException("YAML merge keys used with a scalar value instead of an object.",this.getRealCurrentLineNb()+1,this.currentLine);if(m instanceof Array)for(p=g=0,O=m.length;O>g;p=++g)t=m[p],null==h[M=String(p)]&&(h[M]=t);else for(f in m)t=m[f],null==h[f]&&(h[f]=t)}else{if(t=null!=y.value&&""!==y.value?y.value:this.getNextEmbedBlock(),l=this.getRealCurrentLineNb()+1,R=new e(l),R.refs=this.refs,P=R.parse(t,n),"object"!=typeof P)throw new ParseException("YAML merge keys used with a scalar value instead of an object.",this.getRealCurrentLineNb()+1,this.currentLine);if(P instanceof Array)for(x=0,U=P.length;U>x;x++){if(_=P[x],"object"!=typeof _)throw new ParseException("Merge items must be objects.",this.getRealCurrentLineNb()+1,_);if(_ instanceof Array)for(p=b=0,S=_.length;S>b;p=++b)t=_[p],E=String(p),h.hasOwnProperty(E)||(h[E]=t);else for(f in _)t=_[f],h.hasOwnProperty(f)||(h[f]=t)}else for(f in P)t=P[f],h.hasOwnProperty(f)||(h[f]=t)}else null!=y.value&&(d=this.PATTERN_ANCHOR_VALUE.exec(y.value))&&(N=d.ref,y.value=d.value);C||(null==y.value||""===Utils.trim(y.value," ")||0===Utils.ltrim(y.value," ").indexOf("#")?this.isNextLineIndented()||this.isNextLineUnIndentedCollection()?(l=this.getRealCurrentLineNb()+1,R=new e(l),R.refs=this.refs,v=R.parse(this.getNextEmbedBlock(),n,i),(s||void 0===h[f])&&(h[f]=v)):(s||void 0===h[f])&&(h[f]=null):(v=this.parseValue(y.value,n,i),(s||void 0===h[f])&&(h[f]=v)))}if(N)if(h instanceof Array)this.refs[N]=h[h.length-1];else{T=null;for(f in h)T=f;this.refs[N]=h[T]}}return Utils.isEmpty(h)?null:h},e.prototype.getRealCurrentLineNb=function(){return this.currentLineNb+this.offset},e.prototype.getCurrentLineIndentation=function(){return this.currentLine.length-Utils.ltrim(this.currentLine," ").length},e.prototype.getNextEmbedBlock=function(e,t){var n,i,r,s,o,l,u;if(null==e&&(e=null),null==t&&(t=!1),this.moveToNextLine(),null==e){if(s=this.getCurrentLineIndentation(),u=this.isStringUnIndentedCollectionItem(this.currentLine),!this.isCurrentLineEmpty()&&0===s&&!u)throw new ParseException("Indentation problem.",this.getRealCurrentLineNb()+1,this.currentLine)}else s=e;for(n=[this.currentLine.slice(s)],t||(r=this.isStringUnIndentedCollectionItem(this.currentLine)),l=this.PATTERN_FOLDED_SCALAR_END,o=!l.test(this.currentLine);this.moveToNextLine();){if(i=this.getCurrentLineIndentation(),i===s&&(o=!l.test(this.currentLine)),r&&!this.isStringUnIndentedCollectionItem(this.currentLine)&&i===s){this.moveToPreviousLine();break}if(this.isCurrentLineBlank())n.push(this.currentLine.slice(s));else if(!o||!this.isCurrentLineComment()||i!==s){if(!(i>=s)){if(0===i){this.moveToPreviousLine();break}throw new ParseException("Indentation problem.",this.getRealCurrentLineNb()+1,this.currentLine)}n.push(this.currentLine.slice(s))}}return n.join("\n")},e.prototype.moveToNextLine=function(){return this.currentLineNb>=this.lines.length-1?!1:(this.currentLine=this.lines[++this.currentLineNb],!0)},e.prototype.moveToPreviousLine=function(){this.currentLine=this.lines[--this.currentLineNb]},e.prototype.parseValue=function(e,t,n){var i,r,s,o,l,u,h,a;if(0===e.indexOf("*")){if(l=e.indexOf("#"),e=-1!==l?e.substr(1,l-2):e.slice(1),void 0===this.refs[e])throw new ParseException('Reference "'+e+'" does not exist.',this.currentLine);return this.refs[e]}if(s=this.PATTERN_FOLDED_SCALAR_ALL.exec(e))return o=null!=(h=s.modifiers)?h:"",r=Math.abs(parseInt(o)),isNaN(r)&&(r=0),u=this.parseFoldedScalar(s.separator,this.PATTERN_DECIMAL.replace(o,""),r),null!=s.type?(Inline.configure(t,n),Inline.parseScalar(s.type+" "+u)):u;try{return Inline.parse(e,t,n)}catch(c){if(i=c,"["!==(a=e.charAt(0))&&"{"!==a||!(i instanceof ParseException)||!this.isNextLineIndented())throw i.parsedLine=this.getRealCurrentLineNb()+1,i.snippet=this.currentLine,i;e+="\n"+this.getNextEmbedBlock();try{return Inline.parse(e,t,n)}catch(c){throw i=c,i.parsedLine=this.getRealCurrentLineNb()+1,i.snippet=this.currentLine,i}}},e.prototype.parseFoldedScalar=function(t,n,i){var r,s,o,l,u,h,a,c,p,L;if(null==n&&(n=""),null==i&&(i=0),u=this.moveToNextLine(),!u)return"";for(r=this.isCurrentLineBlank(),a="";u&&r;)(u=this.moveToNextLine())&&(a+="\n",r=this.isCurrentLineBlank());if(0===i&&(o=this.PATTERN_INDENT_SPACES.exec(this.currentLine))&&(i=o[0].length),i>0)for(h=this.PATTERN_FOLDED_SCALAR_BY_INDENTATION[i],null==h&&(h=new Pattern("^ {"+i+"}(.*)$"),e.prototype.PATTERN_FOLDED_SCALAR_BY_INDENTATION[i]=h);u&&(r||(o=h.exec(this.currentLine)));)a+=r?this.currentLine.slice(i):o[1],(u=this.moveToNextLine())&&(a+="\n",r=this.isCurrentLineBlank());else u&&(a+="\n");if(u&&this.moveToPreviousLine(),">"===t){for(l="",L=a.split("\n"),c=0,p=L.length;p>c;c++)s=L[c],0===s.length||" "===s.charAt(0)?l=Utils.rtrim(l," ")+s+"\n":l+=s+" ";a=l}return"+"!==n&&(a=Utils.rtrim(a)),""===n?a=this.PATTERN_TRAILING_LINES.replace(a,"\n"):"-"===n&&(a=this.PATTERN_TRAILING_LINES.replace(a,"")),a},e.prototype.isNextLineIndented=function(e){var t,n,i;if(null==e&&(e=!0),n=this.getCurrentLineIndentation(),t=!this.moveToNextLine(),e)for(;!t&&this.isCurrentLineEmpty();)t=!this.moveToNextLine();else for(;!t&&this.isCurrentLineBlank();)t=!this.moveToNextLine();return t?!1:(i=!1,this.getCurrentLineIndentation()>n&&(i=!0),this.moveToPreviousLine(),i)},e.prototype.isCurrentLineEmpty=function(){var e;return e=Utils.trim(this.currentLine," "),0===e.length||"#"===e.charAt(0)},e.prototype.isCurrentLineBlank=function(){return""===Utils.trim(this.currentLine," ")},e.prototype.isCurrentLineComment=function(){var e;return e=Utils.ltrim(this.currentLine," "),"#"===e.charAt(0)},e.prototype.cleanup=function(e){var t,n,i,r,s;return-1!==e.indexOf("\r")&&(e=e.split("\r\n").join("\n").split("\r").join("\n")),t=0,i=this.PATTERN_YAML_HEADER.replaceAll(e,""),e=i[0],t=i[1],this.offset+=t,r=this.PATTERN_LEADING_COMMENTS.replaceAll(e,"",1),n=r[0],t=r[1],1===t&&(this.offset+=Utils.subStrCount(e,"\n")-Utils.subStrCount(n,"\n"),e=n),s=this.PATTERN_DOCUMENT_MARKER_START.replaceAll(e,"",1),n=s[0],t=s[1],1===t&&(this.offset+=Utils.subStrCount(e,"\n")-Utils.subStrCount(n,"\n"),e=n,e=this.PATTERN_DOCUMENT_MARKER_END.replace(e,"")),e},e.prototype.isNextLineUnIndentedCollection=function(e){var t,n;for(null==e&&(e=null),null==e&&(e=this.getCurrentLineIndentation()),t=this.moveToNextLine();t&&this.isCurrentLineEmpty();)t=this.moveToNextLine();return!1===t?!1:(n=!1,this.getCurrentLineIndentation()===e&&this.isStringUnIndentedCollectionItem(this.currentLine)&&(n=!0),this.moveToPreviousLine(),n)},e.prototype.isStringUnIndentedCollectionItem=function(){return"-"===this.currentLine||"- "===this.currentLine.slice(0,2)},e}(),module.exports=Parser;
},{"./Exception/ParseException":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Exception/ParseException.js","./Inline":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Inline.js","./Pattern":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Pattern.js","./Utils":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Utils.js"}],"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Pattern.js":[function(require,module,exports){
var Pattern;Pattern=function(){function e(e,t){var r,n,l,i,s,p,a,o,g;for(null==t&&(t=""),l="",s=e.length,p=null,r=0,i=0;s>i;){if(n=e.charAt(i),"\\"===n)l+=e.slice(i,+(i+1)+1||9e9),i++;else if("("===n)if(s-2>i)if(o=e.slice(i,+(i+2)+1||9e9),"(?:"===o)i+=2,l+=o;else if("(?<"===o)for(r++,i+=2,a="";s>i+1;){if(g=e.charAt(i+1),">"===g){l+="(",i++,a.length>0&&(null==p&&(p={}),p[a]=r);break}a+=g,i++}else l+=n,r++;else l+=n;else l+=n;i++}this.rawRegex=e,this.cleanedRegex=l,this.regex=new RegExp(this.cleanedRegex,"g"+t.replace("g","")),this.mapping=p}return e.prototype.regex=null,e.prototype.rawRegex=null,e.prototype.cleanedRegex=null,e.prototype.mapping=null,e.prototype.exec=function(e){var t,r,n,l;if(this.regex.lastIndex=0,r=this.regex.exec(e),null==r)return null;if(null!=this.mapping){l=this.mapping;for(n in l)t=l[n],r[n]=r[t]}return r},e.prototype.test=function(e){return this.regex.lastIndex=0,this.regex.test(e)},e.prototype.replace=function(e,t){return this.regex.lastIndex=0,e.replace(this.regex,t)},e.prototype.replaceAll=function(e,t,r){var n;for(null==r&&(r=0),this.regex.lastIndex=0,n=0;this.regex.test(e)&&(0===r||r>n);)this.regex.lastIndex=0,e=e.replace(this.regex,""),n++;return[e,n]},e}(),module.exports=Pattern;
},{}],"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Unescaper.js":[function(require,module,exports){
var Pattern,Unescaper,Utils;Utils=require("./Utils"),Pattern=require("./Pattern"),Unescaper=function(){function e(){}return e.PATTERN_ESCAPED_CHARACTER=new Pattern('\\\\([0abt	nvfre "\\/\\\\N_LP]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})'),e.unescapeSingleQuotedString=function(e){return e.replace("''","'")},e.unescapeDoubleQuotedString=function(e){return null==this._unescapeCallback&&(this._unescapeCallback=function(e){return function(r){return e.unescapeCharacter(r)}}(this)),this.PATTERN_ESCAPED_CHARACTER.replace(e,this._unescapeCallback)},e.unescapeCharacter=function(e){var r;switch(r=String.fromCharCode,e.charAt(1)){case"0":return r(0);case"a":return r(7);case"b":return r(8);case"t":return"	";case"	":return"	";case"n":return"\n";case"v":return r(11);case"f":return r(12);case"r":return r(13);case"e":return r(27);case" ":return" ";case'"':return'"';case"/":return"/";case"\\":return"\\";case"N":return r(133);case"_":return r(160);case"L":return r(8232);case"P":return r(8233);case"x":return Utils.utf8chr(Utils.hexDec(e.substr(2,2)));case"u":return Utils.utf8chr(Utils.hexDec(e.substr(2,4)));case"U":return Utils.utf8chr(Utils.hexDec(e.substr(2,8)));default:return""}},e}(),module.exports=Unescaper;
},{"./Pattern":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Pattern.js","./Utils":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Utils.js"}],"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Utils.js":[function(require,module,exports){
var Pattern,Utils;Pattern=require("./Pattern"),Utils=function(){function t(){}return t.REGEX_LEFT_TRIM_BY_CHAR={},t.REGEX_RIGHT_TRIM_BY_CHAR={},t.REGEX_SPACES=/\s+/g,t.REGEX_DIGITS=/^\d+$/,t.REGEX_OCTAL=/[^0-7]/gi,t.REGEX_HEXADECIMAL=/[^a-f0-9]/gi,t.PATTERN_DATE=new Pattern("^(?<year>[0-9][0-9][0-9][0-9])-(?<month>[0-9][0-9]?)-(?<day>[0-9][0-9]?)(?:(?:[Tt]|[ 	]+)(?<hour>[0-9][0-9]?):(?<minute>[0-9][0-9]):(?<second>[0-9][0-9])(?:.(?<fraction>[0-9]*))?(?:[ 	]*(?<tz>Z|(?<tz_sign>[-+])(?<tz_hour>[0-9][0-9]?)(?::(?<tz_minute>[0-9][0-9]))?))?)?$","i"),t.LOCAL_TIMEZONE_OFFSET=60*(new Date).getTimezoneOffset()*1e3,t.trim=function(t,n){return null==n&&(n="\\s"),t.trim()},t.ltrim=function(t,n){var e;return null==n&&(n="\\s"),e=this.REGEX_LEFT_TRIM_BY_CHAR[n],null==e&&(this.REGEX_LEFT_TRIM_BY_CHAR[n]=e=new RegExp("^"+n+n+"*")),e.lastIndex=0,t.replace(e,"")},t.rtrim=function(t,n){var e;return null==n&&(n="\\s"),e=this.REGEX_RIGHT_TRIM_BY_CHAR[n],null==e&&(this.REGEX_RIGHT_TRIM_BY_CHAR[n]=e=new RegExp(n+""+n+"*$")),e.lastIndex=0,t.replace(e,"")},t.isEmpty=function(t){return!t||""===t||"0"===t},t.subStrCount=function(t,n,e,r){var i,l,u,s,a;for(i=0,t=""+t,n=""+n,null!=e&&(t=t.slice(e)),null!=r&&(t=t.slice(0,r)),u=t.length,s=n.length,l=a=0;u>=0?u>a:a>u;l=u>=0?++a:--a)n===t.slice(l,s)&&(i++,l+=s-1);return i},t.isDigits=function(t){return this.REGEX_DIGITS.lastIndex=0,this.REGEX_DIGITS.test(t)},t.octDec=function(t){return this.REGEX_OCTAL.lastIndex=0,parseInt((t+"").replace(this.REGEX_OCTAL,""),8)},t.hexDec=function(t){return this.REGEX_HEXADECIMAL.lastIndex=0,t=this.trim(t),"0x"===(t+"").slice(0,2)&&(t=(t+"").slice(2)),parseInt((t+"").replace(this.REGEX_HEXADECIMAL,""),16)},t.utf8chr=function(t){var n;return n=String.fromCharCode,128>(t%=2097152)?n(t):2048>t?n(192|t>>6)+n(128|63&t):65536>t?n(224|t>>12)+n(128|t>>6&63)+n(128|63&t):n(240|t>>18)+n(128|t>>12&63)+n(128|t>>6&63)+n(128|63&t)},t.parseBoolean=function(t,n){var e;return null==n&&(n=!0),"string"==typeof t?(e=t.toLowerCase(),n||"no"!==e?"0"===e?!1:"false"===e?!1:""===e?!1:!0:!1):!!t},t.isNumeric=function(t){return this.REGEX_SPACES.lastIndex=0,"number"==typeof t||"string"==typeof t&&!isNaN(t)&&""!==t.replace(this.REGEX_SPACES,"")},t.stringToDate=function(t){var n,e,r,i,l,u,s,a,o,E,c,_;if(!(null!=t?t.length:void 0))return null;if(l=this.PATTERN_DATE.exec(t),!l)return null;if(_=parseInt(l.year,10),s=parseInt(l.month,10)-1,e=parseInt(l.day,10),null==l.hour)return n=new Date(Date.UTC(_,s,e));if(i=parseInt(l.hour,10),u=parseInt(l.minute,10),a=parseInt(l.second,10),null!=l.fraction){for(r=l.fraction.slice(0,3);r.length<3;)r+="0";r=parseInt(r,10)}else r=0;return null!=l.tz&&(o=parseInt(l.tz_hour,10),E=null!=l.tz_minute?parseInt(l.tz_minute,10):0,c=6e4*(60*o+E),"-"===l.tz_sign&&(c*=-1)),n=new Date(Date.UTC(_,s,e,i,u,a,r)),c&&n.setTime(n.getTime()+c),n},t.strRepeat=function(t,n){var e,r;for(r="",e=0;n>e;)r+=t,e++;return r},t.getStringFromFile=function(t,n){var e,r,i,l,u,s,a,o;if(null==n&&(n=null),u=null,"undefined"!=typeof window&&null!==window)if(window.XMLHttpRequest)u=new XMLHttpRequest;else if(window.ActiveXObject)for(o=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"],s=0,a=o.length;a>s;s++){i=o[s];try{u=new ActiveXObject(i)}catch(E){}}return null!=u?null!=n?(u.onreadystatechange=function(){return 4===u.readyState?n(200===u.status||0===u.status?u.responseText:null):void 0},u.open("GET",t,!0),u.send(null)):(u.open("GET",t,!1),u.send(null),200===u.status||0===u.status?u.responseText:null):(l=require,r=l("fs"),null!=n?r.readFile(t,function(t,e){return n(t?null:String(e))}):(e=r.readFileSync(t),null!=e?String(e):null))},t}(),module.exports=Utils;
},{"./Pattern":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Pattern.js"}],"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Yaml.js":[function(require,module,exports){
var Dumper,Parser,Utils,Yaml;Parser=require("./Parser"),Dumper=require("./Dumper"),Utils=require("./Utils"),Yaml=function(){function n(){}return n.parse=function(n,e,r){return null==e&&(e=!1),null==r&&(r=null),(new Parser).parse(n,e,r)},n.parseFile=function(n,e,r,l){var u;return null==e&&(e=null),null==r&&(r=!1),null==l&&(l=null),null!=e?Utils.getStringFromFile(n,function(n){return function(u){var i;i=null,null!=u&&(i=n.parse(u,r,l)),e(i)}}(this)):(u=Utils.getStringFromFile(n),null!=u?this.parse(u,r,l):null)},n.dump=function(n,e,r,l,u){var i;return null==e&&(e=2),null==r&&(r=4),null==l&&(l=!1),null==u&&(u=null),i=new Dumper,i.indentation=r,i.dump(n,e,0,l,u)},n.register=function(){var n;return n=function(n,e){return n.exports=YAML.parseFile(e)},null!=("undefined"!=typeof require&&null!==require?require.extensions:void 0)?(require.extensions[".yml"]=n,require.extensions[".yaml"]=n):void 0},n.stringify=function(n,e,r,l,u){return this.dump(n,e,r,l,u)},n.load=function(n,e,r,l){return this.parseFile(n,e,r,l)},n}(),"undefined"!=typeof window&&null!==window&&(window.YAML=Yaml),module.exports=Yaml;
},{"./Dumper":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Dumper.js","./Parser":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Parser.js","./Utils":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Utils.js"}],"/home/vadzim/v/work/nerojs/src/JSONTransform.js":[function(require,module,exports){
!function(){!function(r){var n=global.performance||Date,e=0,t=n.now(),i=require,o=function(){e+=n.now()-t,require=i;try{return i.apply(this,arguments)}finally{require=o,t=n.now()}};require=o;try{r()}finally{require=i,e+=n.now()-t,e/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/JSONTransform.js"]=e}}(function(){"use strict";var r=require("stream").Duplex;exports.parse=function(n){var e=new r,t="",i=function(r){if(r=r.trim())try{e.emit("data",JSON.parse(r))}catch(n){e.emit("error",n)}};return n.on("data",function(r){t+=String(r);var n=t.split("\n");t=n.pop(),n.forEach(i)}),n.on("end",function(){i(t),t="",e.push(null)}),n.on("error",function(r){return e.emit("error",r)}),e.on("end",function(){return n.end()}),e._read=function(){},e._write=function(){},e.write=function(r){var e=JSON.stringify(r);e+="\n",e=new Buffer(e),n.write(e)},e}})}();
//# sourceMappingURL=out.js.map

},{"stream":false}],"/home/vadzim/v/work/nerojs/src/JSONservice.js":[function(require,module,exports){
!function(){!function(e){var t=global.performance||Date,a=0,r=t.now(),s=require,n=function(){a+=t.now()-r,require=s;try{return s.apply(this,arguments)}finally{require=n,r=t.now()}};require=n;try{e()}finally{require=s,a+=t.now()-r,a/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/JSONservice.js"]=a}}(function(){"use strict";function e(e,t){var a=0;return!function s(e){if(e instanceof r.Map){a+=e.length;for(var t=e[$traceurRuntime.toProperty(Symbol.iterator)](),n=void 0;!(n=t.next()).done;){var i=n.value;if(a>maxSize)return;s(i)}}else++a}(t),a>e}var t,a=require("path"),r=require("immutable"),s=require("co"),n=require("ra"),i=require("fs"),u=require("uid"),c=require("localUtils"),o=require("http-status"),l=1e4,d=300,f=(s.cb(i.mkdir),s.cb(i.writeFile)),b=s.cb(i.readFile),m=function(t,i){var m=this,p=n.clean({map:null,savedUID:null,get readFile(){return $traceurRuntime.initGeneratorFunction(function e(){var a,s,n,c,o;return $traceurRuntime.createGeneratorInstance(function(e){for(;;)switch(e.state){case 0:e.pushTry(11,null),e.state=14;break;case 14:n=b(t),e.state=6;break;case 6:return e.state=2,n;case 2:c=e.sent,e.state=4;break;case 4:o=String(c),s=o,e.state=8;break;case 8:try{a=YAML.parse(s)}catch(l){try{a=JSON.parse(s)}catch(d){throw l}}a.uid||u(a),e.state=10;break;case 10:e.popTry(),e.state=16;break;case 11:e.popTry(),d=e.storedException,e.state=17;break;case 17:a=u(i),e.state=16;break;case 16:p.savedUID=a.uid,p.map=r.OrderedMap().set(a.uid,a),e.state=-2;break;default:return e.end()}},e,this)}).call(this)},last:{get $(){return p.map&&{json:p.map.last(),text:JSON.stringify(p.map.last(),null,"	")}},text:null,json:{uid:null}},get writeFile(){return $traceurRuntime.initGeneratorFunction(function e(){return $traceurRuntime.createGeneratorInstance(function(e){for(;;)switch(e.state){case 0:return e.state=2,s.sleep(d);case 2:e.maybeThrow(),e.state=4;break;case 4:e.state=p.savedUID!=p.last.json.uid?9:-2;break;case 9:p.savedUID=p.last.json.uid,e.state=10;break;case 10:return e.state=6,f(t,p.last.text).catch(c.rethrow);case 6:e.maybeThrow(),e.state=-2;break;default:return e.end()}},e,this)})()}}).setName(a.basename(t,".json"));this.getState=function(){return c.valueOf(p.last.json)},this.waitForChange=$traceurRuntime.initGeneratorFunction(function h(e){var t;return $traceurRuntime.createGeneratorInstance(function(a){for(;;)switch(a.state){case 0:t=e&&c.polling(e),a.state=6;break;case 6:return a.state=2,p.last.live.text;case 2:a.maybeThrow(),a.state=4;break;case 4:t&&t.stop(),a.state=-2;break;default:return a.end()}},h,this)}),this.waitForReady=function(e){return!p.last.text&&m.waitForChange(e)},this.applyChanges=function(e){var t=void 0!==arguments[1]?arguments[1]:!0,a=p.last.json.valueOf(),s=(t?c.applyDiff:c.assignDiff)(a,e)||{};return s!==a&&(p.map=(t?p.map:r.OrderedMap()).withMutations(function(e){for(;e.length>l;)e.delete(e.findKey(c.returnTrue));s.uid=u(),e.set(s.uid,s)})),n.forceCalculations(),p.map.last()},this.wsService=function(e){var t=n({active:!0,id:null,get sendChanges(){if(e&&t.active&&t.id&&t.id!=p.last.json.uid){var a=p.map.get(t.id);t.id=p.last.json.uid;var r=!1,s=p.last.text;if(a){var n=JSON.stringify(c.makeDiff(a,p.last.json.valueOf()));s.length>1.5*n.length&&(r=!0,s=n)}e.send('{"partial":'+r+',"data":'+s+"}")}}});e.on("close",function(){e=null,t.active=!1}),e.on("message",function(a){try{a=JSON.parse(a)}catch(r){return console.log("web socket message error".red,r),void e.send(JSON.stringify({error:"wrong format"}))}switch(a.what){case"init":t.id=a.id||{};break;case"save":m.applyChanges(a.data,!!a.partial);break;default:e.send(JSON.stringify({error:"unrecognised message"}))}})},this.httpService=s.func($traceurRuntime.initGeneratorFunction(function g(t,a){var r,s,n,i,u,l,d,f,b,m;return $traceurRuntime.createGeneratorInstance(function(h){for(;;)switch(h.state){case 0:h.state="POST"!=t.method?1:2;break;case 1:h.returnValue=a.status(o.METHOD_NOT_ALLOWED).end(),h.state=-2;break;case 2:i=c.readStream,u=i.call(c,t),h.state=9;break;case 9:return h.state=5,u;case 5:l=h.sent,h.state=7;break;case 7:d=l.toString,f=d.call(l),b=f.trim,m=b.call(f),r=m,h.state=11;break;case 11:h.state=r&&t.query.id?12:13;break;case 12:h.returnValue=a.status(o.BAD_REQUEST).end(),h.state=-2;break;case 13:return h.state=16,this.waitForReady(a);case 16:h.maybeThrow(),h.state=18;break;case 18:h.state=r?21:20;break;case 21:r=JSON.parse(r),this.applyChanges(r.data,!!r.partial),h.state=22;break;case 22:h.returnValue=a.status(o.ACCEPTED).end(),h.state=-2;break;case 20:a.contentType("json"),h.state=36;break;case 36:h.state=t.query.id&&t.query.id==p.last.json.uid?24:27;break;case 24:return h.state=25,this.waitForChange(a);case 25:h.maybeThrow(),h.state=27;break;case 27:h.state=t.query.id&&(s=p.map.get(t.query.id))?32:30;break;case 32:n=c.makeDiff(s,p.last.json.valueOf()),h.state=33;break;case 33:h.state=e(20,n)?30:29;break;case 29:h.returnValue=a.end(JSON.stringify({partial:!0,data:n})),h.state=-2;break;case 30:a.end('{"partial":false,"data":'+p.last.text+"}"),h.state=-2;break;default:return h.end()}},g,this)})).bind(this)};$traceurRuntime.createClass(m,(t={},Object.defineProperty(t,"applyItemChanges",{value:function(e,t){var a,r=void 0!==arguments[2]?arguments[2]:!0;if(!r)throw new Error("not implemented: replacing an item");return this.applyChanges((a={},Object.defineProperty(a,e,{value:t,configurable:!0,enumerable:!0,writable:!0}),a),!0)[e]},configurable:!0,enumerable:!0,writable:!0}),t),{}),module.exports=m})}();
//# sourceMappingURL=out.js.map

},{"co":"/home/vadzim/v/work/nerojs/src/co.js","fs":false,"http-status":"/home/vadzim/v/work/nerojs/node_modules/http-status/lib/index.js","immutable":"/home/vadzim/v/work/nerojs/node_modules/immutable/dist/immutable.js","localUtils":"/home/vadzim/v/work/nerojs/src/localUtils.js","path":false,"ra":"/home/vadzim/v/work/nerojs/src/ra.js","uid":"/home/vadzim/v/work/nerojs/src/uid.js"}],"/home/vadzim/v/work/nerojs/src/actionToCommands.js":[function(require,module,exports){
!function(){!function(r){var e=global.performance||Date,o=0,n=e.now(),t=require,i=function(){o+=e.now()-n,require=t;try{return t.apply(this,arguments)}finally{require=i,n=e.now()}};require=i;try{r()}finally{require=t,o+=e.now()-n,o/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/actionToCommands.js"]=o}}(function(){"use strict";function r(r){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];return e.reduce(function(r,e){return r&&r[e]},r)}function e(e,o,t){var i=r(_,o,t);if(!i)throw new Error("wrong action specified: "+o+"."+t);return i.map(function(r){return n(r,{group:e})})}var o=require("lodash"),n=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r.reduce(function(r,e){var n,t,i;if(Array.isArray(e)&&(n=[e,r],t=n[$traceurRuntime.toProperty(Symbol.iterator)](),r=(i=t.next()).done?void 0:i.value,e=(i=t.next()).done?void 0:i.value,n),Array.isArray(e))throw new Error("wrong parameters: more than one array passed");return Array.isArray(r)?r.map(function(r){return[r,e].reduce(o.assign,{})}):[r,e].reduce(o.assign,{})},{})},t=[{TIME:"Pressed_0_sec"},{TIME:"Released_0_sec"}],i=[{TIME:"Pressed_0_sec"}],a={ROL:1,DIM:1},u={ROL:1},s={Comfort_1:n(i,a,{id:"Set_To_Comfort_1"}),Comfort_2:n(i,a,{id:"Set_To_Comfort_2"}),Stop:n(t,u,{id:"Stop"}),Link:n(i,{id:"Write_Group"})},d=n(s,{Up:n(t,a,{id:"Up"}),Down:n(t,a,{id:"Down"}),ToUp:n(t,a,{id:"Up"}),ToDown:n(t,a,{id:"Down"}),Script:n(t,a,{id:"Script"}),Loop:null}),p=n(s,{Up:n(t,{id:"Up"}),Down:n(t,{id:"Down"}),ToUp:n(t,{id:"Up"}),ToDown:n(t,{id:"Down"}),Script:n(t,{id:"Script"}),Loop:null}),c=n(s,{Up:n(i,a,{id:"Up"}),Down:n(i,a,{id:"Down"}),ToUp:n(i,a,{id:"Up"}),ToDown:n(i,a,{id:"Down"}),Script:n(t,a,{id:"Script"}),Loop:null}),_={RollShutter:d,Jalousie:p,Dimeer:c};exports.createCommandSequence=e})}();
//# sourceMappingURL=out.js.map

},{"lodash":"/home/vadzim/v/work/nerojs/node_modules/lodash/dist/lodash.js"}],"/home/vadzim/v/work/nerojs/src/checkreboot.js":[function(require,module,exports){
!function(){!function(e){var r=global.performance||Date,t=0,a=r.now(),s=require,n=function(){t+=r.now()-a,require=s;try{return s.apply(this,arguments)}finally{require=n,a=r.now()}};require=n;try{e()}finally{require=s,t+=r.now()-a,t/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/checkreboot.js"]=t}}(function(){"use strict";require("colors");var e=require("co"),r=require("fs"),t=e.cb(require("child_process").exec),a=5,s=__dirname+"/.shver";e.go($traceurRuntime.initGeneratorFunction(function n(){var c,o,i,u,l,b,_,k;return $traceurRuntime.createGeneratorInstance(function(n){for(;;)switch(n.state){case 0:a=String(a),n.state=34;break;case 34:n.pushTry(9,null),n.state=12;break;case 12:o=e.cb,i=r.readFile,u=o.call(e,i),l=u(s),n.state=6;break;case 6:return n.state=2,l;case 2:b=n.sent,n.state=4;break;case 4:_=String(b),c=_,n.state=8;break;case 8:n.popTry(),n.state=14;break;case 9:n.popTry(),k=n.storedException,n.state=14;break;case 14:n.state=c!=a?30:-2;break;case 30:console.log("******** SERVER IS ABOUT TO REBOOT ********".red),n.state=31;break;case 31:return n.state=19,e.cb(r.writeFile)(s,a);case 19:n.maybeThrow(),n.state=21;break;case 21:return n.state=23,e.sleep(5e3);case 23:n.maybeThrow(),n.state=25;break;case 25:return n.state=27,t("reboot");case 27:n.maybeThrow(),n.state=-2;break;default:return n.end()}},n,this)}))})}();
//# sourceMappingURL=out.js.map

},{"child_process":false,"co":"/home/vadzim/v/work/nerojs/src/co.js","colors":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/index.js","fs":false}],"/home/vadzim/v/work/nerojs/src/co.js":[function(require,module,exports){
!function(){!function(t){var e=global.performance||Date,r=0,n=e.now(),i=require,o=function(){r+=e.now()-n,require=i;try{return i.apply(this,arguments)}finally{require=o,n=e.now()}};require=o;try{t()}finally{require=i,r+=e.now()-n,r/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/co.js"]=r}}(function(){"use strict";function t(t){return{done:!0,iteratorFailed:!0,value:t}}function e(e,r){try{return e.next(r)}catch(n){return t(n)}}function r(e,r){if(!e.throw)return t(r);try{return e.throw(r)}catch(n){return t(n)}}function n(t){if(t.done&&t.iteratorFailed)throw t.value;return t}function i(t){if(t&&t.throw){var e=r(t,new l);e.done&&e.iteratorFailed||u(new Error("thread ate EKill"))}}var o=require("later"),s=require("events").EventEmitter,a=(module.exports=exports=new s,null);exports.currentThread=null,exports.global=null;exports.go=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if("function"==typeof t&&(t=t.apply(null,e)),!t.next){var n=t;t={next:function(){var t={value:n,done:!n};return n=null,t}}}return new d(t)},exports.gocall=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return new d(t.apply(e,r))},exports.func=function(t){return function(){return new d(t.apply(this,arguments))}},exports.cb=function(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=this;return new Promise(function(r,i){var o;return(o=t).call.apply(o,$traceurRuntime.spread([n],e,[function(t,e){null!=t?i(t):r(e)}]))})}},exports.catchThreads=function(t,e){var r=a;a=e;try{return t()}finally{a=r}},exports.wait=function(t){return{then:t}},exports.sleep=function(t){return{then:function(e){var r=setTimeout(e,t);return{kill:function(){clearTimout(r)}}}}},exports.yield=exports.sleep(1),exports.requestAnimationFrame={then:function(t){if("function"==typeof cancelAnimationFrame){{requestAnimationFrame(t)}return{kill:function(){cancelAnimationFrame(timer)}}}return exports.sleep(1).then(t)}};var u=function(t){return setTimeout(function(){throw t},1)},h={enumerable:!1},l=function(){var t=void 0!==arguments[0]?arguments[0]:"kill";$traceurRuntime.superConstructor(c).call(this,t)},c=l;$traceurRuntime.createClass(l,{},{},Error),exports.EKill=l;var f=function(e){try{return e()}catch(r){return{next:function(){return t(r)}}}},_=function(t){return t instanceof p?t:(this._iterator=t,this._deferred=null,void(this._result=null))},p=_;$traceurRuntime.createClass(_,{defer:function(t){if("function"!=typeof t)throw new Error("type error: only functions can be deferred");this._deferred||(this._deferred=[]),this._deferred.push(t)},call:function(t,r){var n=p._iterator;p._iterator=this;t:for(;;){var i=t(this._iterator,r);if(!i.done||!this._deferred)return i;for(t=e,this._result?i.iteratorFailed&&(this._result.iteratorFailed&&u(this._result.value),this._result=i):this._result=i;this._deferred.length;){var o=f(this._deferred.pop());if(null!=o&&"function"==typeof o.next){this._iterator=o;continue t}}return this._result}p._iterator=n},next:function(t){return n(this.call(e,t))},"throw":function(t){return n(this.call(r,t))}},{}),_._iterator=null,exports.defer=function(t){if(!_._iterator)throw new Error("defer: not in a co-thread");_._iterator.defer(t)};var d=function(t){var e=this;if(this._attachedToStack=!0,this._iterator=new _(t),this._stopCount=0,this._stack=[],this._global={},this._current=null,this.$name={toString:function(){return"<Thread>"}},this._newStep(),this._start=function(){e._start&&e._step&&e._step.next&&(e._stopCount>0?e._step.resume=e._start:(e._start=null,e._step.next()))},this._promise=new Promise(function(t,r){e._resolve=t,e._reject=r}),!this._resolve)throw new Error("assertion failure: wrong implementation of Promise");o.then(this._start),a&&a(this),exports.emit("start",this)};$traceurRuntime.createClass(d,{linkName:function(t){var e=void 0!==arguments[1]?arguments[1]:":thread";return t.$name&&(t=t.$name),this.$name.toString=function(){return""+t+e},this},waitForInput:function(){if(this._checkFinished(),this._stopCount>0)throw new Error("thread is paused");return this._start&&this._start(),this},_attachPromise:function(t){return t.kill=this.kill.bind(this),t},then:function(t,e){return this._attachedToStack=!1,this._attachPromise(this._promise.then(t,e))},"catch":function(t){return this._attachedToStack=!1,this._attachPromise(this._promise.catch(t))},isFinished:function(){return!this._step},isPaused:function(){return this._stopCount>0},"throw":function(t){if(this==exports.currentThread)throw t;this._checkFinished(),this._newStep(),this._stopCount>0?this._step.resume=this._step.fail.bind(this._step,t):this._step.fail(t)},attachToStack:function(){this._attachedToStack=!0},kill:function(t){var e=void 0!==arguments[1]?arguments[1]:!0;if(!this.isFinished()){if(this._reject(t),e){i(this._iterator);for(var r=this._stack,n=r.length-1;n>=0;--n)i(r[n])}if(this._current)try{this._current.kill(t,e)}catch(o){u(o)}if(this._done(),this==exports.currentThread)throw new l}},pause:function(){this._checkFinished(),++this._stopCount},resume:function(){if(0==this._stopCount)throw new Error("thread not paused");0==--this._stopCount&&this._step&&this._step.resume&&(o.then(this._step.resume),this._step.resume=null)},_tick:function(t,n,i){if(t===this._step){if(this._stopCount>0)return void(t.resume=this._tick.bind(this,t,n,i));for(;;){this._current=null;var o=exports.currentThread;exports.currentThread=this,global.currentThreadData=exports.global=this._global;var s=this._iterator.call(n,i);if(exports.currentThread=o,global.currentThreadData=exports.global=o&&o._global,s.done){if(this.isFinished())return;if(this._iterator=this._stack.pop()){n=s.iteratorFailed?r:e,i=s.value;continue}var a=s.iteratorFailed?this._reject:this._resolve;this._done(),s.iteratorFailed&&this._attachedToStack&&u(s.value),a(s.value)}else if(s.value)if(s.value.then){var h=s.value.then(t.next,t.fail);h&&h.kill&&(this._current=h)}else{if(s.value.next){this._stack.push(this._iterator),this._iterator=new _(s.value),n=e,i=void 0;continue}if(!("onload"in s.value&&!s.value.onload&&"onerror"in s.value)||s.value.onerror)throw new Error("thread type error");s.value.onload=t.next,s.value.onerror=t.fail}else exports.yield.then(t.next);break}}},_done:function(){this._step=null,this._iterator=null,this._stack=null,this._resolve=null,this._reject=null,this._current=null},_newStep:function(){var t=this._step={resume:null};t.next=this._tick.bind(this,t,e),t.fail=this._tick.bind(this,t,r);var n=this.$name;t.next.$name={toString:function(){return n+":next"}},t.fail.$name={toString:function(){return n+":fail"}}},_onPromise:function(t,e){this._resolve=t,this._reject=e,this.resume()},_checkFinished:function(){if(this.isFinished())throw new Error("thread is already finished")}},{}),exports.Thread=d,Object.keys(d.prototype).forEach(function(t){return t.match(/^_/)&&Object.defineProperty(d.prototype,t,h)}),exports.currentThread=new d({next:function(){return{value:{then:function(){}}}}}).waitForInput(),exports.global=exports.currentThread._global})}();
//# sourceMappingURL=out.js.map

},{"events":false,"later":"/home/vadzim/v/work/nerojs/src/later.js"}],"/home/vadzim/v/work/nerojs/src/csvConfig.js":[function(require,module,exports){
!function(){!function(e){var t=global.performance||Date,r=0,n=t.now(),a=require,u=function(){r+=t.now()-n,require=a;try{return a.apply(this,arguments)}finally{require=u,n=t.now()}};require=u;try{e()}finally{require=a,r+=t.now()-n,r/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/csvConfig.js"]=r}}(function(){"use strict";function e(e){return[].slice.call(e).every(function(e){return"*"==e})}function t(e){var t,r,n,a,u;return $traceurRuntime.createGeneratorInstance(function(o){for(;;)switch(o.state){case 0:t=p.cb,r=b.parse,n=t.call(p,r),a=n(e,{}),o.state=6;break;case 6:return o.state=2,a;case 2:u=o.sent,o.state=4;break;case 4:o.returnValue=u,o.state=-2;break;default:return o.end()}},c,this)}function r(e,r){var n,a,o;return $traceurRuntime.createGeneratorInstance(function(i){for(;;)switch(i.state){case 0:n=t(e),i.state=6;break;case 6:return i.state=2,n;case 2:a=i.sent,i.state=4;break;case 4:o=u(a,r),i.state=8;break;case 8:i.returnValue=o,i.state=-2;break;default:return i.end()}},s,this)}function n(e){var r,n,a;return $traceurRuntime.createGeneratorInstance(function(u){for(;;)switch(u.state){case 0:r=t(e),u.state=6;break;case 6:return u.state=2,r;case 2:n=u.sent,u.state=4;break;case 4:a=i(n),u.state=8;break;case 8:u.returnValue=a,u.state=-2;break;default:return u.end()}},f,this)}function a(e){var r,n,a;return $traceurRuntime.createGeneratorInstance(function(u){for(;;)switch(u.state){case 0:r=t(e),u.state=6;break;case 6:return u.state=2,r;case 2:n=u.sent,u.state=4;break;case 4:a=o(n),u.state=8;break;case 8:u.returnValue=a,u.state=-2;break;default:return u.end()}},l,this)}function u(e,t){var r,n,a=e.filter(function(e){return e.some(Boolean)}),u=(r=a[$traceurRuntime.toProperty(Symbol.iterator)](),(n=r.next()).done?void 0:n.value),o=$traceurRuntime.iteratorToArray(r),i=o.map(function(e){return m.zipObject(m.zip(u,e))});return null!=t&&(i=m.zipObject(i.map(function(e){var r=e[t];return delete e[t],[r,e]}))),i}function o(t){var r,n,a=t.filter(function(e){return e.some(Boolean)}),u=(r=a[$traceurRuntime.toProperty(Symbol.iterator)](),(n=r.next()).done?void 0:n.value),o=$traceurRuntime.iteratorToArray(r);o=o.map(function(t){var r={length:1/0};return e(t[0])&&(r=t[0],t[0]=""),{tab:r,row:m.zipObject(m.zip(u,t))}});var i={tab:"",row:{content:[]}},c=[];return o.forEach(function(e){for(;i.tab.length>=e.tab.length;)i=c.pop();!(i.row.content||(i.row.content=[])).push(e.row),c.push(i),i=e}),c[0].row.content}function i(e){var t;return m.zipObject((t=m).zip.apply(t,$traceurRuntime.spread(e)).map(function(e){var t,r,n=e.filter(Boolean),a=(t=n[$traceurRuntime.toProperty(Symbol.iterator)](),(r=t.next()).done?void 0:r.value),u=$traceurRuntime.iteratorToArray(t);return[a,u]}))}var c=$traceurRuntime.initGeneratorFunction(t),s=$traceurRuntime.initGeneratorFunction(r),f=$traceurRuntime.initGeneratorFunction(n),l=$traceurRuntime.initGeneratorFunction(a);Object.defineProperties(module.exports,{readCSV:{get:function(){return t}},read:{get:function(){return r}},readArrays:{get:function(){return n}},readTree:{get:function(){return a}},parse:{get:function(){return u}},parseTree:{get:function(){return o}},parseArrays:{get:function(){return i}},__esModule:{value:!0}});var b=require("csv"),p=require("co"),m=require("lodash")})}();
//# sourceMappingURL=out.js.map

},{"co":"/home/vadzim/v/work/nerojs/src/co.js","csv":"/home/vadzim/v/work/nerojs/node_modules/csv/lib/index.js","lodash":"/home/vadzim/v/work/nerojs/node_modules/lodash/dist/lodash.js"}],"/home/vadzim/v/work/nerojs/src/deviceActions.js":[function(require,module,exports){
!function(){!function(r){var n=global.performance||Date,t=0,e=n.now(),o=require,u=function(){t+=n.now()-e,require=o;try{return o.apply(this,arguments)}finally{require=u,e=n.now()}};require=u;try{r()}finally{require=o,t+=n.now()-e,t/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/deviceActions.js"]=t}}(function(){"use strict";function r(r,t){var e=n[t];return e&&e(r)}var n=(require("deviceTypes"),{Up:function(){return 1},Down:function(){return 0},Comfort_1:function(r){return r.comfort_1},Comfort_2:function(r){return r.comfort_2},Stop:function(){return null},Loop:function(r){return r.state?0:1},Script:function(){return null},Link:function(){return null}});exports.getNewState=r})}();
//# sourceMappingURL=out.js.map

},{"deviceTypes":"/home/vadzim/v/work/nerojs/src/deviceTypes.json"}],"/home/vadzim/v/work/nerojs/src/deviceTypes.json":[function(require,module,exports){
module.exports=module.exports=module.exports=module.exports=module.exports=module.exports=module.exports=module.exports=module.exports=module.exports=module.exports=module.exports=module.exports={
	"Nero II 8713-50": {
		"buttons": "RollShutter"
	},
	"Intro II 8513-50": {
		"buttons": "RollShutter"
	},
	"Nero II 8421": {
		"buttons": "Dimeer"
	}
}
},{}],"/home/vadzim/v/work/nerojs/src/http_common_server.js":[function(require,module,exports){
!function(){!function(e){var t=global.performance||Date,r=0,a=t.now(),n=require,s=function(){r+=t.now()-a,require=n;try{return n.apply(this,arguments)}finally{require=s,a=t.now()}};require=s;try{e()}finally{require=n,r+=t.now()-a,r/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/http_common_server.js"]=r}}(function(){"use strict";function e(e){for(var t=c[$traceurRuntime.toProperty(Symbol.iterator)](),r=void 0;!(r=t.next()).done;){var a=r.value,n=e.match(a);if(n){for(var s=[],u=1;u in n;++u)n[u]&&s.push(n[u]);if(s.length)return s.join(" ");if(s[0])return s[0]}}return e}var t=require("path"),r=(require("lodash"),require("fs")),a=require("ra"),n=require("co"),s=require("localUtils"),u=require("uid"),i=require("express");require("rewriter");var c=[/\((iPhone);/,/\s(Android)\s([\d\.]+).*\s(Chrome\/\d+)/,/\s(Chrome\/\d+)/];module.exports=function(c){var o,l=c,b=void 0===(o=l.router)?null:o,d=i().use(require("cookie-parser")()).post("/log",function(t,r){s.log(decodeURIComponent(t.url.slice(5)).replace(/<span\s+style\=`color\:(\w+);`>(.*?)<\/span>/g,function(e,t,r){return r[t]})+(" "+e(t.headers["user-agent"]))),r.status(200).end()}).use(require("http_log")).post("/info",function(){var e=t.resolve(__dirname+"/../log/clients.json"),s=a.clean({uid:"",json:null,get updateFile(){return $traceurRuntime.initGeneratorFunction(function a(){var u,i,c,o,l,b,d,f,m,h,p,k,g,_,q,v;return $traceurRuntime.createGeneratorInstance(function(a){for(;;)switch(a.state){case 0:s.uid,a.state=39;break;case 39:return a.state=2,n.cb(r.mkdir)(t.dirname(e)).catch(function(){});case 2:a.maybeThrow(),a.state=4;break;case 4:a.pushTry(13,null),a.state=16;break;case 16:f=JSON.parse,m=n.cb,h=r.readFile,p=m.call(n,h),k=p(e),a.state=10;break;case 10:return a.state=6,k;case 6:g=a.sent,a.state=8;break;case 8:_=String(g),q=f.call(JSON,_),u=q,a.state=12;break;case 12:a.popTry(),a.state=18;break;case 13:a.popTry(),v=a.storedException,a.state=18;break;case 18:u||(u={}),i=s.json,s.json={},a.state=41;break;case 41:c=[],o=i;for(l in o)c.push(l);a.state=33;break;case 33:b=0,a.state=31;break;case 31:a.state=b<c.length?25:29;break;case 28:b++,a.state=31;break;case 25:d=c[b],a.state=26;break;case 26:a.state=d in o?23:28;break;case 23:i.hasOwnProperty(d)&&(u[d]=i[d]),a.state=28;break;case 29:return a.state=35,n.cb(r.writeFile)(e,JSON.stringify(u,null,"   ")).catch(function(){});case 35:a.maybeThrow(),a.state=-2;break;default:return a.end()}},a,this)}).call(this)}});return s.json={},function(e,t){var r=decodeURIComponent(e.url.slice(6));s.json[r]=String(new Date),s.uid=u(),t.status(200).end()}}()).use(require("compression")({threshold:0})).get("/debugHtml",n.func($traceurRuntime.initGeneratorFunction(function f(e,t){var a,s,u,i,c,o,l,b,d;return $traceurRuntime.createGeneratorInstance(function(e){for(;;)switch(e.state){case 0:t.status(200),t.contentType("html"),e.state=10;break;case 10:a=t.end,s=n.cb,u=r.readFile,i=s.call(n,u),c=i(__dirname+"/../tmp/debug.html","utf8"),e.state=6;break;case 6:return e.state=2,c;case 2:o=e.sent,e.state=4;break;case 4:l=o.replace,b=l.call(o,/\b(script|manifest)\b/g,function(e){return"no"+e}),d=a.call(t,b),e.state=-2;break;default:return e.end()}},f,this)}))).post("/debugHtml",n.func($traceurRuntime.initGeneratorFunction(function m(e,t){var a,u,i,c,o,l,b,d;return $traceurRuntime.createGeneratorInstance(function(f){for(;;)switch(f.state){case 0:console.log("receiving debugHtml...".yellow),f.state=14;break;case 14:a=n.cb,u=r.writeFile,i=a.call(n,u),c=s.readStream,o=c.call(s,e),f.state=6;break;case 6:return f.state=2,o;case 2:l=f.sent,f.state=4;break;case 4:b=beautify(l),d=i(__dirname+"/../tmp/debug.html",b),f.state=8;break;case 8:return f.state=10,d;case 10:f.maybeThrow(),f.state=12;break;case 12:t.end(),f.state=-2;break;default:return f.end()}},m,this)})));return b&&d.use(b),d.rewrite(/^\/index\d+\.html/,function(){return"/index.html"}).use(require("http_static")),d}})}();
//# sourceMappingURL=out.js.map

},{"co":"/home/vadzim/v/work/nerojs/src/co.js","compression":false,"cookie-parser":"/home/vadzim/v/work/nerojs/node_modules/cookie-parser/index.js","express":false,"fs":false,"http_log":"/home/vadzim/v/work/nerojs/src/http_log.js","http_static":"/home/vadzim/v/work/nerojs/src/http_static.js","localUtils":"/home/vadzim/v/work/nerojs/src/localUtils.js","lodash":"/home/vadzim/v/work/nerojs/node_modules/lodash/dist/lodash.js","path":false,"ra":"/home/vadzim/v/work/nerojs/src/ra.js","rewriter":"/home/vadzim/v/work/nerojs/src/rewriter.js","uid":"/home/vadzim/v/work/nerojs/src/uid.js"}],"/home/vadzim/v/work/nerojs/src/http_log.js":[function(require,module,exports){
!function(){!function(e){var r=global.performance||Date,t=0,n=r.now(),o=require,a=function(){t+=r.now()-n,require=o;try{return o.apply(this,arguments)}finally{require=a,n=r.now()}};require=a;try{e()}finally{require=o,t+=r.now()-n,t/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/http_log.js"]=t}}(function(){"use strict";global._LOG=!0;var e=require("morgan"),r=require("localUtils");e.token("cookie",function(e){return e.headers.cookie}),e.token("startTime",function(e){return e.startTime}),e.token("requestTime",function(e){return r.formatms(new Date-e.startTime)+"s"}),e.token("manifestHeaders",function(e){if(!e.url.match(/\.manifest(\?|$)/))return"";var r="\n"+e.method+" "+e.url;return e.rawHeaders.forEach(function(e,t){r+=["\n",": "][t%2],r+=e}),r});var t=e(":remote-addr".blue+' - :remote-user [:date] "'+":method".green+" "+":url".cyan+' HTTP/:http-version" '+":status".green+' :res[content-length] ":referrer" ":user-agent" '+":requestTime".yellow+":manifestHeaders");module.exports=function(e,r,n){global._LOG?(console.log(e.method+" "+e.url.green),e.startTime=new Date,t(e,r,n)):n()}})}();
//# sourceMappingURL=out.js.map

},{"localUtils":"/home/vadzim/v/work/nerojs/src/localUtils.js","morgan":"/home/vadzim/v/work/nerojs/node_modules/morgan/index.js"}],"/home/vadzim/v/work/nerojs/src/http_static.js":[function(require,module,exports){
!function(){!function(e){var t=global.performance||Date,a=0,r=t.now(),s=require,n=function(){a+=t.now()-r,require=s;try{return s.apply(this,arguments)}finally{require=n,r=t.now()}};require=n;try{e()}finally{require=s,a+=t.now()-r,a/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/http_static.js"]=a}}(function(){"use strict";function e(e,t){var r,n;return $traceurRuntime.createGeneratorInstance(function(a){for(;;)switch(a.state){case 0:return a.state=2,i.cb(s.readdir)(e);case 2:r=a.sent,a.state=4;break;case 4:t&&(r=r.filter(t)),n=r.map(function(t){return[t,i.cb(s.readFile)(e+"/"+t,"utf8")]}),a.state=8;break;case 8:a.returnValue=c.zipObject(n),a.state=-2;break;default:return a.end()}},a,this)}function t(e){var t=void 0!==arguments[1]?arguments[1]:"json";return i.func($traceurRuntime.initGeneratorFunction(function a(r,s){var n,c,i,u,o,l,b;return $traceurRuntime.createGeneratorInstance(function(a){for(;;)switch(a.state){case 0:n=s.contentType,c=n.call(s,t),i=c.end,u=e.then,a.state=11;break;case 11:a.state=u?1:7;break;case 1:return a.state=2,e;case 2:o=a.sent,a.state=4;break;case 4:l=o,a.state=6;break;case 7:l=e,a.state=6;break;case 6:b=i.call(c,l),a.state=-2;break;default:return a.end()}},a,this)}))}var a=$traceurRuntime.initGeneratorFunction(e),r=require("path"),s=require("fs"),n=require("csvConfig"),c=require("lodash"),i=require("co"),u=(require("localUtils"),require("express"));require("rewriter");var o=c.bindKey(/\.svg$/,"test"),l={expires:new Date("Fri, 31-Dec-9999 23:59:59 GMT")};module.exports=u.Router().get("/templates",t(i.go($traceurRuntime.initGeneratorFunction(function b(){var t,a,r,s,i,u,o,l,f,k,m,d,p,w,g,h;return $traceurRuntime.createGeneratorInstance(function(b){for(;;)switch(b.state){case 0:return b.state=2,e(__dirname+"/../templates/locations/",c.bindKey(/\.csv$/,"test"));case 2:a=b.sent,b.state=4;break;case 4:r=[],b.state=26;break;case 26:s=Object.keys(a)[$traceurRuntime.toProperty(Symbol.iterator)](),i=void 0,b.state=18;break;case 18:b.state=(i=s.next()).done?21:19;break;case 19:u=i.value,b.state=20;break;case 20:t=r,o=r.push,l=o.apply,f=$traceurRuntime.spread,k=n.readTree,m=a[u],b.state=14;break;case 14:return b.state=6,m;case 6:d=b.sent,b.state=8;break;case 8:p=k.call(n,d),b.state=16;break;case 16:return b.state=10,p;case 10:w=b.sent,b.state=12;break;case 12:g=f.call($traceurRuntime,w),h=l.call(o,t,g),b.state=18;break;case 21:b.returnValue=JSON.stringify(r),b.state=-2;break;default:return b.end()}},b,this)})))).get("/messages",t(i.go($traceurRuntime.initGeneratorFunction(function f(){var e,t,a,r,c,u,o,l,b,k;return $traceurRuntime.createGeneratorInstance(function(f){for(;;)switch(f.state){case 0:e=JSON.stringify,t=n.read,a=i.cb,r=s.readFile,c=a.call(i,r),u=c(__dirname+"/../templates/messages.csv","utf8"),f.state=10;break;case 10:return f.state=2,u;case 2:o=f.sent,f.state=4;break;case 4:l=t.call(n,o,"id"),f.state=12;break;case 12:return f.state=6,l;case 6:b=f.sent,f.state=8;break;case 8:k=e.call(JSON,b),f.state=14;break;case 14:f.returnValue=k,f.state=-2;break;default:return f.end()}},f,this)})))).rewrite(/^\/apple\-touch\-icon/,function(e){return"/touch"+r.extname(e)}).rewrite(/^\/favicon.ico$/,function(){return"/favicon96.ico"}).get("/images",i.func($traceurRuntime.initGeneratorFunction(function k(t,a){var r,s,n,c,i,u,l,b,f,m,d,p,w,g;return $traceurRuntime.createGeneratorInstance(function(t){for(;;)switch(t.state){case 0:r=__dirname+"/../www/images",t.state=29;break;case 29:return t.state=2,e(r,o);case 2:s=t.sent,t.state=4;break;case 4:a.contentType("json"),a.write("{"),n=!1,t.state=31;break;case 31:c=[],i=s;for(u in i)c.push(u);t.state=27;break;case 27:l=0,t.state=25;break;case 25:t.state=l<c.length?21:23;break;case 16:l++,t.state=25;break;case 21:b=c[l],t.state=22;break;case 22:t.state=b in i?19:16;break;case 19:t.state=s.hasOwnProperty(b)?13:16;break;case 13:n&&a.write(","),a.write(JSON.stringify(b)),a.write(":"),t.state=14;break;case 14:f=a.write,m=JSON.stringify,d=s[b],t.state=10;break;case 10:return t.state=6,d;case 6:p=t.sent,t.state=8;break;case 8:w=m.call(JSON,p),g=f.call(a,w),t.state=12;break;case 12:n=!0,t.state=16;break;case 23:a.write("}"),a.end(),t.state=-2;break;default:return t.end()}},k,this)}))).rewrite(/^\/$/,function(){return"/index.html"}).use(/^\/index.html/,function(e,t,a){e.query.appicon&&t.cookie("appicon",e.query.appicon,l),t.clearCookie("icon"),t.clearCookie("room"),a()}).use(u.static(__dirname+"/../www",{lastModified:!0,etag:!0}))})}();
//# sourceMappingURL=out.js.map

},{"co":"/home/vadzim/v/work/nerojs/src/co.js","csvConfig":"/home/vadzim/v/work/nerojs/src/csvConfig.js","express":false,"fs":false,"localUtils":"/home/vadzim/v/work/nerojs/src/localUtils.js","lodash":"/home/vadzim/v/work/nerojs/node_modules/lodash/dist/lodash.js","path":false,"rewriter":"/home/vadzim/v/work/nerojs/src/rewriter.js"}],"/home/vadzim/v/work/nerojs/src/inc.js":[function(require,module,exports){
!function(){!function(r){var e=global.performance||Date,n=0,t=e.now(),o=require,a=function(){n+=e.now()-t,require=o;try{return o.apply(this,arguments)}finally{require=a,t=e.now()}};require=a;try{r()}finally{require=o,n+=e.now()-t,n/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/inc.js"]=n}}(function(){"use strict";var r=Date.now();module.exports=function(){var e=Date.now();return r>=e&&(e=r+1),r=e,e}})}();
//# sourceMappingURL=out.js.map

},{}],"/home/vadzim/v/work/nerojs/src/later.js":[function(require,module,exports){
!function(){!function(e){var r=global.performance||Date,t=0,n=r.now(),i=require,o=function(){t+=r.now()-n,require=i;try{return i.apply(this,arguments)}finally{require=o,n=r.now()}};require=o;try{e()}finally{require=i,t+=r.now()-n,t/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/later.js"]=t}}(function(){"use strict";module.exports=new(require("scheduler"))})}();
//# sourceMappingURL=out.js.map

},{"scheduler":"/home/vadzim/v/work/nerojs/src/scheduler.js"}],"/home/vadzim/v/work/nerojs/src/localUtils.js":[function(require,module,exports){
!function(){!function(e){var r=global.performance||Date,t=0,n=r.now(),a=require,u=function(){t+=r.now()-n,require=a;try{return a.apply(this,arguments)}finally{require=u,n=r.now()}};require=u;try{e()}finally{require=a,t+=r.now()-n,t/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/localUtils.js"]=t}}(function(){"use strict";function e(e,r){if(!e)throw new Error(""+r)}var r,t=require("lodash"),n=(require("ra"),require("co"));if(!global.WeakMap){var a=0;global.WeakMap=function(){var e=function(e){var r,t;if(this._index="__WeakMap"+ ++a,e)for(var n=e[$traceurRuntime.toProperty(Symbol.iterator)](),u=void 0;!(u=n.next()).done;){var o=u.value,i=(r=o[$traceurRuntime.toProperty(Symbol.iterator)](),(t=r.next()).done?void 0:t.value),l=(t=r.next()).done?void 0:t.value;this.set(i,l)}};return $traceurRuntime.createClass(e,{get:function(e){return this.has(e)?e[this._index]:void 0},has:function(e){return e.hasOwnProperty(this._index)},"delete":function(e){delete e[this._index]},set:function(e,r){return Object.defineProperty(e,this._index,{configurable:!0,value:r}),this}},{})}()}var u=module.exports=(r={},Object.defineProperty(r,"dumpPromise",{value:function(e){return e.then(function(e){return u.log("result:",e)},function(e){return u.error("error:",e)})},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"dump",{value:function(e,r){return console.log(e,r),r},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"log",{value:console.log.bind(console),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"info",{value:(console.info||console.log).bind(console),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"warn",{value:(console.warn||console.log).bind(console),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"error",{value:(console.error||console.log).bind(console),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"trace",{value:(console.trace||console.log).bind(console),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"rests",{value:function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];for(var n=[],a=r[$traceurRuntime.toProperty(Symbol.iterator)](),u=void 0;!(u=a.next()).done;){var o=u.value,i=e%o;e=(e-i)/o,n.push(i)}return n},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"pad",{value:function(e,r,t){e=String(e);var n="";for(r-=e.length;r>0;)n+=t,--r;return n+e},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"time",{value:function(){var e=new Date;return e.getHours()+":"+u.pad(e.getMinutes(),2,0)+":"+u.pad(e.getSeconds(),2,0)+"."+u.pad(e.getMilliseconds(),3,0)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"stack",{value:function(){return(new Error).stack},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"options",{value:function(e,r){var t={};for(var n in r)if(r.hasOwnProperty(n))if(null==e)t[n]=r[n];else{var a=e[n];null==a&&(a=r[n]),t[n]=a}return t},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"str",{value:function(e,r){return null==r&&(r=1),!e||!r||1>r?""+e:Array.isArray(e)?"[ "+e.map(function(e){return u.str(e,r-1)}).join(" ")+" ]":e.constructor&&e.constructor!=Object?String(e):"{ "+Object.keys(e).map(function(t){return t+"="+u.str(e[t],r-1)}).join(" ")+" }"},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"toOneLine",{value:function(e){var r=JSON.stringify(e);return r+="\n"},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"byLines",{value:function(e){var r="";return function(t){r+=String(t);var n=r.split("\n");r=n.pop(),n.forEach(e)}},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"byJSON",{value:function(e){return byLines(function(r){return e(JSON.parse(r.trim()))})},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"valueOf",{value:function(e){return null==e?null:null==e.valueOf?e:e.valueOf()},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"returnThis",{value:function(){return this},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"returnNull",{value:function(){return null},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"returnTrue",{value:function(){return!0},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"returnFalse",{value:function(){return!1},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"returnZero",{value:function(){return 0},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"returnOne",{value:function(){return 1},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"promiseSucceeded",{value:Promise.resolve(),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"promiseNull",{value:Promise.resolve(null),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"promiseTrue",{value:Promise.resolve(!0),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"promiseFalse",{value:Promise.resolve(!1),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"promiseZero",{value:Promise.resolve(0),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"promiseOne",{value:Promise.resolve(1),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"returnNullPromise",{value:function(){return u.promiseNull},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"returnTruePromise",{value:function(){return u.promiseTrue},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"returnFalsePromise",{value:function(){return u.promiseFalse},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"returnZeroPromise",{value:function(){return u.promiseZero},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"returnOnePromise",{value:function(){return u.promiseOne},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"waitFor",{value:function(e,r,t){return"function"==typeof e&&(r=e,e=5e3),"function"==typeof r&&(t=r,r=200),new Promise(function(n,a){var u=Date.now();setTimeout(function o(){var i;(i=t())?n(i):Date.now()-u>e?a(new Error("timeout")):setTimeout(o,r)},r)})},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"empty",{value:Object.freeze(Object.create(null)),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"JSONEqual",{value:function(e,r){return JSON.stringify(e)==JSON.stringify(r)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"new",{value:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.reduce(function(e,r){return t.assign(e,r)},{})},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"call",{value:function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return e.apply(void 0,$traceurRuntime.spread(r))},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"rethrow",{value:function(e){setTimeout(function(){throw e},1)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"catch",{value:function(e,r){try{return e()}catch(t){return r}},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"tryElse",{value:function(e,r){var t=!1;try{var n=e();return t=!0,n}finally{t||r()}},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"try",{value:$traceurRuntime.initGeneratorFunction(function o(e){var r,t,a,i,l,c,f,b=arguments;return $traceurRuntime.createGeneratorInstance(function(o){for(;;)switch(o.state){case 0:r=void 0!==b[1]?b[1]:100,t=void 0!==b[2]?b[2]:3e3,a=void 0!==b[3]?b[3]:1.5,i=r,o.state=26;break;case 26:o.pushTry(17,null),o.state=20;break;case 20:l=e(),o.state=6;break;case 6:return o.state=2,l;case 2:c=o.sent,o.state=4;break;case 4:o.returnValue=c,o.state=-2;break;case 8:o.popTry(),o.state=26;break;case 17:o.popTry(),f=o.storedException,o.state=13;break;case 13:u.rethrow(f),o.state=14;break;case 14:return o.state=10,n.sleep(i);case 10:o.maybeThrow(),o.state=12;break;case 12:i=Math.min(i*a,t),o.state=26;break;default:return o.end()}},o,this)}),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"unique",{value:function(e,r,t){return 0==r||e!=t[r-1]},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"joinData",{value:function(e){return 0==e.length?"":"string"==typeof e[0]?e.join(""):Buffer.isBuffer(e[0])?Buffer.concat(e):e.join("")},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"readStream",{value:$traceurRuntime.initGeneratorFunction(function i(e){var r,t,n,a,o,l,c,f,b,s,m,p,v,y,d;return $traceurRuntime.createGeneratorInstance(function(i){for(;;)switch(i.state){case 0:y={then:function(i,y){var d=[];r=e.on,a=function(e){return t=d.push,n=t.call(d,e)},o=r.call(e,"data",a),l=e.on,s=function(){return c=u.joinData,f=c.call(u,d),b=i(f)},m=l.call(e,"end",s),p=e.on,v=p.call(e,"error",y)}},i.state=6;break;case 6:return i.state=2,y;case 2:d=i.sent,i.state=4;break;case 4:i.returnValue=d,i.state=-2;break;default:return i.end()}},i,this)}),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"readJSON",{value:$traceurRuntime.initGeneratorFunction(function l(e){var r,t,n,a,o;return $traceurRuntime.createGeneratorInstance(function(i){for(;;)switch(i.state){case 0:r=JSON.parse,t=u.readStream,n=t.call(u,e),i.state=6;break;case 6:return i.state=2,n;case 2:a=i.sent,i.state=4;break;case 4:o=r.call(JSON,a),i.state=8;break;case 8:i.returnValue=o,i.state=-2;break;default:return i.end()}},l,this)}),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"readChunk",{value:$traceurRuntime.initGeneratorFunction(function c(e){var r,t,n,a,u,o,i,l,f,b,s,m,p,v,y,d,g,w,O,P;return $traceurRuntime.createGeneratorInstance(function(c){for(;;)switch(c.state){case 0:O={then:function(c,O){function P(){i=e.removeListener,l=i.call(e,"data",h),f=e.removeListener,b=f.call(e,"end",k),s=e.removeListener,m=s.call(e,"error",j)}function h(e){p=P(),v=c(e)}function k(){y=P(),d=c(null)}function j(e){g=P(),w=O(e)}r=e.on,t=r.call(e,"data",h),n=e.on,a=n.call(e,"end",k),u=e.on,o=u.call(e,"error",j)}},c.state=6;break;case 6:return c.state=2,O;case 2:P=c.sent,c.state=4;break;case 4:c.returnValue=P,c.state=-2;break;default:return c.end()}},c,this)}),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"static",{value:function(e){return n.func($traceurRuntime.initGeneratorFunction(function r(t,n){var a,u,o,i,l;return $traceurRuntime.createGeneratorInstance(function(r){for(;;)switch(r.state){case 0:o=!1,i=!1,r.state=16;break;case 16:r.pushTry(null,8),r.state=10;break;case 10:return r.state=2,e();case 2:l=r.sent,r.state=4;break;case 4:n.writeHead(200,(a={},Object.defineProperty(a,"Content-Type",{value:"text/html; charset=UTF-8",configurable:!0,enumerable:!0,writable:!0}),a)),o=!0,"string"!=typeof l&&(l=React.renderComponentToString(l)),n.end(l),i=!0,r.state=8,r.finallyFallThrough=-2;break;case 8:r.popTry(),r.state=14;break;case 14:o||n.writeHead(500,(u={},Object.defineProperty(u,"Content-Type",{value:"text/plain",configurable:!0,enumerable:!0,writable:!0}),u)),i||n.end("<<< ERROR >>>"),r.state=12;break;case 12:r.state=r.finallyFallThrough;break;default:return r.end()}},r,this)}))},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"property",{value:function(e,r,t){var n="_"+r;return arguments.length>2&&(e[n]=t),e[r]=function(r){return 0==arguments.length?e[n]:(e[n]=r,e)},e},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"polling",{value:function(e){var r={stop:function(){r&&(null!=r._polling&&(clearTimeout(r._polling),r._polling=null),r=null)},_polling:null,_tryToSendChunk:function(){r&&(r._polling=null,e.write(r._chunk)?("function"==typeof e.flush&&e.flush(),r._polling=setTimeout(r._tryToSendChunk,r._interval)):e.once("drain",r._tryToSendChunk))}};return u.property(r,"chunk","\n"),u.property(r,"interval",6e4),e.once("end",r.stop),e.once("close",r.stop),e.once("error",r.stop),process.nextTick(r._tryToSendChunk),r},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"testDiffImm",{value:function(){var r={a:1,x:{u:9}},t={x:{c:2}};e(Immutable.is(Immutable.fromJS(t),u.applyDiffImm(r,u.makeDiffImm(r,t))))},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"testDiff",{value:function(){var r={a:1,x:{u:9}},t={x:{c:2}};e(Immutable.is(Immutable.fromJS(t),Immutable.fromJS(u.applyDiff(r,u.makeDiff(r,t)))))},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"applyDiffImm",{value:function(e,r){return Immutable.fromJS(e||Immutable.Map()).withMutations(function(e){Immutable.fromJS(r).forEach(function(r,t){null==r?e.delete(t):r instanceof Immutable.Map?e.set(t,u.applyDiffImm(e.get(t),r)):e.set(t,r)})})},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"makeDiffImm",{value:function(e,r){return Immutable.Map().withMutations(function(t){function n(e){var r=[];return e&&Immutable.fromJS(e).forEach(function(e,t){r.push({key:t,value:e})}),r.sort(function(e,r){return e.key<r.key?-1:e.key>r.key?1:0})}for(var a=n(e),o=n(r),i=a.pop(),l=o.pop();i||l;)!l||i&&i.key>l.key?(t.set(i.key,null),i=a.pop()):!i||i.key<l.key?(t.set(l.key,l.value),l=o.pop()):(i.value instanceof Immutable.Map&&l.value instanceof Immutable.Map?t.set(l.key,u.makeDiffImm(i.value,l.value)):t.set(l.key,l.value),i=a.pop(),l=o.pop())})},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"assignDiffImm",{value:function(e,r){return u.applyDiffImm(e,u.makeDiffImm(e,r))},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"isLiteral",{value:function(e){return e&&"object"==typeof e&&e.constructor==Object},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"applyDiff",{value:function(e,r){function t(){n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r],++a)}var n=e,a=0;for(var o in r)if(r.hasOwnProperty(o)){var i=r[o];null!=i&&"object"==typeof i&&(i=u.applyDiff(n&&n[o],i)),null==i?null!=n&&n.hasOwnProperty(o)&&(n===e&&t(),delete n[o],--a):((null==n||n[o]!==i)&&(n===e&&t(),n[o]=i),a=1/0)}return n!==e&&0==a&&(n=null),n},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"makeDiff",{value:function(e,r){function n(e){var r=[];return t.forEach(e,function(e,t){r.push({key:t,value:e})}),r.sort(function(e,r){return e.key<r.key?-1:e.key>r.key?1:0})}for(var a=null,o=n(e),i=n(r),l=o.pop(),c=i.pop();l||c;)if(!c||l&&l.key>c.key)null==a&&(a={}),a[l.key]=null,l=o.pop();else if(!l||l.key<c.key)null==a&&(a={}),a[c.key]=c.value,c=i.pop();else{if(l.value!==c.value)if(u.isLiteral(l.value)&&u.isLiteral(c.value)){var f=u.makeDiff(l.value,c.value);null!=f&&(null==a&&(a={}),a[c.key]=f)}else null==a&&(a={}),a[c.key]=c.value;l=o.pop(),c=i.pop()}return a},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"assignDiff",{value:function(e,r){return u.applyDiff(e,u.makeDiff(e,r))},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"cast",{value:function(e,r){if(!r||"object"!=typeof r)return r;var t=e||{},n=t.constructor,a=t.elements;return"string"==typeof n&&(n=Immutable[n]),(n||Immutable.Map)().withMutations(function(e){return Object.keys(r).forEach(function(t){return e.set(t,u.cast(a&&a[t],r[t]))})})},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"concatString",{value:function(e){var r="";return!function t(e){if("object"!=typeof e)r+=e;else if(null!=e.length)e.forEach(t);else for(var n=e[$traceurRuntime.toProperty(Symbol.iterator)](),a=void 0;!(a=n.next()).done;){var u=a.value;t(u)}}(e),r},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"sortedDiff",{value:function(e,r){for(var t=e[Symbol.iterator](),n=r[Symbol.iterator](),a={common:[],first:[],second:[]},u=t.next(),o=n.next();!u.done||!o.done;)o.done||u.value<o.value?(a.first.push(u.value),u=t.next()):u.done||u.value>o.value?(a.second.push(o.value),o=n.next()):(a.common.push(u.value),u=t.next(),o=n.next());return a},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"measure",{value:function(e){var r=global.performance||global.Date,t=r.now();try{return e()}finally{if(t=(r.now()-t)/1e3,t>0){for(var n=1;1e3>t;)n*=10,t*=10;t=Math.round(t)/n}console.log(t)}},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"skip",{value:$traceurRuntime.initGeneratorFunction(function f(e,r){var t,n,a;return $traceurRuntime.createGeneratorInstance(function(u){for(;;)switch(u.state){case 0:t=r[$traceurRuntime.toProperty(Symbol.iterator)](),n=void 0,u.state=6;break;case 6:u.state=(n=t.next()).done?-2:8;break;case 8:a=n.value,u.state=9;break;case 9:u.state=e>0?5:1;break;case 5:--e,u.state=6;break;case 1:return u.state=2,a;case 2:u.maybeThrow(),u.state=6;break;default:return u.end()}},f,this)}),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"take",{value:$traceurRuntime.initGeneratorFunction(function b(e,r){var t,n,a;return $traceurRuntime.createGeneratorInstance(function(u){for(;;)switch(u.state){case 0:t=r[$traceurRuntime.toProperty(Symbol.iterator)](),n=void 0,u.state=4;break;case 4:u.state=(n=t.next()).done?-2:10;break;case 10:a=n.value,u.state=11;break;case 11:u.state=e>0?5:-2;break;case 5:--e,u.state=6;break;case 6:return u.state=2,a;case 2:u.maybeThrow(),u.state=4;break;default:return u.end()}},b,this)}),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"copy",{value:function(e){var r=u.array(e);return r==e&&(r=e.slice()),r},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"array",{value:function(e){if(Array.isArray(e))return e;var r=[];if(e[Symbol.iterator])for(var t=e[$traceurRuntime.toProperty(Symbol.iterator)](),n=void 0;!(n=t.next()).done;){var a=n.value;r.push(a)}else for(var u=0;u<e.length;++u)r.push(e[u]);return r},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"buffer",{value:function(e){return e instanceof Buffer?e:new Buffer(u.array(e))},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"vector",{value:function(e){return e instanceof Buffer?e:u.array(e)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"concat",{value:$traceurRuntime.initGeneratorFunction(function s(e){var r,t,n,a,u,o;return $traceurRuntime.createGeneratorInstance(function(i){for(;;)switch(i.state){case 0:r=e[$traceurRuntime.toProperty(Symbol.iterator)](),t=void 0,i.state=7;break;case 7:i.state=(t=r.next()).done?-2:9;break;case 9:n=t.value,i.state=10;break;case 10:a=n[$traceurRuntime.toProperty(Symbol.iterator)](),u=void 0,i.state=4;break;case 4:i.state=(u=a.next()).done?7:5;break;case 5:o=u.value,i.state=6;break;case 6:return i.state=2,o;case 2:i.maybeThrow(),i.state=4;break;default:return i.end()}},s,this)}),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"word",{value:function(e){return[255&e,e>>8&255]},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"dword",{value:function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"makeWord",{value:function(e,r){return(255&e)+(255&r)<<8},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"arrayEqual",{value:function(e,r){return e&&r&&e.length==r.length&&e.every(function(e,t){return e==r[t]})},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"compare",{value:function(e,r){return e==r?0:r>e?-1:1},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,"formatms",{value:function(e){function r(e,r){for(var t=String(e),n="",a=t.length;r>a;++a)n+="0";return n+=t}var t="";e=Math.round(e);var n=e%1e3;e-=n,e/=1e3;var a=e%60;e-=a,e/=60;var u=e%60;e-=u,e/=60;var o=e;return t+=o?o:"",t+=t?":"+r(u,2):u?u:"",t+=t?":"+r(a,2):a,t+="."+r(n,3)},configurable:!0,enumerable:!0,writable:!0}),r)})}();
//# sourceMappingURL=out.js.map

},{"co":"/home/vadzim/v/work/nerojs/src/co.js","lodash":"/home/vadzim/v/work/nerojs/node_modules/lodash/dist/lodash.js","ra":"/home/vadzim/v/work/nerojs/src/ra.js"}],"/home/vadzim/v/work/nerojs/src/modem.js":[function(require,module,exports){
!function(){!function(r){var e=global.performance||Date,t=0,o=e.now(),n=require,u=function(){t+=e.now()-o,require=n;try{return n.apply(this,arguments)}finally{require=u,o=e.now()}};require=u;try{r()}finally{require=n,t+=e.now()-o,t/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/modem.js"]=t}}(function(){"use strict";function r(r,e){var t=function(){return e&&e()&&void 0};return r.then(t,t)}function e(r,e){var t=S.read(r);if(null==t)return null;var o=h.read(r);if(t!=s.calc_crc(r.slice(1,5+o)))return!1;var n=e(r.slice(5,5+o));return n?r.splice(0,5+o+2):n=!1,n}function t(r){if(8!=r.length)return!1;var e=E.read(r),t=P[e.lo],o=t&&(t[e.hi]?t[e.hi]:t.any);if(!o)return!1;var n=o(r);return n}function o(r,e){var t=void 0!==arguments[2]?arguments[2]:1;return{write:function(o,n){return o[r]=(o[r]&~(t<<e))+((n&t)<<e),o},read:function(o){return null==o[r]?null:o[r]>>e&t}}}function n(r){return{write:function(e,t){return e[r]=t,e},read:function(e){return e[r]}}}function u(r,e,t){return e[r]=255&t,e[r+1]=t>>8&255,e}function i(r,e){return null==e[r]||null==e[r+1]?null:e[r]+(e[r+1]<<8)}function _(r){return{write:u.bind(null,r),read:i.bind(null,r)}}function c(r){return{write:function(e,t){return e[r]=255&t,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255,e},read:function(e){return null==e[r]||null==e[r+1]||null==e[r+2]||null==e[r+3]?null:e[r]+(e[r+1]<<8)+(e[r+2]<<16)+(e[r+3]<<24)}}}function a(r){return{read:function(e){var t={};for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o].read(e));return t},write:function(e,t){for(var o in r)r.hasOwnProperty(o)&&r[o].write(e,t[o]);return e},rec:r}}function d(r,e){return{read:function(t){return r.read(e.read(t))},write:function(t,o){return e.write(t,r.write(o))}}}var s=(require("lodash"),require("modemcrc")),l=require("co"),m=require("localUtils"),f=126,g=125,p=1,C=function(){$traceurRuntime.superConstructor(O).apply(this,arguments)},O=C;$traceurRuntime.createClass(C,{},{},Error);var T=function(){$traceurRuntime.superConstructor(M).apply(this,arguments)},M=T;$traceurRuntime.createClass(T,{},{},C);var R=function(r,e){this._stream=r,this._log=e,this._stream.on("data",this._ondata.bind(this)),this._commands=[],this._onready=Promise.resolve()},I=R;$traceurRuntime.createClass(R,{lock:function(e){var t=this._onready,o=l.gocall($traceurRuntime.initGeneratorFunction(function n(){var r,o,u,i,_,c,a,d,s,l,m,f,g,p,C;return $traceurRuntime.createGeneratorInstance(function(n){for(;;)switch(n.state){case 0:r=this,n.state=14;break;case 14:return n.state=2,t;case 2:n.maybeThrow(),n.state=4;break;case 4:o=e.call,g=function(){for(var e,t=[],o=0;u=arguments.length,u>o;i=o,o=i+1,i)_=arguments[o],t[o]=_,_;return c=r._sendBuffer,e=I,a=I.encode,d=a.apply,s=$traceurRuntime.spread,l=s.call($traceurRuntime,t),m=d.call(a,e,l),f=c.call(r,m)},p=o.call(e,this,g),n.state=10;break;case 10:return n.state=6,p;case 6:C=n.sent,n.state=8;break;case 8:n.returnValue=C,n.state=-2;break;default:return n.end()}},n,this)}),this);return this._onready=r(o),o},_sendBuffer:function(e){var t=this;if(this._current)throw new Error("modem is busy");this._log&&this._log("buffer prepared:",e,I.extractMessage(e));var o,n=new Promise(function(r,n){o=setTimeout(function(){t._log&&t._log("timeout"),n(new T)},3e3),t._current={resolve:r,reject:n,buffer:[]},t._log&&t._log("writing buffer");var u=t._stream.write(e);t._log&&t._log("++++++++++++++++++++++ written: "+u+" ++++++++++++++++++++++")});return r(n,function(){clearTimeout(o),t._current=null}),n},_ondata:function(r){if(this._log&&this._log("received:",r),!(r instanceof Buffer))throw new Error("data must be an instance of Buffer");var e=this._current;if(e){for(var t=e.buffer,o=0;o<r.length;++o){var n=r[o];(0!=t.length||n==f)&&(e.staf?(e.staf=!1,t.push(n)):n==g?e.staf=!0:t.push(n))}if(!e.staf){var u=t.length;this._log&&this._log("parsing:",new Buffer(t));for(var i;0==(i=I.extractMessage(t));)t.shift();if(null==i&&u!=t.length&&this._log&&this._log("skipped:",u-t.length),this._log&&this._log("parsed:",i),null!=i)return i?this._debugTimeout?void(this._debugTimeout=!1):void e.resolve(i):void e.reject(new C("wrong packet from modem"))}}}},{encodeCommand:function(r,e){return I._commands[r](e)},encodeArray:function(r){var e;if(r=m.copy(r),r.length>255)throw new C("too long message");r.unshift(255,3,p,r.length),(e=r).push.apply(e,$traceurRuntime.spread(m.word(s.calc_crc(r))));for(var t=[f],o=r[$traceurRuntime.toProperty(Symbol.iterator)](),n=void 0;!(n=o.next()).done;){var u=n.value;(u==f||u==g)&&t.push(g),t.push(u)}return m.buffer(t)},encode:function(r,e){return"string"!=typeof r&&(e=r,r=e.id),this.encodeArray(this.encodeCommand(r,e))}}),R.Error=C,R.ETimeout=T,R._commands={},module.exports=R;var h=n(4),S={read:function(r){var e=h.read(r);return null==e?null:i(e+5,r)},write:function(r){return u(h.read(r),r)}},E=a({lo:n(2),hi:n(3)}),P=[];R.Work_Mode=1,R.Init_Device_Mode=2,R.Extended_Work_Mode=3,R.extractMessages=function(r){"string"==typeof r&&(r=r.split(/\s|\r|\n/).filter(function(r){return r.match(/^[0-9a-fA-F]{1,2}$/)}).map(function(r){return parseInt("0x"+r)}));for(var e,t=[];;){for(;0==(e=R.extractMessage(r));)r.shift();if(null==e)return r.length>0&&t.push(r),t;t.push(e)}},R.extractMessage=function(r){return r.length<4?null:(r=m.array(r),r[0]!=f||255!=r[1]||3!=r[2]||r[3]!=p?!1:e(r,t))},!function(){function r(r){var e={};if(r[Symbol.iterator])for(var t=0,o=r[$traceurRuntime.toProperty(Symbol.iterator)](),n=void 0;!(n=o.next()).done;){var u=n.value;null!=u&&(e[u]=t),++t}else for(var i in r)r.hasOwnProperty(i)&&(e[r[i]]=i);return{read:function(r){if(null==r)return null;var t=e[r];return null==t&&(t=r),t},write:function(e){if(null==e)return null;var t=e;if("string"==typeof e&&(t=r[e],null==t))throw new Error("wrong constant "+e);return t}}}function e(r){return{read:function(e){return null==e?null:e*r},write:function(e){return null==e?null:Math.round(e/r)}}}function t(r,e){var t=void 0!==arguments[2]?arguments[2]:" ",o="",n=e-r.length;if(!t)return r;for(;n&&n>0;)o+=t,--n;return o+r}function u(){var r=void 0!==arguments[0]?arguments[0]:0;return{read:function(e){return null==e?null:t(e.toString(16),r,"0")},write:function(r){return null==r?null:parseInt(r,16)}}}function i(e){function t(){"string"==typeof e?e=F[e]:"function"!=typeof e.read&&(e=r(e)),t=function(){}}return{read:function(r){if(t(),null==r)return null;for(var o=0,n={};r;)1&r&&(n[e.read(o)]=!0),++o,r>>=1;return n},write:function(r){if(t(),null==r||"object"!=typeof r)return r;var o=0;r[Symbol.iterator]||(r=Object.keys(r).filter(function(e){return r[e]}));for(var n=r[$traceurRuntime.toProperty(Symbol.iterator)](),u=void 0;!(u=n.next()).done;){var i=u.value;o|=1<<e.write(i)}return o}}}function a(r,e,t){if("number"!=typeof r)throw new C("wrong cmdLo");P[r]=P[r]||[],"number"!=typeof e&&(e="any"),P[r][e]=t}function s(r,e,t){if(R._commands[r]){var o="duplicate command identifier "+r;throw console.error("registerWriter",o),new Error(o)}(R._commands[r]=function(r){var t=[];return t.length=8,e(t,r),t}).type=t}function l(r,e){var t={},o=function(r){if(e.hasOwnProperty(r)){var o=e[r];if("number"==typeof o){var n=o,u=b[r];if(!u)throw new C("wrong constant in command definition");o={read:function(){return n},write:function(r){return u.write(r,n)}}}F[r]&&(o=d(F[r],o)),t[r]=o}};for(var n in e)o(n);var u=function(e){var o={id:r};for(var n in t)t.hasOwnProperty(n)&&(o[n]=t[n].read(e));return o};a(e.cmdLo,e.cmdHi,u);var i=function(r,e){for(var o in t)t.hasOwnProperty(o)&&t[o].write(r,e&&e[o]);return r};s(r,i,e)}function m(r,e,t,o){t.cmdLo=32,t.cmdHi=e,o.cmdLo=33,o.cmdHi=e,l(r,t),l("answer_"+r,o)}var f=o(6,7),g=o(6,6),p=o(6,5),O=o(6,3),T=o(6,2),M=o(6,1),I=o(6,0),h=o(7,7),S=o(7,6),v=o(7,0,7),D=n(3),L=n(4),w=n(5),y=n(6),A=n(7),N=_(4),K=c(4),G=_(0),U=E.rec.lo,H=E.rec.hi,b={cmdLo:U,cmdHi:H},F={GROUP:r({Any_Group:0}),CMD:r({None:0,Stop:1,Up:2,Down:3,Comfort_1:4,Comfort_2:5,Script:6,Loop:7,Set_To_Comfort:8}),TIME:r({Pressed_0_sec:1,Pressed_0_5_sec:2,Pressed_1_sec:3,Pressed_4:4,Released_0_sec:9,Released_0_5_sec:10,Released_1_sec:11,Released_4_sec:12}),COMFORT:e(1e-4),MOVE_TIME:e(.01),MODE:r(["Ignore_For_Out","Idle","Setting","Comfort_1","Comfort_2","Self_Group","Remote","Program","Script","Comfort_For_Script","Update"]),GROUP_SETTING:r(["Received_Cmd_Is_Executed_Only_Locally","Received_Cmd_Is_Executed_Locally_And_For_Self_Group"]),KEYPAD_STATUS:i(["Key_Up_Pressed","Key_Stop_Pressed","Key_Down_Pressed","Key_Comfort_Pressed","Key_Group_Pressed","Key_Program_Pressed","Key_External_1_Pressed","Key_External_2_Pressed"]),RESULT:r({OK:1,Packet_Error:2,Memory_Overflow:3,Packet_Missed:4,Packet_Not_Allowed:5,Packed_appled_at_modem:6,Connection_error:7,Command_in_progress:8,Command_auth_req:9,Device_Error:10}),LEVEL:e(.001),MODEM_MODE:r({Work_Mode:1,Init_Device_Mode:2,Extended_Work_Mode:3,Extended_Init_Mode:4,Reset_Password_Mode:5,RSSI_catch_mode:6}),PROTOCOL_NUM:r({NERO_II_SmartHome:0,INTRO_II_SmartHome:1,All_protocols:255}),PROTOCOLS:i("PROTOCOL_NUM"),MODEM_FUNCTIONS:i({}),CUR_CONDITION:e(1e-4),DEST_CONDITION:e(1e-4),ID:u()};l("Write_Group",{group:G,cmdLo:1,TIME:L,WCK:O,RPM:T,DEL:M}),l("Write_Script",{group:G,cmdLo:2,cmdHi:0,TIME:L,WCK:O,RPM:T,DEL:M}),l("Write_Script_With_Cmd",{group:G,cmdLo:2,CMD:D,TIME:L,WCK:O,RPM:T,DEL:M}),l("Write_By_Allowance",{group:G,cmdLo:3,TIME:L}),l("Stop_Write_With_Ack",{group:G,cmdLo:4}),l("Write_Group_In_Idle",{group:G,cmdLo:5,GROUP:N,ACK:f}),l("Allow_Group_Writing",{group:G,cmdLo:6,cmdHi:0,ACK:f}),l("Allow_Script_Writing",{group:G,cmdLo:6,CMD:D,TIME:L,ACK:f,DIM:g,ROL:p}),l("Allow_Script_With_Comfort_Writing",{group:G,cmdLo:6,cmdHi:32,COMFORT:N,ACK:f,DN:h,UP:S}),l("Change_Script_Into_Cmd",{group:G,cmdLo:7,CMD:D,TIME:L,ACK:f,DIM:g,ROL:p}),l("Change_Script_Into_Comfort",{group:G,cmdLo:7,cmdHi:32,COMFORT:N,ACK:f,DN:h,UP:S}),l("Delete_Group_In_Programming_Mode",{group:G,cmdLo:8,cmdHi:1,GROUP:N,ACK:f}),l("Delete_Group_In_Idle_Mode",{group:G,cmdLo:8,cmdHi:2,GROUP:N,ACK:f}),l("Clear_Device_Memory_In_Idle_Mode",{group:G,cmdLo:8,cmdHi:3,ACK:f}),l("Stop",{group:G,cmdLo:16,cmdHi:1,TIME:L,ACK:f,DIM:g,ROL:p,SGRP:I,PRIORITY:v}),l("Up",{group:G,cmdLo:16,cmdHi:2,TIME:L,ACK:f,DIM:g,ROL:p,SGRP:I,PRIORITY:v}),l("Down",{group:G,cmdLo:16,cmdHi:3,TIME:L,ACK:f,DIM:g,ROL:p,SGRP:I,PRIORITY:v}),l("Set_To_Comfort_1",{group:G,cmdLo:16,cmdHi:4,TIME:L,ACK:f,DIM:g,ROL:p,SGRP:I,PRIORITY:v}),l("Set_To_Comfort_2",{group:G,cmdLo:16,cmdHi:5,TIME:L,ACK:f,DIM:g,ROL:p,SGRP:I,PRIORITY:v}),l("Script",{group:G,cmdLo:16,cmdHi:6,TIME:L,ACK:f,DIM:g,ROL:p,SGRP:I,PRIORITY:v}),l("Loop",{group:G,cmdLo:16,cmdHi:7,TIME:L,ACK:f,DIM:g,ROL:p,SGRP:I,PRIORITY:v}),l("Set_To_Comfort",{group:G,cmdLo:16,cmdHi:32,COMFORT:N,ACK:f,SGRP:I,DN:h,UP:S,PRIORITY:v}),l("ScanCod_For_Modes",{group:G,cmdLo:17,CMD:D,TIME:L,MODE:w,ACK:f,DIM:g,ROL:p}),l("GoTo_Mode",{group:G,cmdLo:24,cmdHi:1,To_MODE:L,From_MODE:w,ACK:f}),l("Change_Mode_Setting",{group:G,cmdLo:24,cmdHi:2,MODE_SETTING:L,MASK:w,ACK:f}),l("Change_System_Setting",{group:G,cmdLo:24,cmdHi:3,SYSTEM_SETTING:L,MASK:w,ACK:f}),l("Change_Cmd_Setting",{group:G,cmdLo:24,cmdHi:4,CMD_SETTING:L,MASK:w,ACK:f}),l("Change_Group_Setting",{group:G,cmdLo:24,cmdHi:5,GROUP_SETTING:L,MASK:w,ACK:f}),l("Change_Move_Time",{group:G,cmdLo:24,cmdHi:6,MOVE_TIME:N,ACK:f}),l("Change_Comfort_1",{group:G,cmdLo:24,cmdHi:7,COMFORT:N,ACK:f,DN:h,UP:S}),l("Change_Comfort_2",{group:G,cmdLo:24,cmdHi:8,COMFORT:N,ACK:f,DN:h,UP:S}),l("Change_Script_Comfort",{group:G,cmdLo:24,cmdHi:9,COMFORT:N,ACK:f,DN:h,UP:S}),l("Reset_To_Factory_Setting",{group:G,cmdLo:24,cmdHi:10,DEFAUL_SETTING:N,ACK:f}),l("Change_Group_Settings_For_Scenario_Control",{group:G,cmdLo:24,cmdHi:11,GRP_KEYS:L,SCEN_GRP_SETTING:w,ACK:f}),m("Mode",1,{group:G},{group:G,MODE:L}),m("Mode_Setting",2,{group:G},{group:G,MODE_SETTING:L}),m("System_Setting",3,{group:G},{group:G,SYSTEM_SETTING:L}),m("Cmd_Setting",4,{group:G},{group:G,CMD_SETTING:L}),m("Group_Setting",5,{group:G},{group:G,GROUP_SETTING:L}),m("Move_Time",6,{group:G},{group:G,MOVE_TIME:N}),m("Comfort_1",7,{group:G},{group:G,COMFORT:N,DN:h,UP:S}),m("Comfort_2",8,{group:G},{group:G,COMFORT:N,DN:h,UP:S}),m("Script_Comfort",9,{group:G},{group:G,COMFORT:N,DN:h,UP:S}),m("Keypad_Status",10,{group:G},{group:G,KEYPAD_STATUS:L}),m("Cur_Condition",11,{group:G},{group:G,CUR_CONDITION:N,DN:h,UP:S}),m("Dest_Condition",12,{group:G},{group:G,DEST_CONDITION:N,DN:h,UP:S}),m("Version_High",13,{group:G},{group:G,PRODUCT_HARD:L,PRODUCT_VARIANT:w}),m("Version_Low",14,{group:G},{group:G,PRODUCT_VERSION:L,PRODUCT_ID:w}),m("Result",15,{group:G},{group:G,RESULT:L}),m("Signal_Level",16,{group:G},{group:G,LEVEL:N}),m("Free_Cell_Count",17,{},{COUNT:N}),m("Version",18,{},{PRODUCT_VERSION:L,PRODUCT_ID:w,PRODUCT_HARD:y,PRODUCT_VARIANT:A}),m("Id_Cell_Number",19,{},{DEV_NUM:L}),m("Scenario_Control_Group_Setting",20,{group:G,key1:L},{group:G,GRP_KEYS:L,SCEN_GRP_SETTING:w}),m("Functions",21,{},{PROTOCOLS:L,MODEM_FUNCTIONS:w}),m("Identifier",22,{},{ID:K}),l("Change_modem_work_mode",{cmdLo:25,cmdHi:1,MODEM_MODE:L}),l("Do_id_nx_substitution",{cmdLo:25,cmdHi:2,DEV_NUM:N}),l("Delete_id_nx_of_device",{cmdLo:25,cmdHi:3,DEV_NUM:N}),l("Change_protocol",{cmdLo:25,cmdHi:4,PROTOCOL_NUM:L})}()})}();
//# sourceMappingURL=out.js.map

},{"co":"/home/vadzim/v/work/nerojs/src/co.js","localUtils":"/home/vadzim/v/work/nerojs/src/localUtils.js","lodash":"/home/vadzim/v/work/nerojs/node_modules/lodash/dist/lodash.js","modemcrc":"/home/vadzim/v/work/nerojs/src/modemcrc.js"}],"/home/vadzim/v/work/nerojs/src/modemcrc.js":[function(require,module,exports){
!function(){!function(e){var t=global.performance||Date,r=0,a=t.now(),n=require,c=function(){r+=t.now()-a,require=n;try{return n.apply(this,arguments)}finally{require=c,a=t.now()}};require=c;try{e()}finally{require=n,r+=t.now()-a,r/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/modemcrc.js"]=r}}(function(){"use strict";function e(e,t){for(var r=0;8>r;r++)32768&e?(e<<=1,e&=65535,1&t&&(e|=1),e^=4129):(e<<=1,e&=65535,1&t&&(e|=1)),t>>=1;return e}function t(e){return e[Symbol.iterator]||e.next?e:$traceurRuntime.initGeneratorFunction(function t(){var r;return $traceurRuntime.createGeneratorInstance(function(t){for(;;)switch(t.state){case 0:r=0,t.state=7;break;case 7:t.state=r<e.length?1:-2;break;case 4:++r,t.state=7;break;case 1:return t.state=2,e[r];case 2:t.maybeThrow(),t.state=4;break;default:return t.end()}},t,this)})}function r(r){for(var a=c,n=t(r)[$traceurRuntime.toProperty(Symbol.iterator)](),s=void 0;!(s=n.next()).done;){var o=s.value;a=e(a,o)}return a}function a(r){var a,s,o,u,i;return $traceurRuntime.createGeneratorInstance(function(n){for(;;)switch(n.state){case 0:a=!0,s=c,n.state=22;break;case 22:o=t(r)[$traceurRuntime.toProperty(Symbol.iterator)](),u=void 0,n.state=8;break;case 8:n.state=(u=o.next()).done?11:9;break;case 9:i=u.value,n.state=10;break;case 10:s=e(s,i),n.state=6;break;case 6:return n.state=2,i;case 2:n.maybeThrow(),n.state=4;break;case 4:a=!1,n.state=8;break;case 11:return n.state=14,255&s;case 14:n.maybeThrow(),n.state=16;break;case 16:return n.state=18,s>>8&255;case 18:n.maybeThrow(),n.state=-2;break;default:return n.end()}},n,this)}var n=$traceurRuntime.initGeneratorFunction(a),c=0;module.exports={initial_crc:c,update_crc:e,calc_crc:r,append_crc:a}})}();
//# sourceMappingURL=out.js.map

},{}],"/home/vadzim/v/work/nerojs/src/modemstub.js":[function(require,module,exports){
!function(){!function(e){var r=global.performance||Date,o=0,t=r.now(),n=require,s=function(){o+=r.now()-t,require=n;try{return n.apply(this,arguments)}finally{require=s,t=r.now()}};require=s;try{e()}finally{require=n,o+=r.now()-t,o/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/modemstub.js"]=o}}(function(){"use strict";var e=require("modem"),r=require("net"),o=require("fs"),t=require("localUtils");require("colors");var n=function(o){var n=r.createServer(function(r){r.on("data",function(o){console.log(("stub: <Buffer "+t.array(o).map(function(e){return e.toString(16)}).join(" ")+">").yellow),o=e.extractMessage(o),console.log(("stub: "+JSON.stringify(o)).yellow),r.pause(),setTimeout(function(){r.resume();var t=null;switch(o.id){case"Version":t={PRODUCT_VERSION:1,PRODUCT_ID:73,PRODUCT_HARD:22,PRODUCT_VARIANT:8};break;case"Free_Cell_Count":t={COUNT:122};break;case"Functions":t={PROTOCOLS:{NERO_II_SmartHome:!0,INTRO_II_SmartHome:!0},MODEM_FUNCTIONS:{}};break;case"Change_modem_work_mode":"Work_Mode"==o.MODEM_MODE&&(t="OK");break;case"Write_Group":case"Set_To_Comfort":case"Set_To_Comfort_1":case"Set_To_Comfort_2":case"Up":case"Down":case"Stop":t="OK"}null!=t&&("string"==typeof t&&(t={id:"answer_Result",RESULT:t}),r.write(e.encode(t.id||"answer_"+o.id,t)))},300)})});return n.on("error",function(e){return console.log("stub error:".red,e)}),n.listen(o),n};n(2233),o.unlink("/tmp/stub2233",function(){return n("/tmp/stub2233")})})}();
//# sourceMappingURL=out.js.map

},{"colors":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/index.js","fs":false,"localUtils":"/home/vadzim/v/work/nerojs/src/localUtils.js","modem":"/home/vadzim/v/work/nerojs/src/modem.js","net":false}],"/home/vadzim/v/work/nerojs/src/pingpong.js":[function(require,module,exports){
!function(){!function(e){var t=global.performance||Date,r=0,n=t.now(),s=require,i=function(){r+=t.now()-n,require=s;try{return s.apply(this,arguments)}finally{require=i,n=t.now()}};require=i;try{e()}finally{require=s,r+=t.now()-n,r/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/pingpong.js"]=r}}(function(){"use strict";var e=require("fs"),t=require("stream"),r=require("constants"),n=require("co"),s=(require("lodash"),n.cb(e.write)),i=n.cb(e.read),u=function(e){$traceurRuntime.superConstructor(a).call(this),null==e&&(e={}),this.options={},this.options.bufferSize=e.bufferSize||65536,this.options.timeout=e.timeout,this.buf=new Buffer(this.options.bufferSize)},a=u;$traceurRuntime.createClass(u,{connect:function(t){var n=this;e.open(t,r.O_RDWR|r.O_NOCTTY,function(e,t){e?n.emit("error",e):(n.fd=t,n.emit("connect"))})},destroy:function(){null!=this.fd&&(e.close(this.fd),this.fd=null)},unref:function(){},_read:function(){return null==this.fd?this.push(null):void 0},_write:function(e,t,r){n.gocall($traceurRuntime.initGeneratorFunction(function u(){var n,a,o,c,f;return $traceurRuntime.createGeneratorInstance(function(u){for(;;)switch(u.state){case 0:n=this,o=function(e){return a&&clearTimeout(a),e&&n.destroy(),r(e)},a=this.options.timeout&&setTimeout(function(){return o(new Error("timeout"))},this.options.timeout),u.state=23;break;case 23:u.pushTry(15,null),u.state=18;break;case 18:"string"==typeof e&&(e=new Buffer(e,t)),u.state=10;break;case 10:return u.state=2,s(this.fd,e,0,e.length,null);case 2:u.maybeThrow(),u.state=4;break;case 4:return u.state=6,i(this.fd,this.buf,0,this.buf.length,null);case 6:c=u.sent,u.state=8;break;case 8:this.push(this.buf.slice(0,c)),u.state=12;break;case 12:u.popTry(),u.state=20;break;case 15:u.popTry(),f=u.storedException,u.state=13;break;case 13:u.returnValue=o(f),u.state=-2;break;case 20:o(),u.state=-2;break;default:return u.end()}},u,this)}),this)}},{},t.Duplex),module.exports=u})}();
//# sourceMappingURL=out.js.map

},{"co":"/home/vadzim/v/work/nerojs/src/co.js","constants":false,"fs":false,"lodash":"/home/vadzim/v/work/nerojs/node_modules/lodash/dist/lodash.js","stream":false}],"/home/vadzim/v/work/nerojs/src/platform.js":[function(require,module,exports){
!function(){!function(r){var t=global.performance||Date,e=0,o=t.now(),n=require,i=function(){e+=t.now()-o,require=n;try{return n.apply(this,arguments)}finally{require=i,o=t.now()}};require=i;try{r()}finally{require=n,e+=t.now()-o,e/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/platform.js"]=e}}(function(){"use strict";if(Object.defineProperty(Object.prototype,"_LOG_",{value:function(){return console.log(this),this},configurable:!0}),"function"==typeof Symbol&&Symbol.iterator){var r=null;try{r=eval.call(null,"(function*(){}().constructor.prototype)")}catch(t){}r&&!r[Symbol.iterator]&&(r[Symbol.iterator]=function(){return this})}})}();
//# sourceMappingURL=out.js.map

},{}],"/home/vadzim/v/work/nerojs/src/ra.js":[function(require,module,exports){
!function(){!function(e){var t=global.performance||Date,r=0,n=t.now(),i=require,a=function(){r+=t.now()-n,require=i;try{return i.apply(this,arguments)}finally{require=a,n=t.now()}};require=a;try{e()}finally{require=i,r+=t.now()-n,r/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/ra.js"]=r}}(function(){"use strict";function e(){}var t,r=require("later").push,n=require("co"),i=require("uid"),a=require("lodash"),l="ACTION_"+i(),u={};u.scheduled=!1,u.procs=[],u.index=0,u.maxIndex=32768,u.processing=!1,u.totalTime=0,u.maxTime=0,u.maxTime1=0,u.minTime=1/0,u.runCount=0,u.runAllCount=0,global.updates=u;var o=global.performance||global.Date;u.start=o.now(),u.log=function(){return console.log(":: "+u.totalTime/1e3+" / "+(o.now()-u.start)/1e3+" ("+u.maxTime/1e3+", "+u.maxTime1/1e3+", "+u.minTime/1e3+", "+A.maxCount+", "+u.runCount+", "+u.runAllCount+")")},u.checkSchedule=function(){!u.scheduled&&u.procs.length>0&&(u.scheduled=!0,r(u.tick))},u.tick=function(){u.scheduled=!1;var e,t=function(){try{return u.runAll(),0}catch(e){setTimeout(function(){throw e},1)}};e:for(var r=0;1e3>r;++r)switch(e=t(r)){case 0:break e}u.checkSchedule()},u.runAll=function(){var e=o.now(),t=e,r=u.runCount,i=u.processing;u.processing=!0;var a=n.global[l];null!=a&&(n.global[l]=null);try{for(;u.index<u.procs.length;){global.APP_TIMEOUT&&global.APP_TIMEOUT<Date.now&&alert("Application is running too long");var s=u.procs[u.index];++u.index,++u.runCount,u.index>=u.maxIndex&&3*u.index>u.procs.length&&(u.procs.splice(0,u.index),u.index=0),s();var c=o.now();u.maxTime1<c-t&&(u.maxTime1=c-t),t=c}u.index=u.procs.length=0}finally{if(null!=a&&(n.global[l]=a),u.processing=i,!i){var h=o.now()-e;u.totalTime+=h,u.maxTime<h&&(u.maxTime=h),r=u.runCount-r,r&&(++u.runAllCount,u.minTime>h&&(u.minTime=h))}}},u.later=function(e){u.procs.push(e),u.checkSchedule()},u.later.then=u.later;var s="undefined"==typeof Immutable?null:Immutable.Map(),c=function(e){return null==e||e==s?null:e},h=function(){return this},f=function(e){return e&&"object"==typeof e&&e.constructor==Object},_=function(e){return null==e||null==e.valueOf?e:e.valueOf()},b=function(e){throw new Error('access to an undeclared property "'+this.$name+"."+e+'"')},p=Object.create(null),v=Object.create(null),d=function(e){p[e]||(p[e]=!0,Object.defineProperty(v,e,{get:function(){b.call(this,e)},set:function(){b.call(this,e)}}))};e.prototype=v,global.APP_DEBUG&&(e.prototype=(global.__UsedScriptIdentifiers__+"").split(/[\s,]+/).reduce(function(e,t){var r;return Object.create(e,(r={},Object.defineProperty(r,t,{value:{get:function(){b.call(this,t)},set:function(){b.call(this,t)}},configurable:!0,enumerable:!0,writable:!0}),r))},e.prototype)),e.prototype=Object.create(e.prototype,{toString:{value:{}.toString},valueOf:{value:{}.valueOf},toLocaleString:{value:{}.toLocaleString},hasOwnProperty:{value:{}.hasOwnProperty},isPrototypeOf:{value:{}.isPrototypeOf},propertyIsEnumerable:{value:{}.propertyIsEnumerable},$name:{value:"<...>",writable:1}});var g=[];Object.freeze(g);var m=function(){$traceurRuntime.superConstructor(y).apply(this,arguments)},y=m;$traceurRuntime.createClass(m,{get props(){throw new Error("access to deprecated 'props' property detected")},get declaredProperties(){return this.live},get length(){var e=this.valueOf();return null==e?0:Object.keys(e).length},get:function(e){if(null!=e){var t=this.valueOf();if(null!=t&&t.hasOwnProperty(e))return t[e]}return null},map:function(e){var t=this.valueOf();return t&&a.mapValues(t,e)},keys:function(){var e=this.valueOf();return null==e?g:Object.keys(e)}},{},e);var w=function(e){$traceurRuntime.superConstructor(O).call(this),this._parent=e},O=w;$traceurRuntime.createClass(w,{getReadOnly:function(){return this},get live(){return this._parent.live},get $name(){return this._parent.$name},valueOf:function(){return this._parent.valueOf.apply(this._parent,arguments)},noTouch:function(){return this._parent.noTouch.apply(this._parent,arguments)},toString:function(){return this._parent.toString.apply(this._parent,arguments)},toJSON:function(){return this._parent.toJSON.apply(this._parent,arguments)},getName:function(){return this._parent.getName.apply(this._parent,arguments)}},{},m);var k=function(e,t){var r,n=t?function(){var n=e.apply(this,arguments);return Object.is(r,n)||t(r,n)||(r=n),r}:function(){return e.apply(this,arguments)};return n.isGetter=!0,n},x=function(e){function t(){return e.apply(this,arguments)}return t.typeDescriptor=!0,t},j=function(e,t,r){return new A(t,e,r).linkName(e,":getter")},P=function(e,t,r){return new A(function(){return t(e.valueOf())},null,r).linkName(e,":setter")},S=function(e){var t=this;$traceurRuntime.superConstructor(T).call(this),this._id=i(),this._value=null,this._error=null,this._isValueEqual=Object.is,this._initialized=!1,this._closed=!1,this._dirty=!1,this._live=null,this._liveArray=null,this._actionsArr=[],this._parent=null,this._onchange=[],this.$name={toString:function(){return t.getName()}},this._notifyWritten(),this._sticky=!!e},T=S;$traceurRuntime.createClass(S,{valueOf:function(){return this._read()},assign:function(e){return this._write(e,!1,null)},"throw":function(e){return this._write(null,!1,e)},touch:function(){this._fire()},noTouch:function(){if(this._dirty&&this._updateSelf(),this._error)throw this._error;return this._value},then:function(e){this._onchange.push(e)},close:function(){if(!this._closed){if(this._closed=!0,this._fire(),this._parent&&this._parent.close(),this._liveArray){for(var e=this._liveArray[$traceurRuntime.toProperty(Symbol.iterator)](),t=void 0;!(t=e.next()).done;){var r=t.value;r.close()}this._liveArray=null}this._value=null,this._error=null,this._actionsArr=null,this._parent=null}},get live(){return this._live},getReadOnly:function(){return this._readOnly||(this._readOnly=new w(this))},toString:function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this._read();return null!=n&&n.toString?(e=n).toString.apply(e,$traceurRuntime.spread(t)):""+n},toJSON:function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this._read();return null!=n&&n.toJSON?(e=n).toJSON.apply(e,$traceurRuntime.spread(t)):n},setName:function(e){return this._name=e,this},getName:function(){for(var e=this._name||this._key,t=this._parent;t;)e=(t._name||t._key)+"."+e,t=t._parent;return e},defineProperty:function(e){if(this._live||(this._live={},this._liveArray=[]),e){d(e);var t=this._live[e];return this._live.hasOwnProperty(e)?t:(this._liveArray.push(t=this._live[e]=new T(this._sticky)),t._key=e,t._parent=this,t._level=(this._level||0)+1,Object.defineProperty(this,e,{enumerable:!0,configurable:!0,get:function(){return t._live?t:t._read()},set:function(e){return t._write(e,!1)}}),null!=this._value&&t._write(this._value[e],!0),t)}},init:function(e){this._init(e,!1,!1)},setConst:function(e,t){return Object.defineProperty(this,e,{enumerable:!0,get:function(){return t}}),this},setVar:function(e,t){return Object.defineProperty(this,e,{enumerable:!0,writable:!0,value:t}),this},_init:function(e,t,r,n){var i=this;if(!t&&i._initialized)throw new Error("already initialized");if(this._parent&&(this._parent._dirty=!0),i._initialized=!0,n&&(this._isValueEqual=n),e=c(e),null!=e){if("function"==typeof e&&e.typeDescriptor&&(e=e(i._key)),"function"==typeof e&&(r||e.isGetter))return void j(i,e,this._sticky);if(!f(e))return void(null==e||"object"!=typeof e||e.valueOf==Object.prototype.valueOf?i._value=e:i._init(function(){return _(e)},!0,!0));if(t)throw new Error("wrong parameters");i.defineProperty();var a,l=function(t){var r=Object.getOwnPropertyDescriptor(e,t);if(!r)return 0;var n=r.get,a=r.value;if(r.set)throw new Error("wrong parameters");n&&(a=0==n.length?n:function(){return n()}),"$"==t?i._init(a,!0,!!n):i.defineProperty(t)._init(a,!1,!!n)};e:for(var u in e)switch(a=l(u)){case 0:continue e}}},_read:function(){this._dirty&&this._updateSelf();var e=n.global[l];if(e&&(this._closed?e.close():e.onread(this)),this._error)throw this._error;return this._value},_write:function(e,t,r){if(null==r&&(r=null),this._initialized=!0,this._dirty=!1,e=c(e),this._closed){var i=n.global[l];i&&i.close()}else if(!this._isValueEqual(this._value,e)||this._error!=r){if(this._value=e,this._error=r,this._live)for(var a=this._liveArray[$traceurRuntime.toProperty(Symbol.iterator)](),u=void 0;!(u=a.next()).done;){var o=u.value;o._write(e&&e[o._key],!0)}if(this._fire(),!t)for(var s=this._parent;s&&!s._dirty;)s._dirty=!0,s._fire()}return t||this._notifyWritten(),e},_updateSelf:function(){var e=0,t={};for(var r in this._value)this._value.hasOwnProperty(r)&&(t[r]=this._value[r],++e);for(var n=this._liveArray[$traceurRuntime.toProperty(Symbol.iterator)](),i=void 0;!(i=n.next()).done;){var a=i.value;if(a._dirty&&a._updateSelf(),a._error)return this._error=a._error,this._value=null,void(this._dirty=!1);var l=a._value;null==l?t.hasOwnProperty(a._key)&&(delete t[a._key],--e):(t[a._key]=l,e=1/0)}0==e&&(t=null),this._value=t,this._dirty=!1},debug:function(e){this._actionsArr.push({action:{_fire:e}})},"debugger":function(){this.debug(function(){})},_fire:function(){var e;if(e=this._actionsArr,e.length){for(var t=0;t<e.length;t++){var r=e[t];r.action&&r.action._fire(),r.pushedC=!1}e.length=0}if(e=this._onchange,e.length){for(var n=0;n<e.length;n++)u.later(e[n]);e.length=0}},_notifyWritten:function(){var e=n.global[l];e&&e.onwritten(this)}},{},m);var C=function(e){return setTimeout(function(){throw e},1)},A=function(e,t,r){var a=this;this._id=i(),this._fun=e,this._dest=t,this._cellSet={},this._cellSetSize=0,this._cellArr=[],this.$name={toString:function(){return"<Action>"}},this._thread=n.gocall(this._loop,this).linkName(this).waitForInput(),this._runCount=0;var u;(u=n.global[l])&&u._children&&u._children.push(this),this._children=null,this._threads=null,this._onthread=null,this._generatorProxy=null,this._generator=null,r&&(this._children=[],this._threads=[],this._onthread=function(e){return a._threads.push(e)})},$=A;$traceurRuntime.createClass(A,(t={},Object.defineProperty(t,"linkName",{value:function(e){var t=void 0!==arguments[1]?arguments[1]:":action";return e.$name&&(e=e.$name),this.$name.toString=function(){return""+e+t},this},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,"_initGeneratorProxy",{value:function(){var e,t,r=this,i=function(){return r._generator.next(t)},a=function(){return r._generator.throw(t)};this._generatorProxy=(e={},Object.defineProperty(e,Symbol.iterator,{value:h,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(e,"next",{value:function(e){t=e;try{return n.catchThreads(i,r._onthread)}finally{t=null}},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(e,"throw",{value:function(e){t=e;try{return n.catchThreads(a,r._onthread)}finally{t=null}},configurable:!0,enumerable:!0,writable:!0}),e)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,"_loop",{value:$traceurRuntime.initGeneratorFunction(function R(){var e,t,r,i,a,o,s,c,h;return $traceurRuntime.createGeneratorInstance(function(f){for(;;)switch(f.state){case 0:e=this,f.state=99;break;case 99:return f.state=2,u.later;case 2:f.maybeThrow(),f.state=4;break;case 4:t={then:function(t){e._onchange=t}},n.global[l]=this,r=!1,f.state=101;break;case 101:f.pushTry(90,null),f.state=93;break;case 93:f.state=r?69:65;break;case 65:f.state=this.isClosed()?7:64;break;case 64:this._begin(),r=!0,i=void 0,f.state=67;break;case 67:f.state=this._children?38:60;break;case 38:i=n.catchThreads(this._fun,this._onthread),f.state=39;break;case 39:f.state=i&&i.next&&i.throw?30:36;break;case 30:this._generatorProxy||this._initGeneratorProxy(),this._generator=i,f.state=31;break;case 31:f.pushTry(null,23),f.state=25;break;case 25:a=f.wrapYieldStar(this._generatorProxy[Symbol.iterator]()),f.sent=void 0,f.action="next",f.state=19;break;case 19:o=a[f.action](f.sentIgnoreThrow),f.state=16;break;case 16:f.state=o.done?10:9;break;case 10:f.sent=o.value,f.state=17;break;case 9:return f.state=19,o.value;case 17:i=f.sentIgnoreThrow,f.state=23,f.finallyFallThrough=21;break;case 23:f.popTry(),f.state=29;break;case 29:this._generator=null,f.state=27;break;case 36:f.state=i&&i.then?32:21;break;case 32:return f.state=33,i;case 33:i=f.sent,f.state=21;break;case 60:i=this._fun(),f.state=61;break;case 61:f.state=i&&i.next&&i.throw?50:58;break;case 50:s=f.wrapYieldStar(i[Symbol.iterator]()),f.sent=void 0,f.action="next",f.state=51;break;case 51:c=s[f.action](f.sentIgnoreThrow),f.state=48;break;case 48:f.state=c.done?42:41;break;case 42:f.sent=c.value,f.state=49;break;case 41:return f.state=51,c.value;case 49:i=f.sentIgnoreThrow,f.state=21;break;case 58:f.state=i&&i.then?54:21;break;case 54:return f.state=55,i;case 55:i=f.sent,f.state=21;break;case 21:this._dest&&this._dest.assign(i),f.state=69;break;case 69:r=!1,f.state=83;break;case 83:f.state=this.isClosed()?7:80;break;case 80:switch(this._end()){default:f.state=93;break;case!1:f.state=7;break;case!0:f.state=73}break;case 74:f.maybeThrow(),f.state=93;break;case 73:return f.state=74,t;case 84:f.popTry(),f.state=101;break;case 90:f.popTry(),h=f.storedException,f.state=89;break;case 89:f.state=h instanceof n.EKill?7:87;break;case 87:r?this._dest.throw(h):C(h),f.state=101;break;case 7:n.global[l]=null,this._finalize(),f.state=-2;break;case 27:f.state=f.finallyFallThrough;break;default:return f.end()}},R,this)}),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,"isClosed",{value:function(){return!this._cellSet},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,"close",{value:function(){var e=this._thread;this._fire(),this._finalize(),e&&e.kill()},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,"_closeChildren",{value:function(){var e;if(e=this._children){for(var t=0,r=e.length;r>t;++t)e[t].close();e.length=0}if(e=this._threads){for(var n=0,i=e.length;i>n;++n)e[n].kill();e.length=0}},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,"_finalize",{value:function(){this._unsubscribe(),this._cellSet=null,this._cellArr=null,this._fun=null,this._dest=null,this._thread=null},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,"_begin",{value:function(){this._unsubscribe(),++this._runCount,$.maxCount<this._runCount&&($.maxCount=this._runCount)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,"_unsubscribe",{value:function(){this._onchange=null;var e=this._cellArr;if(e){for(var t=0;t<e.length;++t){var r=e[t];r.cell=null,r.value=null,r.action=null,r.read=!1,r.written=!1,r.pushedA=!1}this._cellSetSize>32&&e.length<this._cellSetSize/4&&(this._cellSet={}),e.length=0}this._closeChildren()},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,"_end",{value:function(){for(var e=!1,t=this._cellArr,r=0;r<t.length;++r){var n=t[r];if(n.written)n.action=null;else{if(n.pushedC||(n.cell._actionsArr.push(n),n.pushedC=!0),!Object.is(n.value,n.cell._value)||!Object.is(n.error,n.cell._error))return null;n.action=this,e=!0}n.value=null,n.cell=null}return e},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,"_linkCell",{value:function(e){var t=this._cellSet[e._id];return null==t&&(t=this._cellSet[e._id]={cell:null,value:null,error:null,action:null,read:!1,written:!1,pushedA:!1,pushedC:!1},++this._cellSetSize),t.pushedA||(this._cellArr.push(t),t.cell=e,t.pushedA=!0),t},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,"onread",{value:function(e){var t=this._linkCell(e);t.read=!0,t.value=e._value,t.error=e._error},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,"onwritten",{value:function(e){this._linkCell(e).written=!0},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,"_fire",{value:function(){this._onchange&&u.later(this._onchange),this._unsubscribe()},configurable:!0,enumerable:!0,writable:!0}),t),{}),A.maxCount=0;var E=function(e,t,r,n){for(var i=t[$traceurRuntime.toProperty(Symbol.iterator)](),a=void 0;!(a=i.next()).done;){var l=a.value;if(null!=l&&"function"!=typeof l)throw new Error("wrong parameters")}var u=new S(r);void 0!==e&&u._init(e,!1,!0,n);for(var o=t[$traceurRuntime.toProperty(Symbol.iterator)](),s=void 0;!(s=o.next()).done;){var c=s.value;c&&(c.length?P:j)(u,c,r)}return u},I=function(){{var e,t,r,n,i=0;arguments.length-1}return"string"==typeof arguments[i]&&(e=arguments[i++]),"boolean"==typeof arguments[i]&&(r=arguments[i++]),t=arguments[i++],"function"==typeof arguments[i]&&(n=arguments[i++]),E(t,[],r,n)};exports=module.exports=I,exports.ra=I,exports.clean=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return E(e,t,!1)},exports.detach=function(e){var t;if(!(t=n.global[l]))return e();n.global[l]=null;try{return e()}finally{n.global[l]=t}},exports.Cell=S,exports.ImmutableInterface=m,exports.AbstractGuard=e,exports.Getter=k,exports.Type=x,exports.importFrom=function(e){return x(function(t){return k(function(){return e.live[t].valueOf()})})},exports.forceCalculations=function(){return u.runAll()},exports.map=function(e,t,r){throw new Error("message")},exports.slice=function(e,t,r){throw new Error("message")}})}();
//# sourceMappingURL=out.js.map

},{"co":"/home/vadzim/v/work/nerojs/src/co.js","later":"/home/vadzim/v/work/nerojs/src/later.js","lodash":"/home/vadzim/v/work/nerojs/node_modules/lodash/dist/lodash.js","uid":"/home/vadzim/v/work/nerojs/src/uid.js"}],"/home/vadzim/v/work/nerojs/src/rewriter.js":[function(require,module,exports){
!function(){!function(r){var e=global.performance||Date,t=0,i=e.now(),n=require,u=function(){t+=e.now()-i,require=n;try{return n.apply(this,arguments)}finally{require=u,i=e.now()}};require=u;try{r()}finally{require=n,t+=e.now()-i,t/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/rewriter.js"]=t}}(function(){"use strict";var r=require("express");r.Router.rewrite=r.application.rewrite=function(r,e){return this.all(r,function(r,t,i){r.url=e(r.url),i()})}})}();
//# sourceMappingURL=out.js.map

},{"express":false}],"/home/vadzim/v/work/nerojs/src/scheduler.js":[function(require,module,exports){
!function(){!function(s){var i=global.performance||Date,t=0,e=i.now(),h=require,n=function(){t+=i.now()-e,require=h;try{return h.apply(this,arguments)}finally{require=n,e=i.now()}};require=n;try{s()}finally{require=h,t+=i.now()-e,t/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/scheduler.js"]=t}}(function(){"use strict";var s=32768,i=function(s){this.setImmediate=s&&s.setImmediate||process.nextTick,this.maxTicks=s&&s.maxTicks||1/0,this._procs=[],this._index=0,this._scheduled=!1,this._processing=!1,this._handler=this._handler.bind(this),this.push=this.then.bind(this)};$traceurRuntime.createClass(i,{then:function(s){this._procs.push(s),this._processing||this._schedule()},_schedule:function(){this._scheduled||(this.setImmediate(this._handler),this._scheduled=!0)},_handler:function(){this._scheduled=!1;for(var s=this,i=function(){try{s._handler1()}catch(i){setTimeout(function(){throw i},0)}};this._procs.length;)i()},_handler1:function(){this._processing=!0;try{for(var i=0;this._index<this._procs.length&&++i<=this.maxTicks;){var t=this._procs[this._index];this._procs[this._index]=null,++this._index,this._index>=s&&3*this._index>this._procs.length&&(this._procs.splice(0,this._index),this._index=0),t()}}finally{this._processing=!1,this._procs.length&&this._index>=this._procs.length&&(this._procs.length=this._index=0),this._index&&this._schedule()}}},{}),module.exports=i})}();
//# sourceMappingURL=out.js.map

},{}],"/home/vadzim/v/work/nerojs/src/server.js":[function(require,module,exports){
!function(){!function(e){var t=global.performance||Date,r=0,n=t.now(),a=require,o=function(){r+=t.now()-n,require=a;try{return a.apply(this,arguments)}finally{require=o,n=t.now()}};require=o;try{e()}finally{require=a,r+=t.now()-n,r/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/server.js"]=r}}(function(){module.exports=function(){"use strict";function e(e,r){var n,a;return $traceurRuntime.createGeneratorInstance(function(t){for(;;)switch(t.state){case 0:return t.state=2,O.cb(o.readdir)(e);case 2:n=t.sent,t.state=4;break;case 4:r&&(n=n.filter(r)),a=n.map(function(t){return[t,O.cb(o.readFile)(e+"/"+t,"utf8")]}),t.state=8;break;case 8:t.returnValue=R.zipObject(a),t.state=-2;break;default:return t.end()}},t,this)}var t=$traceurRuntime.initGeneratorFunction(e);require("checkreboot"),require("platform");var r=!1,n=require("yamljs"),a=require("path"),o=require("fs"),s=require("os"),u=(require("csvConfig"),require("http-status")),i=require("http"),f=require("url"),l=require("net"),d=require("crypto"),b=require("stream"),p=require("glob"),k=(require("constants"),require("pingpong")),h=require("actionToCommands"),g=require("deviceActions"),v=require("deviceTypes"),w=require("modem"),_=require("inc"),R=require("lodash"),y=require("ra"),O=require("co"),T=require("localUtils"),q=require("uid"),S=process.argv[2]||__dirname+"/../server.conf",C=T.tryElse(function(){return n.load(S)},function(){}),I=2e3;o.mkdir(__dirname+"/../var",function(){}),C=R.merge({port:80,serviceport:8088,modem:"/dev/ttyACM*",modemPingInterval:6e3,boss:"controller.sh.neroelectronics.vadzim.info:8011",auth:"./user.conf",restoreConnectionInterval:2e3},C);var $="/tmp/"+q(),E=a.resolve(a.dirname(S),C.auth),G=T.catch(function(){return n.load(E)},null);if(G=R.merge({name:"nero"},G),G&&!G.modem)throw new Error("modem name required in user configuration file");if(G&&!G.name)throw new Error("name required in user configuration file");if(G&&!G.userkey)throw new Error("userkey required in user configuration file");if(G){var N=d.createHash("sha256");N.update(JSON.stringify([String(G.name||null),String(G.userkey||null),String(G.modemkey||null),String(G.modem||null)])),G.hash=N.digest("hex")}var j="Smart Home",x=function(e){e.end(),e.unref(),e.destroy()},F=y({interfacesTimer:!0,get updateInterfacesTimer(){setInterval(function(){return F.live.interfacesTimer.touch()},I)},interfaces:y.Getter(function(){var e;return F.interfacesTimer&&(e=[]).concat.apply(e,$traceurRuntime.spread(R.map(s.networkInterfaces(),function(e){return e.filter(function(e){return!e.internal&&!e.scopeid}).map(function(e){var t=e.address;return"IPv6"==e.family&&(t="["+t+"]"),{url:"http://"+t+":"+C.serviceport}})})))},T.JSONEqual)}),D=function(e,t){$traceurRuntime.superConstructor(U).call(this,e),t&&R.assign(this,t)},U=D;$traceurRuntime.createClass(D,{},{},Error);var A=y({retryInterval:C.restoreConnectionInterval,port:C.modem,proxy:C.modemProxy,portIndex:0,socket:null,pingInterval:C.modemPingInterval,createSocket:function(){return new Promise(function(e,t){console.error("creating socket");var r,n=R.once(function(){A.socket&&r!=A.socket||(setTimeout(function(){A.socket||A.createSocket()},A.retryInterval),r&&(x(r),r=null,A.socket=null))}),a=function(e){console.error("socket error",e),n(),t(e)},o=function(t){A.socket&&(x(A.socket),A.socket=null),console.error("trying to connect to: "+t+(A.proxy?" via "+A.proxy:"")),A.proxy?(r=new b.Duplex,r.destroy=function(){this.ps.stdin.end(),this.ps.kill()},r.unref=function(){},r._read=function(){},r._write=function(e,t,r){this.ps.stdin.write(e,t),r()},r.connect=function(e){var r=this;console.log("starting proxy",A.proxy,t),this.ps=require("child_process").spawn(A.proxy,[e]),this.ps.stderr.on("data",function(e){return process.stdout.write(String(e).blue)}),this.ps.stdout.on("data",function(e){return r.push(e)}),this.ps.on("error",function(e){return r.emit("error",e)}),this.ps.stdin.on("error",function(e){return r.emit("error",e)}),this.ps.on("exit",function(){return r.push(null)}),this.emit("connect")}):r="number"==typeof t?new l.Socket:new k({timeout:3e3}),r.on("connect",function(){r.unref(),A.socket=r,e(r)}),r.on("error",a),r.on("end",function(){console.error("socket ended"),n()}),r.on("close",function(){console.error("socket closed"),n()}),r.on("timeout",function(){console.error("socket timeout"),n()}),r.connect(t)};A.port==+A.port?o(+A.port):p(A.port,{},function(e,t){return e?a(e):t.length?(A.portIndex>=t.length&&(A.portIndex=0),void o(t[A.portIndex++])):a(new Error("Cannot find a modem in "+A.port))})})},get initializeSocket(){A.createSocket()},get handle(){return A.socket&&new w(A.socket,function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(e=console).info.apply(e,$traceurRuntime.spread([T.time()],t))})},rawcommand:$traceurRuntime.initGeneratorFunction(function X(){var e,t,r,n,a,o,s,c,u,i,f,l,d,m,b,p,k,h,g,v,w,_,R,y,O,T,q,S,C,I,$,E=arguments;return $traceurRuntime.createGeneratorInstance(function(G){for(;;)switch(G.state){case 0:for(e=[],t=0;t<E.length;t++)e[t]=E[t];G.state=17;break;case 17:r=A.handle,G.state=13;break;case 13:G.state=r?5:9;break;case 5:n=A.handle,a=n.lock,o=$traceurRuntime.initGeneratorFunction,S=o.call($traceurRuntime,function N(t){var r,n,a,o,S,C;return s=$traceurRuntime.createGeneratorInstance,q=s.call($traceurRuntime,function(s){for(;;)switch(c=s.state){case 0:u=s.pushTry,i=u.call(s,13,null),s.state=16,16;break;case 16:f=t.apply,r=f,f,l=$traceurRuntime.spread,n=l,l,d=n.call,m=d.call(n,$traceurRuntime,e),a=m,m,b=r.call,p=b.call(r,t,void 0,a),o=p,p,s.state=6,6;break;case 6:return s.state=2,o;case 2:k=s.sent,S=k,k,s.state=4,4;break;case 4:s.returnValue=S,S,s.state=-2,-2;break;case 8:h=s.popTry,g=h.call(s),s.state=-2,-2;break;case 13:v=s.popTry,w=v.call(s),_=s.storedException,C=_,_,s.state=11,11;break;case 11:R=console.error,y=R.call(console,"modem error",C,"executing",e),s.state=12,12;break;case 12:s.returnValue=null,null,s.state=-2,-2;break;default:return O=s.end,T=O.call(s)}},N,this)}),C=a.call(n,S),G.state=6;break;case 6:return G.state=2,C;case 2:I=G.sent,G.state=4;break;case 4:$=I,G.state=8;break;case 9:$=r,G.state=8;break;case 8:G.returnValue=$,G.state=-2;break;default:return G.end()}},X,this)}),get version(){return A.rawcommand("Version")},get pingModem(){return A.pingInterval&&y($traceurRuntime.initGeneratorFunction(function e(){return $traceurRuntime.createGeneratorInstance(function(e){for(;;)switch(e.state){case 0:return e.state=2,O.sleep(A.pingInterval);case 2:e.maybeThrow(),e.state=4;break;case 4:return e.state=6,A.rawcommand("Version");case 6:e.maybeThrow(),e.state=0;break;default:return e.end()}},e,this)}))},get sversion(){return A.version&&String.fromCharCode(A.version.PRODUCT_VERSION,A.version.PRODUCT_ID,A.version.PRODUCT_HARD,A.version.PRODUCT_VARIANT)},sminVersion:String.fromCharCode(1,5),get versionOK(){return A.sversion&&A.sversion>=A.sminVersion},vercommand:$traceurRuntime.initGeneratorFunction(function et(){var e,t,r,n,a,o,s,c,u,i,f,l=arguments;return $traceurRuntime.createGeneratorInstance(function(d){for(;;)switch(d.state){case 0:for(t=[],r=0;r<l.length;r++)t[r]=l[r];d.state=17;break;case 17:n=A.versionOK,d.state=13;break;case 13:d.state=n?5:9;break;case 9:f=null,d.state=10;break;case 5:e=A,a=A.rawcommand,o=a.apply,s=$traceurRuntime.spread,c=s.call($traceurRuntime,t),u=o.call(a,e,c),d.state=6;break;case 6:return d.state=2,u;case 2:i=d.sent,d.state=4;break;case 4:f=i,d.state=10;break;case 10:d.returnValue=f,d.state=-2;break;default:return d.end()}},et,this)}),get functions(){return A.vercommand("Functions")},get initProtocols(){return A.vercommand("Change_protocol",{PROTOCOL_NUM:"All_protocols"})},get protocolOK(){return!!(A.functions&&A.functions.PROTOCOLS&&A.initProtocols)},sendcommand:$traceurRuntime.initGeneratorFunction(function tt(){var e,t,r,n,a,o,s,c,u,i,f,l=arguments;return $traceurRuntime.createGeneratorInstance(function(d){for(;;)switch(d.state){case 0:for(t=[],r=0;r<l.length;r++)t[r]=l[r];d.state=17;break;case 17:n=A.protocolOK,d.state=13;break;case 13:d.state=n?5:9;break;case 9:f=null,d.state=10;break;case 5:e=A,a=A.vercommand,o=a.apply,s=$traceurRuntime.spread,c=s.call($traceurRuntime,t),u=o.call(a,e,c),d.state=6;break;case 6:return d.state=2,u;case 2:i=d.sent,d.state=4;break;case 4:f=i,d.state=10;break;case 10:d.returnValue=f,d.state=-2;break;default:return d.end()}},tt,this)}),get freeCells(){return A.sendcommand("Free_Cell_Count")},setModemWorkMode:function(){return A.command("Change_modem_work_mode",{MODEM_MODE:"Work_Mode"})},get initModemWorkMode(){return A.sendcommand("Change_modem_work_mode",{MODEM_MODE:"Work_Mode"})},command:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return O.gocall($traceurRuntime.initGeneratorFunction(function r(){var t,n,a,o,s,c,u,i;return $traceurRuntime.createGeneratorInstance(function(r){for(;;)switch(r.state){case 0:t=this,n=this,a=n.sendcommand,o=a.apply,s=$traceurRuntime.spread,c=s.call($traceurRuntime,e),u=o.call(a,t,c),r.state=6;break;case 6:return r.state=2,u;case 2:i=r.sent,r.state=4;break;case 4:r.returnValue=i,r.state=-2;break;default:return r.end()}},r,this)}),this)},get showModemStatus(){console.info("Modem is "+(A.protocolOK?"active":"inactive"))},session:function(e){return y.detach(function(){return O.go($traceurRuntime.initGeneratorFunction(function t(){var r,n,a,o,s,c,u;return $traceurRuntime.createGeneratorInstance(function(t){for(;;)switch(t.state){case 0:t.state=A.protocolOK?5:13;break;case 5:r=A.handle,n=r.lock,a=n.call(r,e),t.state=6;break;case 6:return t.state=2,a;case 2:o=t.sent,t.state=4;break;case 4:t.returnValue=o,t.state=-2;break;case 13:s=T.returnNullPromise,c=e(s),t.state=14;break;case 14:return t.state=10,c;case 10:u=t.sent,t.state=12;break;case 12:t.returnValue=u,t.state=-2;break;default:return t.end()}},t,this)}))})},check:function(e){var t=void 0!==arguments[1]?arguments[1]:"OK";if("answer_Result"!==e.id||e.RESULT!==t)throw new Error("unexpected modem result");return e.RESULT},userCommand:$traceurRuntime.initGeneratorFunction(function rt(e){var t,r,n,a,o,s,c,i,f,l,d,m,b,p,k;return $traceurRuntime.createGeneratorInstance(function(T){for(;;)switch(T.state){case 0:t=e,r=t.deviceId,n=t.command,a=t.data,o=t.socket,s=function(e,t){throw new D(t||u[e],{status:e})},T.state=26;break;case 26:return T.state=2,A.devices.waitForReady(o);case 2:T.maybeThrow(),T.state=4;break;case 4:c=A.devices.getState()[r],i=n,c||s(u.NOT_FOUND),T.state=28;break;case 28:T.state=c.group?16:19;break;case 19:T.state="Link"==i?13:17;break;case 13:f=R.reduce(A.devices.getState(),function(e,t){return t.group&&(e[t.group]=!0),e},[]),T.state=14;break;case 14:l=2,T.state=12;break;case 12:T.state=1022>=l?9:10;break;case 6:++l,T.state=12;break;case 9:T.state=null==f[l]?7:6;break;case 7:A.devices.applyItemChanges(r,{group:l}),T.state=10;break;case 10:y.forceCalculations(),c=A.devices.getState()[r],c.group||s(u.INTERNAL_SERVER_ERROR,"No more group numbers for devices"),T.state=16;break;case 17:s(u.NOT_FOUND,"No group in device"),T.state=16;break;case 16:m=g.getNewState(c,i),d=h.createCommandSequence(c.group,v[c.model].buttons,i),d&&d.length||s(u.NOT_FOUND),b=!1,p=_(),k=[],O.defer(function(){b||p!=A.devices.getState()[r].newstate_timestamp||A.devices.applyItemChanges(r,{newstate:null,newstate_timestamp:null})}),A.devices.applyItemChanges(r,{newstate:m,newstate_timestamp:p}),T.state=30;break;case 30:return T.state=22,A.session($traceurRuntime.initGeneratorFunction(function q(e){var t,n,a,o,s,u,i,f,l,h,g,v;return $traceurRuntime.createGeneratorInstance(function(_){for(;;)switch(_.state){case 0:t=d[$traceurRuntime.toProperty(Symbol.iterator)](),n=void 0,_.state=14;break;case 14:_.state=(n=t.next()).done?20:18;break;case 18:a=n.value,_.state=19;break;case 19:_.pushTry(9,null),_.state=12;break;case 12:o=c.acknowledgement!==!1,o&&(a.ACK=!0),_.state=6;break;case 6:return _.state=2,e(a);case 2:s=_.sent,_.state=4;break;case 4:if("OK"!=s.RESULT)throw new D(s.RESULT,{answer:s});_.state=8;break;case 8:_.popTry(),_.state=14;break;case 9:_.popTry(),u=_.storedException,_.state=15;break;case 15:if(console.error("modem error:".red,u),!(u instanceof w.ETimeout||u.answer&&"Connection_error"==u.answer.RESULT))throw u;k.push(u),_.state=14;break;case 20:_.state=k.length?26:29;break;case 26:i=d[0],f=i.group,l={id:"Dest_Condition",group:f},h=e(l),_.state=27;break;case 27:return _.state=23,h;case 23:g=_.sent,_.state=25;break;case 25:v=g.DEST_CONDITION,m=v,_.state=29;break;case 29:null!=m&&(A.devices.applyItemChanges(r,{state:m,state_timestamp:p}),b=!0),_.state=-2;break;default:return _.end()}},q,this)}));case 22:T.maybeThrow(),T.state=-2;break;default:return T.end()}},rt,this)})});require("watchStop")(S)(E)(__dirname+"/../templates/")(__dirname+"/../templates/locations/");var M=require("express");require("rewriter");var L=require("JSONservice");global.LOGGER=console;var V={expires:new Date("Fri, 31-Dec-9999 23:59:59 GMT")},P=function(e){return new Buffer(e).toString("base64")},J=require("cookie-parser")(),H=function(e){return J(e,null,R.noop)},Q=O.func($traceurRuntime.initGeneratorFunction(function nt(e,t,r){var n,a,o;return $traceurRuntime.createGeneratorInstance(function(s){for(;;)switch(s.state){case 0:H(e),s.state=16;break;case 16:s.state=G&&e.cookies.auth!=G.hash?1:10;break;case 1:return s.state=2,O.sleep(200);case 2:s.maybeThrow(),s.state=4;break;case 4:n=e.headers.authorization,n&&(n=n.match(/^Basic\s+(.*)$/)),n&&(n=n[1]),s.state=13;break;case 13:s.state=n==P(G.name+":"+G.userkey)?9:7;break;case 9:t&&t.cookie("auth",G.hash,V),s.state=10;break;case 7:a=e.headers.origin||"*",o=e.socket,o.write("HTTP/1.1 "+u.UNAUTHORIZED+" "+u[u.UNAUTHORIZED]+"\r\nAccess-Control-Allow-Origin: "+a+"\r\nAccess-Control-Allow-Credentials: true\r\nWWW-Authenticate: Basic realm="+JSON.stringify(j)+"\r\n\r\nunauthorized"),o.end(),t&&t.status(u.UNAUTHORIZED).end(),s.state=8;break;case 8:s.state=-2;break;case 10:r(),s.state=-2;break;default:return s.end()}},nt,this)})),z=M().use(J).use(require("http_log")).use(function(e,t,r){var n=e.headers.origin||"*";t.setHeader("Access-Control-Allow-Origin",n),t.setHeader("Access-Control-Allow-Credentials",!0),r()}).use(require("compression")({threshold:0})).all("/ping",function(e,t){return t.end("pong")}).all("/logout",function(e,t){t.clearCookie("auth"),e.on("data",function(e){return t.write(e)}),e.on("end",function(){return t.end("\n\n...LOGOUT")})}).use(Q).all("/login",function(e,t){t.end()}).post("/command",O.func($traceurRuntime.initGeneratorFunction(function at(e,t){var r;return $traceurRuntime.createGeneratorInstance(function(n){for(;;)switch(n.state){case 0:O.defer(function(){return t.end()}),n.state=15;break;case 15:n.pushTry(5,null),n.state=8;break;case 8:return n.state=2,A.userCommand({deviceId:e.query.id,command:e.query.cmd,data:null,socket:t});case 2:n.maybeThrow(),n.state=4;break;case 4:n.popTry(),n.state=-2;break;case 5:n.popTry(),r=n.storedException,n.state=11;break;case 11:console.error("command error",r,r.stack),t.status(r.code||u.INTERNAL_SERVER_ERROR).end(r.message||""),n.state=-2;break;default:return n.end()}},at,this)}))).all("/devices",(A.devices=new L(__dirname+"/../var/devices",{})).httpService).all("/rooms",(A.places=new L(__dirname+"/../var/rooms",{main:"room",room:{content:[]}})).httpService).post("/modem",O.func($traceurRuntime.initGeneratorFunction(function ot(e,t){var r,n,a,o,s,c,u,i,f,l,d,m,b,p;return $traceurRuntime.createGeneratorInstance(function(k){for(;;)switch(k.state){case 0:k.pushTry(11,null),k.state=14;break;case 14:path$__13=JSON.parse(e.query.path),a=JSON.parse(e.query.func),o=JSON.parse(e.query.args),k.state=10;break;case 10:s=A.devices,c=s[path$__13],r=c,u=c[a],i=u.apply,f=$traceurRuntime.spread,l=f.call($traceurRuntime,o),d=i.call(u,r,l),k.state=6;break;case 6:return k.state=2,d;case 2:m=k.sent,k.state=4;break;case 4:b={result:m},n=b,k.state=8;break;case 8:k.popTry(),k.state=16;break;case 11:k.popTry(),p=k.storedException,k.state=17;break;case 17:n={error:p instanceof Error?{stack:p.stack,message:p.message,name:p.name}:{error:p}},k.state=16;break;case 16:t.json(n),k.state=-2;break;default:return k.end()}},ot,this)}))),K=require("websockets/lib/websockets/socket"),B=function(e,t,r){console.log(e.url.red),console.log("checking authorization".red),Q(e,null,function(){console.log("authorized".red);var n=new K(e,t,r,{});n.on("message",function(t){return console.log("<< "+e.url.red+" "+t.cyan)});var a=n.send;switch(n.send=function(t){console.log(">> "+e.url.red+" "+t.cyan),a.call(n,t)},n.on("open",function(){return console.log("websocket open".green,e.url.red)}),n.on("close",function(){return console.log("websocket close".green,e.url.red)}),n.on("error",function(t){return console.log("websocket error".green,e.url.red,t)}),e.url){case"/devices":A.devices.wsService(n);break;case"/places":A.places.wsService(n);break;case"/commands":n.on("message",O.func($traceurRuntime.initGeneratorFunction(function o(e){var t,r;return $traceurRuntime.createGeneratorInstance(function(a){for(;;)switch(a.state){case 0:a.pushTry(9,null),a.state=12;break;case 12:if(e=JSON.parse(e),t=e.id,e=e.question,!t||!e)throw new Error("wrong question");a.state=6;break;case 6:return a.state=2,A.userCommand({deviceId:e.device,command:e.command,data:null});case 2:a.maybeThrow(),a.state=4;break;case 4:n.send(JSON.stringify({id:t,answer:"done"})),a.state=8;break;case 8:a.popTry(),a.state=-2;break;case 9:a.popTry(),r=a.storedException,a.state=15;break;case 15:console.error("command error",r,r.stack),n.send(JSON.stringify({id:t,error:r.message})),a.state=-2;break;default:return a.end()}},o,this)})))}})},W=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return(t=e.createServer(z).on("upgrade",B)).listen.apply(t,$traceurRuntime.spread(r))};W(i,C.serviceport,"::"),W(i,$);var Z=require("http_common_server")({router:require("express").Router().get("/modem_locations",function(e,t){t.json(F.interfaces)})});i.createServer(Z).listen(C.port,"::");var Y=function(){var e=C.boss;e.match(/\:\/\//)||(e="net://"+e);var t=f.parse(e),r={};console.log(("connecting to boss "+t.hostname+":"+t.port).green);var n=require("JSONTransform").parse(l.connect(t.port,t.hostname,function(){return y(function(){return n.writable&&n.write({what:"login",client:G.modem,password:G.modemkey,modemLocations:F.interfaces})})})),a=R.once(function(){return setTimeout(Y,C.restoreConnectionInterval)}),o=function(e){var t=r[e]={buffer:[],socket:l.connect($,function(){t.buffer.length&&t.socket.write(Buffer.concat(t.buffer)),t.buffer=null})};return t.socket.on("data",function(t){return n.write({what:"modem data",stream:e,data:t.toString("base64")})}),t.socket.on("end",function(){n.write({what:"modem data",stream:e,data:null}),setTimeout(function(){delete r[e]},5e3)}),t};n.on("end",a),n.on("error",function(e){console.log("boss error: ",e),a()}),n.on("data",function(e){if(e)switch(e.what){case"user data":var t=e.stream,n=r[t];if(null==e.data)n?n.socket.writable&&n.socket.end():console.log("STRANGE: received end of an absent stream",t);else{var a=new Buffer(e.data,"base64");n||(n=o(t)),n.socket.writable?n.socket.write(a):n.buffer?n.buffer.push(a):console.log("STRANGE: request to write to a closed stream")}}})};return Y(),r&&(global.r=require,require("repl").start({useGlobal:!0,ignoreUndefined:!0}),require("modemstub"),A.retryInterval=2e6,global.Modem=w,global.mm=A,global.c=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];A.session($traceurRuntime.initGeneratorFunction(function r(t){var n,a,o,s,c;return $traceurRuntime.createGeneratorInstance(function(r){for(;;)switch(r.state){case 0:n=t.apply,a=$traceurRuntime.spread,o=a.call($traceurRuntime,e),s=n.call(t,void 0,o),r.state=6;break;case 6:return r.state=2,s;case 2:c=r.sent,r.state=4;break;case 4:r.returnValue=c,r.state=-2;break;default:return r.end()}},r,this)}))},c.v=c.bind(this,"Version"),c.c=function(){var e=void 0!==arguments[0]?arguments[0]:1;return c("Set_To_Comfort",{group:1021,COMFORT:e})},global.m=function(e){return w.extractMessages(e).map(function(e){switch(e.id){case"Change_modem_work_mode":return{Change_modem_work_mode:e.MODEM_MODE};case"Free_Cell_Count":return null;case"answer_Result":return e.RESULT;case"answer_Free_Cell_Count":return{Free_Cell_Count:e.COUNT};case"Change_modem_work_mode":case"Functions":case"answer_Functions":delete e.cmdLo,delete e.cmdHi}return e}).filter(Boolean)},global.v=function(){return m("\n16:29:56: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –¥—Ä–∞–π–≤–µ—Ä—ã sql\n16:29:56: QSQLITE\n16:29:56: QMYSQL3\n16:29:56: QMYSQL\n16:29:56: QPSQL7\n16:29:56: QPSQL\n16:29:56: –ü–æ—Ç–æ–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω\n16:29:56: –û—Ç–∫—Ä—ã—Ç –ø–æ—Ä—Ç RS232 ‚Ññ3\n16:29:56: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 0 0 20 12 0 0 0 0 68 39\n16:29:56: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 0 0 21 12 1 49 16 8 23 34 \n16:29:56: –í–µ—Ä—Å–∏—è –ü–û –º–æ–¥–µ–º–∞:73.1.8.22\n16:29:56: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 0 0 20 11 0 0 0 0 9f 1f\n16:29:57: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 0 0 21 11 7a 0 7e 0 17 91 \n16:29:57: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 0 0 20 15 0 0 0 0 59 99\n16:29:57: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 0 0 21 15 3 0 0 0 35 52 \n16:29:57: x=1366,y=628\n16:29:57: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã: Nero II Smarthome; Intro II Smarthome;\n16:29:57: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: 0\n16:30:17: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fe 3 1 0 1 0 0 0 12 32\n16:30:18: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fe 3 21 f 1 0 0 0 b1 1b \n16:30:28: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 0 0 19 1 1 0 0 0 b 24\n16:30:28: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 0 0 21 f 1 0 0 0 96 a8 \n16:30:28: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 0 0 20 11 0 0 0 0 9f 1f\n16:30:28: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 0 0 21 11 7a 0 7e 0 17 91 \n16:30:38: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fd 3 1 0 1 0 0 0 22 8c\n16:30:38: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fd 3 21 f 1 0 0 0 81 a5 \n16:30:42: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 0 0 19 1 1 0 0 0 b 24\n16:30:42: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 0 0 21 f 1 0 0 0 96 a8 \n16:30:42: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 0 0 20 11 0 0 0 0 9f 1f\n16:30:42: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 0 0 21 11 7a 0 7e 0 17 91 \n16:33:27: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fe 3 10 20 10 27 80 81 33 98\n16:33:28: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fe 3 21 f 1 0 0 0 b1 1b \n16:34:01: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fd 3 10 20 10 27 80 81 3 26\n16:34:02: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fd 3 21 f 1 0 0 0 81 a5 \n16:34:11: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fe 3 10 20 0 0 80 81 30 ac\n16:34:11: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fe 3 21 f 1 0 0 0 b1 1b \n16:34:18: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fd 3 10 20 0 0 80 81 0 12\n16:34:19: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fd 3 21 f 1 0 0 0 81 a5 \n\n\n00:31:52: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fd 3 10 20 0 0 80 81 0 12 00:31:52: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fd 3 21 f 1 0 0 0 81 a5  00:31:57: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fe 3 10 20 10 27 80 81 33 98 00:31:58: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fe 3 21 f 1 0 0 0 b1 1b  00:32:10: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fe 3 10 20 0 0 80 81 30 ac 00:32:11: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fe 3 21 f 1 0 0 0 b1 1b  00:32:25: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fd 3 10 20 10 27 80 81 3 26 00:32:26: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fd 3 21 f 1 0 0 0 81 a5  00:32:33: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fd 3 10 20 0 0 80 81 0 12 00:32:33: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fd 3 21 f 1 0 0 0 81 a5  00:32:52: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fd 3 10 20 10 27 80 81 3 26 00:32:52: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fd 3 21 f 1 0 0 0 81 a5  00:37:50: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fd 3 10 3 1 0 0 1 ae f2 00:37:51: –¢–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç –º–æ–¥–µ–º–∞ 00:37:52: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fd 3 10 3 9 0 0 1 dd f1 00:37:52: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fd 3 21 f 1 0 0 0 81 a5  00:37:53: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fd 3 21 f 1 0 0 0 81 a5  00:37:54: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fd 3 10 2 1 0 0 1 f4 c9 00:37:55: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fd 3 21 f 1 0 0 0 81 a5  00:37:55: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fd 3 10 2 9 0 0 1 87 ca 00:37:56: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fd 3 21 f 1 0 0 0 81 a5  00:38:04: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fd 3 10 4 1 0 60 1 9f 54 00:38:05: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fd 3 21 f 1 0 0 0 81 a5  00:38:06: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fd 3 10 5 1 0 60 1 c5 6f 00:38:08: –¢–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç –º–æ–¥–µ–º–∞ 00:38:08: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fd 3 21 f 1 0 0 0 81 a5  00:38:27: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fd 3 10 1 1 0 20 1 3 eb 00:38:28: –¢–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç –º–æ–¥–µ–º–∞ 00:38:28: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fd 3 10 1 9 0 20 1 70 e8 00:38:28: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fd 3 21 f 1 0 0 0 81 a5  00:38:29: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fd 3 21 f 1 0 0 0 81 a5  00:38:32: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fd 3 10 2 1 0 0 1 f4 c9 00:38:33: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fd 3 21 f 1 0 0 0 81 a5  00:38:33: –ü–æ—Å—ã–ª–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –º–æ–¥–µ–º 7e ff 3 1 8 fd 3 10 2 9 0 0 1 87 ca 00:38:34: –ü—Ä–∏–Ω—è—Ç –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–º–∞: 7e ff 3 1 8 fd 3 21 f 1 0 0 0 81 a5 \n")}),{}}.call(Reflect.global)})}();
//# sourceMappingURL=out.js.map

},{"JSONTransform":"/home/vadzim/v/work/nerojs/src/JSONTransform.js","JSONservice":"/home/vadzim/v/work/nerojs/src/JSONservice.js","actionToCommands":"/home/vadzim/v/work/nerojs/src/actionToCommands.js","checkreboot":"/home/vadzim/v/work/nerojs/src/checkreboot.js","child_process":false,"co":"/home/vadzim/v/work/nerojs/src/co.js","compression":false,"constants":false,"cookie-parser":"/home/vadzim/v/work/nerojs/node_modules/cookie-parser/index.js","crypto":false,"csvConfig":"/home/vadzim/v/work/nerojs/src/csvConfig.js","deviceActions":"/home/vadzim/v/work/nerojs/src/deviceActions.js","deviceTypes":"/home/vadzim/v/work/nerojs/src/deviceTypes.json","express":false,"fs":false,"glob":"/home/vadzim/v/work/nerojs/node_modules/glob/glob.js","http":false,"http-status":"/home/vadzim/v/work/nerojs/node_modules/http-status/lib/index.js","http_common_server":"/home/vadzim/v/work/nerojs/src/http_common_server.js","http_log":"/home/vadzim/v/work/nerojs/src/http_log.js","inc":"/home/vadzim/v/work/nerojs/src/inc.js","localUtils":"/home/vadzim/v/work/nerojs/src/localUtils.js","lodash":"/home/vadzim/v/work/nerojs/node_modules/lodash/dist/lodash.js","modem":"/home/vadzim/v/work/nerojs/src/modem.js","modemstub":"/home/vadzim/v/work/nerojs/src/modemstub.js","net":false,"os":false,"path":false,"pingpong":"/home/vadzim/v/work/nerojs/src/pingpong.js","platform":"/home/vadzim/v/work/nerojs/src/platform.js","ra":"/home/vadzim/v/work/nerojs/src/ra.js","repl":false,"rewriter":"/home/vadzim/v/work/nerojs/src/rewriter.js","stream":false,"uid":"/home/vadzim/v/work/nerojs/src/uid.js","url":false,"watchStop":"/home/vadzim/v/work/nerojs/src/watchStop.js","websockets/lib/websockets/socket":"/home/vadzim/v/work/nerojs/node_modules/websockets/lib/websockets/socket.js","yamljs":"/home/vadzim/v/work/nerojs/node_modules/yamljs/lib/Yaml.js"}],"/home/vadzim/v/work/nerojs/src/uid.js":[function(require,module,exports){
!function(){!function(r){var t=global.performance||Date,e=0,n=t.now(),i=require,o=function(){e+=t.now()-n,require=i;try{return i.apply(this,arguments)}finally{require=o,n=t.now()}};require=o;try{r()}finally{require=i,e+=t.now()-n,e/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/uid.js"]=e}}(function(){"use strict";var r=0;module.exports=function(t){var e=(++r).toString(36),n=parseInt(Math.random().toString().slice(2,17)).toString(36),i=(n.length+9).toString(36)+n+e;return null==t?i:(t.uid=i,t)}})}();
//# sourceMappingURL=out.js.map

},{}],"/home/vadzim/v/work/nerojs/src/watchStop.js":[function(require,module,exports){
!function(){!function(r){var e=global.performance||Date,o=0,t=e.now(),n=require,s=function(){o+=e.now()-t,require=n;try{return n.apply(this,arguments)}finally{require=s,t=e.now()}};require=s;try{r()}finally{require=n,o+=e.now()-t,o/=1e3,global.__require_stats__||(global.__require_stats__={}),global.__require_stats__["/home/vadzim/v/work/nerojs/src/watchStop.js"]=o}}(function(){"use strict";function r(r){return e.watch(r,function(){setTimeout(function(){process.stderr.write("\n"+"Aborting process".red+" "+o.yellow+". Changed "+r+"\n"),process.exit(1)},300)}),module.exports}require("colors");var e=require("fs"),o=process.argv[1];r(o),module.exports=r})}();
//# sourceMappingURL=out.js.map

},{"colors":"/home/vadzim/v/work/nerojs/node_modules/colors/lib/index.js","fs":false}]},{},["/home/vadzim/v/work/nerojs/node_modules/traceur/bin/traceur-runtime.js","/home/vadzim/v/work/nerojs/src/server.js"]);
